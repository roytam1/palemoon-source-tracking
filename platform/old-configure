#! /bin/sh

if test `uname -s | grep -c MINGW 2>/dev/null` != "0"; then
  msyshost=1
fi


# Read the user's .mozconfig script.  We can't do this in
# configure.in: autoconf puts the argument parsing code above anything
# expanded from configure.in, and we need to get the configure options
# from .mozconfig in place before that argument parsing code.
. ./old-configure.vars

# Guess values for system-dependent variables and create Makefiles.
# Generated automatically using autoconf version 2.13 
# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#
# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.

# Defaults:
ac_help=
ac_default_prefix=/usr/local
# Any additions from configure.in:
ac_help="$ac_help
  --enable-release        Build with more conservative, release engineering-oriented options.
                          This may slow down builds."
ac_help="$ac_help
  --with-unify-dist=dir   Location of the dist directory to unify with at packaging time (Mac OS X universal build only)"
ac_help="$ac_help
  --with-macos-sdk=dir    Location of platform SDK to use (Mac OS X only)"
ac_help="$ac_help
  --with-macos-private-frameworks=dir    Location of private frameworks to use (Mac OS X only)"
ac_help="$ac_help
  --with-x                use the X Window System"
ac_help="$ac_help
  --with-arch=[[type|toolchain-default]]
                           Use specific CPU features (-march=type). Resets
                           thumb, fpu, float-abi, etc. defaults when set"
ac_help="$ac_help
  --with-thumb[[=yes|no|toolchain-default]]
                          Use Thumb instruction set (-mthumb)"
ac_help="$ac_help
  --with-thumb-interwork[[=yes|no|toolchain-default]]
                           Use Thumb/ARM instuctions interwork (-mthumb-interwork)"
ac_help="$ac_help
  --with-fpu=[[type|toolchain-default]]
                           Use specific FPU type (-mfpu=type)"
ac_help="$ac_help
  --with-float-abi=[[type|toolchain-default]]
                           Use specific arm float ABI (-mfloat-abi=type)"
ac_help="$ac_help
  --with-soft-float[[=yes|no|toolchain-default]]
                           Use soft float library (-msoft-float)"
ac_help="$ac_help
  --enable-address-sanitizer       Enable Address Sanitizer (default=no)"
ac_help="$ac_help
  --enable-memory-sanitizer       Enable Memory Sanitizer (default=no)"
ac_help="$ac_help
  --enable-thread-sanitizer       Enable Thread Sanitizer (default=no)"
ac_help="$ac_help
  --enable-llvm-hacks       Enable workarounds required for several LLVM instrumentations (default=no)"
ac_help="$ac_help
  --enable-valgrind       Enable Valgrind integration hooks (default=no)"
ac_help="$ac_help
  --with-debug-label=LABELS
                          Define DEBUG_<value> for each comma-separated
                          value given."
ac_help="$ac_help
  --with-debug-label=LABELS
                          Define DEBUG_<value> for each comma-separated
                          value given."
ac_help="$ac_help
  --enable-cpp-rtti       Enable C++ RTTI "
ac_help="$ac_help
  --enable-gold           Enable GNU Gold Linker when it is not already the default"
ac_help="$ac_help
  --disable-icf          Disable Identical Code Folding"
ac_help="$ac_help
  --enable-pie           Enable Position Independent Executables"
ac_help="$ac_help
  --enable-dtrace         build with dtrace support if available (default=no)"
ac_help="$ac_help
  --with-pthreads         Force use of system pthread library with NSPR "
ac_help="$ac_help
  --with-nspr-cflags=FLAGS
                          Pass FLAGS to CC when building code that uses NSPR.
                          Use this when there's no accurate nspr-config
                          script available.  This is the case when building
                          SpiderMonkey as part of the Mozilla tree: the
                          top-level configure script computes NSPR flags
                          that accomodate the quirks of that environment."
ac_help="$ac_help
  --with-nspr-libs=LIBS   Pass LIBS to LD when linking code that uses NSPR.
                          See --with-nspr-cflags for more details."
ac_help="$ac_help
  --enable-nspr-build     Build NSPR from source tree"
ac_help="$ac_help
  --enable-posix-nspr-emulation
                          Enable emulation of NSPR for POSIX systems"
ac_help="$ac_help
  --with-system-jpeg[=PFX]
                          Use system libjpeg [installed at prefix PFX]"
ac_help="$ac_help
  --with-system-zlib[=PFX]
                          Use system libz [installed at prefix PFX]"
ac_help="$ac_help
  --with-system-bz2[=PFX]
                          Use system libbz2 [installed at prefix PFX]"
ac_help="$ac_help
  --enable-official-vendor   This is an official release build."
ac_help="$ac_help
  --enable-official-branding
                          Enable Official Branding
                          Do not distribute builds with
                          --enable-official-branding unless you have
                          permission to use our trademarks!"
ac_help="$ac_help
--with-app-name=APPNAME sets MOZ_APP_NAME to APPNAME"
ac_help="$ac_help
--with-app-basename=BASENAME sets MOZ_APP_BASENAME to BASENAME"
ac_help="$ac_help
  --enable-startup-notification
                          Enable startup-notification support (default: disabled) "
ac_help="$ac_help
  --enable-ui-locale=ab-CD
                          Select the user interface locale (default: en-US)"
ac_help="$ac_help
  --with-branding=dir     Use branding from the specified directory."
ac_help="$ac_help
  --enable-private-build   Enable private builds
                            This allows you to build with official
                            branding for personal use only using any
                            build time configuration."
ac_help="$ac_help
  --with-distribution-id=ID
                          Set distribution-specific id (default=org.mozilla)"
ac_help="$ac_help
  --disable-gio           Disable GIO support"
ac_help="$ac_help
  --disable-gconf      Disable Gconf support "
ac_help="$ac_help
  --enable-libproxy         Enable libproxy support "
ac_help="$ac_help
  --enable-gnomeui        Enable libgnomeui instead of GIO & GTK for icon theme support "
ac_help="$ac_help
  --disable-dbus          Disable dbus support "
ac_help="$ac_help
  --disable-accessibility Disable accessibility support"
ac_help="$ac_help
  --disable-dbm         Disable DBM support in nss"
ac_help="$ac_help
  --enable-security-sqlstore Enable the use of SQL storage for NSS"
ac_help="$ac_help
  --enable-incomplete-external-linkage Don't fold *comps into libXUL which is currently badly busted so don't even bother with it "
ac_help="$ac_help
  --enable-mailnews          Enable the mailnews core backend"
ac_help="$ac_help
  --disable-mailnews-oauth2         Disable oauth2 support in mailnews"
ac_help="$ac_help
  --disable-ldap          Disable LDAP support"
ac_help="$ac_help
  --disable-mapi          Disable MAPI support"
ac_help="$ac_help
  --enable-webrtc        Enable support for WebRTC"
ac_help="$ac_help
  --enable-hardware-aec-ns   Enable support for hardware AEC and noise suppression"
ac_help="$ac_help
  --enable-raw           Enable support for RAW media"
ac_help="$ac_help
  --enable-av1           Enable libaom for av1 video support"
ac_help="$ac_help
  --enable-eme           Enable support for Encrypted Media Extensions  "
ac_help="$ac_help
  --enable-alsa          Enable Alsa support (default on Linux)"
ac_help="$ac_help
  --disable-pulseaudio          Disable PulseAudio support"
ac_help="$ac_help
  --enable-sndio       Enable sndio support"
ac_help="$ac_help
  --disable-negotiateauth Disable GSS-API negotiation "
ac_help="$ac_help
  --disable-pref-extensions
                          Disable pref extensions such as autoconfig"
ac_help="$ac_help
  --disable-system-extension-dirs
                          Disable searching system- and account-global
                          directories for extensions of any kind; use
                          only profile-specific extension directories"
ac_help="$ac_help
  --disable-universalchardet
                          Disable universal encoding detection"
ac_help="$ac_help
  --enable-gamepad   Enable gamepad support"
ac_help="$ac_help
 --disable-libjpeg-turbo  Disable optimized jpeg decoding routines"
ac_help="$ac_help
  --enable-extensions     Enable extensions"
ac_help="$ac_help
  --enable-bundled-fonts  Enable support for bundled fonts on desktop platforms"
ac_help="$ac_help
  --enable-verify-mar     Enable verifying MAR signatures"
ac_help="$ac_help
  --enable-signmar     Enable building the signmar program"
ac_help="$ac_help
  --enable-updater       Enable building of internal updater"
ac_help="$ac_help
  --enable-tests          Build test libraries & programs"
ac_help="$ac_help
  --disable-parental-controls
                          Do not build parental controls"
ac_help="$ac_help
  --disable-feeds         Disable feed handling and processing components"
ac_help="$ac_help
  --enable-safe-browsing  Enable safe browsing (anti-phishing) implementation"
ac_help="$ac_help
  --enable-url-classifier Enable url classifier module"
ac_help="$ac_help
  --disable-zipwriter     Disable zipwriter component"
ac_help="$ac_help
  --enable-faststripe     Use faststripe theme"
ac_help="$ac_help
  --disable-optimize      Disable compiler optimization
  --enable-optimize=[OPT] Specify compiler optimization flags [OPT=-O]"
ac_help="$ac_help
  --enable-logrefcnt      Enable logging of refcounts (default=debug) "
ac_help="$ac_help
  --enable-dump-painting          Enable paint debugging."
ac_help="$ac_help
  --enable-clang-plugin   Enable building with the mozilla clang plugin "
ac_help="$ac_help
  --enable-strip          Enable stripping of libs & executables "
ac_help="$ac_help
  --enable-install-strip  Enable stripping of libs & executables when packaging "
ac_help="$ac_help
  --disable-elf-hack      Disable elf hacks"
ac_help="$ac_help
  --enable-stdcxx-compat  Enable compatibility with older libstdc++"
ac_help="$ac_help
  --enable-debug-js-modules  Enable debug mode for frontend JS libraries"
ac_help="$ac_help
  --disable-precompiled-startupcache      Don't precompile the startup cache "
ac_help="$ac_help
  --enable-tasktracer       Set compile flags necessary for using TaskTracer"
ac_help="$ac_help
  --enable-reflow-perf    Enable reflow performance tracing"
ac_help="$ac_help
  --disable-startupcache          Disable startup cache "
ac_help="$ac_help
  --enable-synth-pico  Set compile flags necessary for compiling Pico Web Speech API "
ac_help="$ac_help
  --jitreport-granularity=N
                           Default granularity at which to report JIT code
                           to external tools
                             0 - no info
                             1 - code ranges for whole functions only
                             2 - per-line information
                             3 - per-op information"
ac_help="$ac_help
  --disable-mozril-geoloc         Disable Mozilla's RIL and geolocation"
ac_help="$ac_help
  --enable-chrome-format=jar|flat|omni
                          Select FORMAT of chrome files during packaging"
ac_help="$ac_help
  --enable-chrome-compression=none|deflate|brotli
                          Select COMPRESSION type of chrome files during packaging"
ac_help="$ac_help
  --with-chrome-name=CHROMENAME
                          Set chrome jar name (default=omni.ja)"
ac_help="$ac_help
  --disable-jetpack         Disable Jetpack Support Code"
ac_help="$ac_help
  --disable-devtools-server         Disable Mozilla Developer Tools (server)"
ac_help="$ac_help
  --enable-devtools           Enable Mozilla Developer Tools (client)"
ac_help="$ac_help
  --disable-userinfo         Disable nsUserInfo (default=enabled)"
ac_help="$ac_help
  --with-default-mozilla-five-home
                          Set the default value for MOZILLA_FIVE_HOME"
ac_help="$ac_help
  --with-user-appdir=DIR  Set user-specific appdir (default=.mozilla)"
ac_help="$ac_help
  --with-doc-input-dirs=DIRS
                          Header/idl dirs to create docs from"
ac_help="$ac_help
  --with-doc-include-dirs=DIRS
                          Include dirs to preprocess doc headers"
ac_help="$ac_help
  --with-doc-output-dir=DIR
                          Dir to generate docs into"
ac_help="$ac_help
  --enable-shared-media          Build GKMedias as a shared lib"
ac_help="$ac_help
  --enable-system-cairo   Use system cairo (located with pkgconfig)"
ac_help="$ac_help
 --enable-system-pixman Use system pixman (located with pkgconfig)"
ac_help="$ac_help
  --disable-xul           Disable XUL"
ac_help="$ac_help
  --disable-necko-wifi    Disable necko wifi scanner"
ac_help="$ac_help
  --disable-cookies       Disable cookie support"
ac_help="$ac_help
  --with-macbundlename-prefix=prefix
                          Prefix for MOZ_MACBUNDLE_NAME"

# Initialize some variables set by options.
# The variables have the same names as the options, with
# dashes changed to underlines.
build=NONE
cache_file=./config.cache
exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${exec_prefix}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

# Initialize some other variables.
subdirs=
MFLAGS= MAKEFLAGS=
SHELL=${CONFIG_SHELL-/bin/sh}
# Maximum number of lines to put in a shell here document.
ac_max_here_lines=12

ac_prev=
for ac_option
do

  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval "$ac_prev=\$ac_option"
    ac_prev=
    continue
  fi

  case "$ac_option" in
  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) ac_optarg= ;;
  esac

  # Accept the important Cygnus configure options, so we can diagnose typos.

  case "$ac_option" in

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir="$ac_optarg" ;;

  -build | --build | --buil | --bui | --bu)
    ac_prev=build ;;
  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
    build="$ac_optarg" ;;

  -cache-file | --cache-file | --cache-fil | --cache-fi \
  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
    ac_prev=cache_file ;;
  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
    cache_file="$ac_optarg" ;;

  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
  | --da=*)
    datadir="$ac_optarg" ;;

  -disable-* | --disable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; echo "configure: error: $ac_feature: invalid feature name" 1>&5; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    eval "enable_${ac_feature}=no" ;;

  -enable-* | --enable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; echo "configure: error: $ac_feature: invalid feature name" 1>&5; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "enable_${ac_feature}='$ac_optarg'" ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix="$ac_optarg" ;;

  -gas | --gas | --ga | --g)
    # Obsolete; use --with-gas.
    with_gas=yes ;;

  -help | --help | --hel | --he)
    # Omit some internal or obsolete options to make the list less imposing.
    # This message is too long to be a string in the A/UX 3.1 sh.
    cat << EOF
Usage: configure [options] [host]
Options: [defaults in brackets after descriptions]
Configuration:
  --cache-file=FILE       cache test results in FILE
  --help                  print this message
  --no-create             do not create output files
  --quiet, --silent       do not print \`checking...' messages
  --version               print the version of autoconf that created configure
Directory and file names:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$ac_default_prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [same as prefix]
  --bindir=DIR            user executables in DIR [EPREFIX/bin]
  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
  --datadir=DIR           read-only architecture-independent data in DIR
                          [PREFIX/share]
  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
                          [PREFIX/com]
  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
  --includedir=DIR        C header files in DIR [PREFIX/include]
  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
  --infodir=DIR           info documentation in DIR [PREFIX/info]
  --mandir=DIR            man documentation in DIR [PREFIX/man]
  --srcdir=DIR            find the sources in DIR [configure dir or ..]
  --program-prefix=PREFIX prepend PREFIX to installed program names
  --program-suffix=SUFFIX append SUFFIX to installed program names
  --program-transform-name=PROGRAM
                          run sed PROGRAM on installed program names
EOF
    cat << EOF
Host type:
  --build=BUILD           configure for building on BUILD [BUILD=HOST]
  --host=HOST             configure for HOST [guessed]
  --target=TARGET         configure for TARGET [TARGET=HOST]
Features and packages:
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --x-includes=DIR        X include files are in DIR
  --x-libraries=DIR       X library files are in DIR
EOF
    if test -n "$ac_help"; then
      echo "--enable and --with options recognized:$ac_help"
    fi
    exit 0 ;;

  -host | --host | --hos | --ho)
    ac_prev=host ;;
  -host=* | --host=* | --hos=* | --ho=*)
    host="$ac_optarg" ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir="$ac_optarg" ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir="$ac_optarg" ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir="$ac_optarg" ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir="$ac_optarg" ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst \
  | --locals | --local | --loca | --loc | --lo)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
    localstatedir="$ac_optarg" ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir="$ac_optarg" ;;

  -nfp | --nfp | --nf)
    # Obsolete; use --without-fp.
    with_fp=no ;;

  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c)
    no_create=yes ;;

  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
    no_recursion=yes ;;

  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
  | --oldin | --oldi | --old | --ol | --o)
    ac_prev=oldincludedir ;;
  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
    oldincludedir="$ac_optarg" ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix="$ac_optarg" ;;

  -program-prefix | --program-prefix | --program-prefi | --program-pref \
  | --program-pre | --program-pr | --program-p)
    ac_prev=program_prefix ;;
  -program-prefix=* | --program-prefix=* | --program-prefi=* \
  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
    program_prefix="$ac_optarg" ;;

  -program-suffix | --program-suffix | --program-suffi | --program-suff \
  | --program-suf | --program-su | --program-s)
    ac_prev=program_suffix ;;
  -program-suffix=* | --program-suffix=* | --program-suffi=* \
  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
    program_suffix="$ac_optarg" ;;

  -program-transform-name | --program-transform-name \
  | --program-transform-nam | --program-transform-na \
  | --program-transform-n | --program-transform- \
  | --program-transform | --program-transfor \
  | --program-transfo | --program-transf \
  | --program-trans | --program-tran \
  | --progr-tra | --program-tr | --program-t)
    ac_prev=program_transform_name ;;
  -program-transform-name=* | --program-transform-name=* \
  | --program-transform-nam=* | --program-transform-na=* \
  | --program-transform-n=* | --program-transform-=* \
  | --program-transform=* | --program-transfor=* \
  | --program-transfo=* | --program-transf=* \
  | --program-trans=* | --program-tran=* \
  | --progr-tra=* | --program-tr=* | --program-t=*)
    program_transform_name="$ac_optarg" ;;

  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil)
    silent=yes ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir="$ac_optarg" ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir="$ac_optarg" ;;

  -site | --site | --sit)
    ac_prev=site ;;
  -site=* | --site=* | --sit=*)
    site="$ac_optarg" ;;

  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
    ac_prev=srcdir ;;
  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
    srcdir="$ac_optarg" ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir="$ac_optarg" ;;

  -target | --target | --targe | --targ | --tar | --ta | --t)
    ac_prev=target ;;
  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
    target="$ac_optarg" ;;

  -v | -verbose | --verbose | --verbos | --verbo | --verb)
    verbose=yes ;;

  -version | --version | --versio | --versi | --vers)
    echo "configure generated by autoconf version 2.13"
    exit 0 ;;

  -with-* | --with-*)
    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; echo "configure: error: $ac_package: invalid package name" 1>&5; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "with_${ac_package}='$ac_optarg'" ;;

  -without-* | --without-*)
    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; echo "configure: error: $ac_package: invalid package name" 1>&5; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    eval "with_${ac_package}=no" ;;

  --x)
    # Obsolete; use --with-x.
    with_x=yes ;;

  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
  | --x-incl | --x-inc | --x-in | --x-i)
    ac_prev=x_includes ;;
  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
    x_includes="$ac_optarg" ;;

  -x-libraries | --x-libraries | --x-librarie | --x-librari \
  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
    ac_prev=x_libraries ;;
  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
    x_libraries="$ac_optarg" ;;

  -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&5; exit 1; }
    ;;

  *)
    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
      echo "configure: warning: $ac_option: invalid host type" 1>&2
    fi
    if test "x$nonopt" != xNONE; then
      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; echo "configure: error: can only configure for one host and one target at a time" 1>&5; exit 1; }
    fi
    nonopt="$ac_option"
    ;;

  esac
done

if test -n "$ac_prev"; then
  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&5; exit 1; }
fi

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set these to C if already set.  These must not be set unconditionally
# because not all systems understand e.g. LANG=C (notably SCO).
# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
# Non-C LC_CTYPE values break the ctype check.
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=config/config.mk

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; echo "configure: error: can not find sources in $ac_confdir or .." 1>&5; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; echo "configure: error: can not find sources in $srcdir" 1>&5; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done

if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

ac_exeext=
ac_objext=o
if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi



test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

> subconfigures
> skip_subconfigures

ac_aux_dir=
for ac_dir in ${srcdir}/build/autoconf $srcdir/${srcdir}/build/autoconf; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in ${srcdir}/build/autoconf $srcdir/${srcdir}/build/autoconf" 1>&2; echo "configure: error: can not find install-sh or install.sh in ${srcdir}/build/autoconf $srcdir/${srcdir}/build/autoconf" 1>&5; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.


# Do some error checking and defaulting for the host and target type.
# The inputs are:
#    configure --host=HOST --target=TARGET --build=BUILD NONOPT
#
# The rules are:
# 1. You are not allowed to specify --host, --target, and nonopt at the
#    same time.
# 2. Host defaults to nonopt.
# 3. If nonopt is not specified, then host defaults to the current host,
#    as determined by config.guess.
# 4. Target and build default to nonopt.
# 5. If nonopt is not specified, then target and build default to host.

# The aliases save the names the user supplied, while $host etc.
# will get canonicalized.
case $host---$target---$nonopt in
NONE---*---* | *---NONE---* | *---*---NONE) ;;
*) { echo "configure: error: can only configure for one host and one target at a time" 1>&2; echo "configure: error: can only configure for one host and one target at a time" 1>&5; exit 1; } ;;
esac


# Make sure we can run config.sub.
if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
else { echo "configure: error: can not run $ac_config_sub" 1>&2; echo "configure: error: can not run $ac_config_sub" 1>&5; exit 1; }
fi

echo $ac_n "checking host system type""... $ac_c" 1>&6
echo "configure:873: checking host system type" >&5

host_alias=$host
case "$host_alias" in
NONE)
  case $nonopt in
  NONE)
    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; echo "configure: error: can not guess host type; you must specify one" 1>&5; exit 1; }
    fi ;;
  *) host_alias=$nonopt ;;
  esac ;;
esac

host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$host" 1>&6

echo $ac_n "checking target system type""... $ac_c" 1>&6
echo "configure:894: checking target system type" >&5

target_alias=$target
case "$target_alias" in
NONE)
  case $nonopt in
  NONE) target_alias=$host_alias ;;
  *) target_alias=$nonopt ;;
  esac ;;
esac

target=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $target_alias`
target_cpu=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
target_vendor=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
target_os=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$target" 1>&6

echo $ac_n "checking build system type""... $ac_c" 1>&6
echo "configure:912: checking build system type" >&5

build_alias=$build
case "$build_alias" in
NONE)
  case $nonopt in
  NONE) build_alias=$host_alias ;;
  *) build_alias=$nonopt ;;
  esac ;;
esac

build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`
build_cpu=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
build_vendor=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$build" 1>&6

test "$host_alias" != "$target_alias" &&
  test "$program_prefix$program_suffix$program_transform_name" = \
    NONENONEs,x,x, &&
  program_prefix=${target_alias}-


CFLAGS="${CFLAGS=}"
CPPFLAGS="${CPPFLAGS=}"
CXXFLAGS="${CXXFLAGS=}"
LDFLAGS="${LDFLAGS=}"
HOST_CFLAGS="${HOST_CFLAGS=}"
HOST_CXXFLAGS="${HOST_CXXFLAGS=}"
HOST_LDFLAGS="${HOST_LDFLAGS=}"

_SUBDIR_CC="$CC"
_SUBDIR_CXX="$CXX"
_SUBDIR_CFLAGS="$CFLAGS"
_SUBDIR_CPPFLAGS="$CPPFLAGS"
_SUBDIR_CXXFLAGS="$CXXFLAGS"
_SUBDIR_LDFLAGS="$LDFLAGS"
_SUBDIR_HOST_CC="$HOST_CC"
_SUBDIR_HOST_CFLAGS="$HOST_CFLAGS"
_SUBDIR_HOST_CXXFLAGS="$HOST_CXXFLAGS"
_SUBDIR_HOST_LDFLAGS="$HOST_LDFLAGS"
_SUBDIR_CONFIG_ARGS="$ac_configure_args"

MOZJPEG=62
MOZPNG=10625
NSPR_VERSION=4
NSPR_MINVER=4.20
NSS_VERSION=3

GLIB_VERSION=2.22
# 2_26 is the earliest version we can set GLIB_VERSION_MIN_REQUIRED.
# The macro won't be used when compiling with earlier versions anyway.
GLIB_VERSION_MIN_REQUIRED=GLIB_VERSION_2_26
GIO_VERSION=2.22
CAIRO_VERSION=1.10
GTK2_VERSION=2.18.0
GTK3_VERSION=3.4.0
GDK_VERSION_MAX_ALLOWED=GDK_VERSION_3_4
WINDRES_VERSION=2.14.90
W32API_VERSION=3.14
GNOMEUI_VERSION=2.2.0
GCONF_VERSION=1.2.1
STARTUP_NOTIFICATION_VERSION=0.8
DBUS_VERSION=0.60
SQLITE_VERSION=3.36.0

MISSING_X=

MOZ_USE_PTHREADS=
_PTHREAD_LDFLAGS=""

_topsrcdir=`cd \`dirname $0\`; pwd -W 2>/dev/null || pwd -P`
_objdir=`pwd -P`

MOZ_BUILD_ROOT=`pwd -W 2>/dev/null || pwd -P`
DIST="$MOZ_BUILD_ROOT/dist"


  if test -z "$MC_OFFICIAL"; then
    DEVELOPER_OPTIONS=1
  fi
  # Check whether --enable-release or --disable-release was given.
if test "${enable_release+set}" = set; then
  enableval="$enable_release"
  if test "$enableval" = "yes"; then
    DEVELOPER_OPTIONS=
  elif test "$enableval" = "no"; then
    DEVELOPER_OPTIONS=1
  else
    { echo "configure: error: Option, release, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, release, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -z "$CROSS_COMPILE"; then
case "$target" in
*-mingw*)
    if test -z "$CPP"; then CPP="$CC -E -nologo"; fi
    if test -z "$CXXCPP"; then CXXCPP="$CXX -TP -E -nologo"; ac_cv_prog_CXXCPP="$CXXCPP"; fi
    if test -z "$AS"; then
        case "${target_cpu}" in
        i*86)
            AS=ml;
            ;;
        x86_64)
            AS=ml64;
            ;;
        esac
    fi
    if test -z "$MIDL"; then MIDL=midl; fi

    # need override this flag since we don't use $(LDFLAGS) for this.
    if test -z "$HOST_LDFLAGS" ; then
        HOST_LDFLAGS=" "
    fi
    ;;
esac
fi


case "$target" in
*-linux*)
    # Extract the first word of "objcopy", so it can be a program name with args.
set dummy objcopy; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1037: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_OBJCOPY'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$OBJCOPY" in
  /*)
  ac_cv_path_OBJCOPY="$OBJCOPY" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_OBJCOPY="$OBJCOPY" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_OBJCOPY="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
OBJCOPY="$ac_cv_path_OBJCOPY"
if test -n "$OBJCOPY"; then
  echo "$ac_t""$OBJCOPY" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

    ;;
esac






AR_FLAGS='crs $@'

if test "$COMPILE_ENVIRONMENT"; then

if test "$target" != "$host"; then
    
echo "cross compiling from $host to $target"

if test -z "$HOST_AR_FLAGS"; then
    HOST_AR_FLAGS="$AR_FLAGS"
fi
for ac_prog in $HOST_RANLIB ranlib
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1093: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_HOST_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$HOST_RANLIB"; then
  ac_cv_prog_HOST_RANLIB="$HOST_RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy=":"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_HOST_RANLIB="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
HOST_RANLIB="$ac_cv_prog_HOST_RANLIB"
if test -n "$HOST_RANLIB"; then
  echo "$ac_t""$HOST_RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$HOST_RANLIB" && break
done
test -n "$HOST_RANLIB" || HOST_RANLIB="ranlib"

for ac_prog in $HOST_AR ar
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1128: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_HOST_AR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$HOST_AR"; then
  ac_cv_prog_HOST_AR="$HOST_AR" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy=":"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_HOST_AR="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
HOST_AR="$ac_cv_prog_HOST_AR"
if test -n "$HOST_AR"; then
  echo "$ac_t""$HOST_AR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$HOST_AR" && break
done
test -n "$HOST_AR" || HOST_AR="ar"


_SAVE_PATH=$PATH
case "${TOOLCHAIN_PREFIX}" in
/*)
    PATH="/:$PATH"
    ;;
esac
# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1168: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1198: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1249: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; echo "configure: error: no acceptable cc found in \$PATH" 1>&5; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1281: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat > conftest.$ac_ext << EOF

#line 1292 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:1297: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&5; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1323: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1328: checking whether we are using GNU C" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1337: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1356: checking whether ${CC-cc} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1392: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX="gcc"


echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1424: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

cat > conftest.$ac_ext << EOF

#line 1435 "configure"
#include "confdefs.h"

int main(){return(0);}
EOF
if { (eval echo configure:1440: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cxx_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cxx_cross=no
  else
    ac_cv_prog_cxx_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cxx_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
if test $ac_cv_prog_cxx_works = no; then
  { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&5; exit 1; }
fi
echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1466: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
echo "configure:1471: checking whether we are using GNU C++" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.C <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:1480: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gxx=yes
else
  ac_cv_prog_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_gxx" 1>&6

if test $ac_cv_prog_gxx = yes; then
  GXX=yes
else
  GXX=
fi

ac_test_CXXFLAGS="${CXXFLAGS+set}"
ac_save_CXXFLAGS="$CXXFLAGS"
CXXFLAGS=
echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
echo "configure:1499: checking whether ${CXX-g++} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.cc
if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
  ac_cv_prog_cxx_g=yes
else
  ac_cv_prog_cxx_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
if test "$ac_test_CXXFLAGS" = set; then
  CXXFLAGS="$ac_save_CXXFLAGS"
elif test $ac_cv_prog_cxx_g = yes; then
  if test "$GXX" = yes; then
    CXXFLAGS="-g -O2"
  else
    CXXFLAGS="-g"
  fi
else
  if test "$GXX" = yes; then
    CXXFLAGS="-O2"
  else
    CXXFLAGS=
  fi
fi


for ac_prog in "${TOOLCHAIN_PREFIX}ranlib"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1536: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$RANLIB" && break
done
test -n "$RANLIB" || RANLIB=":"

for ac_prog in "${TOOLCHAIN_PREFIX}ar"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1571: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AR"; then
  ac_cv_prog_AR="$AR" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AR="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AR="$ac_cv_prog_AR"
if test -n "$AR"; then
  echo "$ac_t""$AR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AR" && break
done
test -n "$AR" || AR=":"

for ac_prog in "${TOOLCHAIN_PREFIX}as"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1606: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AS'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AS"; then
  ac_cv_prog_AS="$AS" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AS="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AS="$ac_cv_prog_AS"
if test -n "$AS"; then
  echo "$ac_t""$AS" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AS" && break
done
test -n "$AS" || AS=":"

for ac_prog in "${TOOLCHAIN_PREFIX}ld"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1641: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LD"; then
  ac_cv_prog_LD="$LD" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LD="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LD="$ac_cv_prog_LD"
if test -n "$LD"; then
  echo "$ac_t""$LD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$LD" && break
done
test -n "$LD" || LD=":"

for ac_prog in "${TOOLCHAIN_PREFIX}lipo"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1676: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LIPO'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LIPO"; then
  ac_cv_prog_LIPO="$LIPO" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LIPO="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LIPO="$ac_cv_prog_LIPO"
if test -n "$LIPO"; then
  echo "$ac_t""$LIPO" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$LIPO" && break
done
test -n "$LIPO" || LIPO=":"

for ac_prog in "${TOOLCHAIN_PREFIX}strip"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1711: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$STRIP"; then
  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_STRIP="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
STRIP="$ac_cv_prog_STRIP"
if test -n "$STRIP"; then
  echo "$ac_t""$STRIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$STRIP" && break
done
test -n "$STRIP" || STRIP=":"

for ac_prog in "${TOOLCHAIN_PREFIX}windres"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1746: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$WINDRES"; then
  ac_cv_prog_WINDRES="$WINDRES" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_WINDRES="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
WINDRES="$ac_cv_prog_WINDRES"
if test -n "$WINDRES"; then
  echo "$ac_t""$WINDRES" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$WINDRES" && break
done
test -n "$WINDRES" || WINDRES=":"

for ac_prog in "${TOOLCHAIN_PREFIX}otool"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1781: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_OTOOL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$OTOOL"; then
  ac_cv_prog_OTOOL="$OTOOL" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_OTOOL="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
OTOOL="$ac_cv_prog_OTOOL"
if test -n "$OTOOL"; then
  echo "$ac_t""$OTOOL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$OTOOL" && break
done
test -n "$OTOOL" || OTOOL=":"

for ac_prog in "${TOOLCHAIN_PREFIX}objcopy"
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1816: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$OBJCOPY"; then
  ac_cv_prog_OBJCOPY="$OBJCOPY" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_OBJCOPY="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
OBJCOPY="$ac_cv_prog_OBJCOPY"
if test -n "$OBJCOPY"; then
  echo "$ac_t""$OBJCOPY" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$OBJCOPY" && break
done
test -n "$OBJCOPY" || OBJCOPY=":"

PATH=$_SAVE_PATH

else
    # Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1852: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1882: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1933: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; echo "configure: error: no acceptable cc found in \$PATH" 1>&5; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1965: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat > conftest.$ac_ext << EOF

#line 1976 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:1981: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&5; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:2007: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:2012: checking whether we are using GNU C" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2021: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:2040: checking whether ${CC-cc} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

    case "$target" in
    *-mingw*)
      # Work around the conftest.exe access problem on Windows
      sleep 2
    esac
    for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2081: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX="gcc"


echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:2113: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

cat > conftest.$ac_ext << EOF

#line 2124 "configure"
#include "confdefs.h"

int main(){return(0);}
EOF
if { (eval echo configure:2129: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cxx_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cxx_cross=no
  else
    ac_cv_prog_cxx_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cxx_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
if test $ac_cv_prog_cxx_works = no; then
  { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&5; exit 1; }
fi
echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:2155: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
echo "configure:2160: checking whether we are using GNU C++" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.C <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:2169: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gxx=yes
else
  ac_cv_prog_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_gxx" 1>&6

if test $ac_cv_prog_gxx = yes; then
  GXX=yes
else
  GXX=
fi

ac_test_CXXFLAGS="${CXXFLAGS+set}"
ac_save_CXXFLAGS="$CXXFLAGS"
CXXFLAGS=
echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
echo "configure:2188: checking whether ${CXX-g++} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.cc
if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
  ac_cv_prog_cxx_g=yes
else
  ac_cv_prog_cxx_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
if test "$ac_test_CXXFLAGS" = set; then
  CXXFLAGS="$ac_save_CXXFLAGS"
elif test $ac_cv_prog_cxx_g = yes; then
  if test "$GXX" = yes; then
    CXXFLAGS="-g -O2"
  else
    CXXFLAGS="-g"
  fi
else
  if test "$GXX" = yes; then
    CXXFLAGS="-O2"
  else
    CXXFLAGS=
  fi
fi

    # Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2222: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

      for ac_prog in $AS as
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2254: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_AS'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$AS" in
  /*)
  ac_cv_path_AS="$AS" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_AS="$AS" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_AS="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
AS="$ac_cv_path_AS"
if test -n "$AS"; then
  echo "$ac_t""$AS" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AS" && break
done
test -n "$AS" || AS="$CC"

  if test "$msyshost"; then
    case "$AS" in
    /*)
      tmp_DIRNAME=`dirname "$AS"`
      tmp_BASENAME=`basename "$AS"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      AS="$tmp_PWD/$tmp_BASENAME"
      if test -e "$AS.exe"; then
        AS="$AS.exe"
      fi
    esac
  fi

    for ac_prog in ar
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2308: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AR"; then
  ac_cv_prog_AR="$AR" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AR="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AR="$ac_cv_prog_AR"
if test -n "$AR"; then
  echo "$ac_t""$AR" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AR" && break
done
test -n "$AR" || AR=":"

    for ac_prog in ld
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2343: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LD"; then
  ac_cv_prog_LD="$LD" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LD="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LD="$ac_cv_prog_LD"
if test -n "$LD"; then
  echo "$ac_t""$LD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$LD" && break
done
test -n "$LD" || LD=":"

    for ac_prog in strip
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2378: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$STRIP"; then
  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_STRIP="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
STRIP="$ac_cv_prog_STRIP"
if test -n "$STRIP"; then
  echo "$ac_t""$STRIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$STRIP" && break
done
test -n "$STRIP" || STRIP=":"

    for ac_prog in windres
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2413: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$WINDRES"; then
  ac_cv_prog_WINDRES="$WINDRES" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_WINDRES="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
WINDRES="$ac_cv_prog_WINDRES"
if test -n "$WINDRES"; then
  echo "$ac_t""$WINDRES" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$WINDRES" && break
done
test -n "$WINDRES" || WINDRES=":"

    for ac_prog in otool
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2448: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_OTOOL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$OTOOL"; then
  ac_cv_prog_OTOOL="$OTOOL" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_OTOOL="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
OTOOL="$ac_cv_prog_OTOOL"
if test -n "$OTOOL"; then
  echo "$ac_t""$OTOOL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$OTOOL" && break
done
test -n "$OTOOL" || OTOOL=":"

    if test -z "$HOST_RANLIB"; then
        HOST_RANLIB="$RANLIB"
    fi
    if test -z "$HOST_AR"; then
        HOST_AR="$AR"
    fi
    if test -z "$HOST_AR_FLAGS"; then
        HOST_AR_FLAGS="$AR_FLAGS"
    fi
fi

if test -n "$MOZ_WINCONSOLE"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WINCONSOLE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WINCONSOLE 1
EOF

fi


GNU_AS=
GNU_LD=

GNU_CC=
GNU_CXX=
if test "$CC_TYPE" = "gcc"; then
    GNU_CC=1
    GNU_CXX=1
fi

if test "`echo | $AS -o conftest.out -v 2>&1 | grep -c GNU`" != "0"; then
    GNU_AS=1
fi
rm -f conftest.out
if test "`echo | $LD -v 2>&1 | grep -c GNU`" != "0"; then
    GNU_LD=1
fi

CLANG_CC=
CLANG_CXX=
CLANG_CL=
if test "$CC_TYPE" = "clang"; then
    GNU_CC=1
    GNU_CXX=1
    CLANG_CC=1
    CLANG_CXX=1
fi
if test "$CC_TYPE" = "clang-cl"; then
    CLANG_CL=1
fi

if test "$GNU_CC"; then
    if `$CC -print-prog-name=ld` -v 2>&1 | grep -c GNU >/dev/null; then
        GCC_USE_GNU_LD=1
    fi
fi






WINVER=601

case "$target" in
*-mingw*)
    if test "$GCC" != "yes"; then
        # Check to see if we are really running in a msvc environemnt
        _WIN32_MSVC=1
        for ac_prog in midl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2554: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_MIDL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$MIDL"; then
  ac_cv_prog_MIDL="$MIDL" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_MIDL="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
MIDL="$ac_cv_prog_MIDL"
if test -n "$MIDL"; then
  echo "$ac_t""$MIDL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$MIDL" && break
done


        # Make sure compilers are valid
        CFLAGS="$CFLAGS -TC -nologo"
        CXXFLAGS="$CXXFLAGS -TP -nologo"
        
        ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        cat > conftest.$ac_ext <<EOF
#line 2596 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
 printf("Hello World\n"); 
; return 0; }
EOF
if { (eval echo configure:2603: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: \$(CC) test failed.  You must have MS VC++ in your path to build." 1>&2; echo "configure: error: \$(CC) test failed.  You must have MS VC++ in your path to build." 1>&5; exit 1; } 
fi
rm -f conftest*

        ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

        cat > conftest.$ac_ext <<EOF
#line 2621 "configure"
#include "confdefs.h"
#include <new.h>
int main() {
 unsigned *test = new unsigned(42); 
; return 0; }
EOF
if { (eval echo configure:2628: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: \$(CXX) test failed.  You must have MS VC++ in your path to build." 1>&2; echo "configure: error: \$(CXX) test failed.  You must have MS VC++ in your path to build." 1>&5; exit 1; } 
fi
rm -f conftest*
        ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


        
        _MSVC_VER_FILTER='s|.*[^!-~]([0-9]+\.[0-9]+\.[0-9]+(\.[0-9]+)?).*|\1|p'
        

        _MSC_VER=`echo ${CC_VERSION} | cut -c 1-2,4-5`

        cat >> confdefs.pytmp <<\EOF
    (''' _CRT_SECURE_NO_WARNINGS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_SECURE_NO_WARNINGS 1
EOF

        cat >> confdefs.pytmp <<\EOF
    (''' _CRT_NONSTDC_NO_WARNINGS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CRT_NONSTDC_NO_WARNINGS 1
EOF

        cat >> confdefs.pytmp <<\EOF
    (''' _USE_MATH_DEFINES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _USE_MATH_DEFINES 1
EOF
 # Otherwise MSVC's math.h doesn't #define M_PI.

        case "$CC_VERSION" in
        19*)
            _CC_SUITE=14
            MSVS_VERSION=2015
            MSVC_C_RUNTIME_DLL=vcruntime140.dll
            MSVC_CXX_RUNTIME_DLL=msvcp140.dll

               ac_safe=`echo "dia2.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for dia2.h""... $ac_c" 1>&6
echo "configure:2682: checking for dia2.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 2687 "configure"
#include "confdefs.h"

#include <dia2.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:2695: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    MSVC_HAS_DIA_SDK=1
  else
    echo "$ac_t""no" 1>&6
    
  fi

            if test -n "$MSVC_HAS_DIA_SDK"; then
                cat >> confdefs.pytmp <<\EOF
    (''' MSVC_HAS_DIA_SDK ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MSVC_HAS_DIA_SDK 1
EOF

            fi

            # C5026: move constructor was implicitly defined as deleted
            CXXFLAGS="$CXXFLAGS -wd5026"

            # C5027: move assignment operator was implicitly defined as deleted
            CXXFLAGS="$CXXFLAGS -wd5027"

            # -Zc:sizedDealloc- disables C++14 global sized deallocation (see bug 1160146)
            CXXFLAGS="$CXXFLAGS -Zc:sizedDealloc-"
            
            # C4752: We explicitly use AVX instructions in only some libs, not global
            # This is a pointless "helpful warning" to use /arch:AVX which we don't want.
            CFLAGS="$CFLAGS -wd4752"
            CXXFLAGS="$CXXFLAGS -wd4752"
            
            # https://connect.microsoft.com/VisualStudio/feedback/details/888527/warnings-on-dbghelp-h
            # for dbghelp.h, imagehlp.h, and shobj.h
            # C4091: 'typedef ': ignored on left of '' when no variable is declared
            CFLAGS="$CFLAGS -wd4091"
            CXXFLAGS="$CXXFLAGS -wd4091"

            # This is intended as a temporary hack to support building with VS2015.
            # 'noexcept' used with no exception handling mode specified;
            # termination on exception is not guaranteed. Specify /EHsc
            CXXFLAGS="$CXXFLAGS -wd4577"

            if test -n "$WIN_UCRT_REDIST_DIR"; then
              if test ! -d "$WIN_UCRT_REDIST_DIR"; then
                { echo "configure: error: Invalid Windows UCRT Redist directory: ${WIN_UCRT_REDIST_DIR}" 1>&2; echo "configure: error: Invalid Windows UCRT Redist directory: ${WIN_UCRT_REDIST_DIR}" 1>&5; exit 1; }
              fi
              WIN_UCRT_REDIST_DIR=`cd "$WIN_UCRT_REDIST_DIR" && pwd -W`
            fi
            ;;
        esac
        
        
        
        

        cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SEH_EXCEPTIONS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SEH_EXCEPTIONS 1
EOF


        if test -n "$WIN32_REDIST_DIR"; then
          if test ! -d "$WIN32_REDIST_DIR"; then
            { echo "configure: error: Invalid Win32 Redist directory: ${WIN32_REDIST_DIR}" 1>&2; echo "configure: error: Invalid Win32 Redist directory: ${WIN32_REDIST_DIR}" 1>&5; exit 1; }
          fi
          WIN32_REDIST_DIR=`cd "$WIN32_REDIST_DIR" && pwd -W`
        fi

        # Check linker version
        _LD_FULL_VERSION=`"${LD}" -v 2>&1 | sed -nre "$_MSVC_VER_FILTER"`
        _LD_MAJOR_VERSION=`echo ${_LD_FULL_VERSION} | $AWK -F\. '{ print $1 }'`
        if test "$_LD_MAJOR_VERSION" != "$_CC_SUITE"; then
            { echo "configure: error: The linker major version, $_LD_FULL_VERSION,  does not match the compiler suite version, $_CC_SUITE." 1>&2; echo "configure: error: The linker major version, $_LD_FULL_VERSION,  does not match the compiler suite version, $_CC_SUITE." 1>&5; exit 1; }
        fi

        INCREMENTAL_LINKER=1

        # Set midl environment
        case "$target" in
        i*86-*)
            MIDL_FLAGS="${MIDL_FLAGS} -env win32"
            ;;
        x86_64-*)
            MIDL_FLAGS="${MIDL_FLAGS} -env x64"
            ;;
        esac

        unset _MSVC_VER_FILTER

        echo $ac_n "checking for overridable _RAISE""... $ac_c" 1>&6
echo "configure:2800: checking for overridable _RAISE" >&5
if eval "test \"`echo '$''{'ac_cv_have__RAISE'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
                
                ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

                _SAVE_CXXFLAGS="$CXXFLAGS"
                CXXFLAGS="${CXXFLAGS} -D_HAS_EXCEPTIONS=0"
                cat > conftest.$ac_ext <<EOF
#line 2816 "configure"
#include "confdefs.h"
#include <xstddef>
                                #undef _RAISE
                                #define _RAISE(x) externallyDefinedFunction((x).what())
                                #include <vector>
                               
int main() {
std::vector<int> v; return v.at(1);
; return 0; }
EOF
if { (eval echo configure:2827: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_have__RAISE="no"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have__RAISE="yes"
fi
rm -f conftest*
                CXXFLAGS="$_SAVE_CXXFLAGS"
                ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

            
fi

echo "$ac_t""$ac_cv_have__RAISE" 1>&6
        if test "$ac_cv_have__RAISE" = "yes"; then
            WRAP_STL_INCLUDES=1
            MOZ_MSVC_STL_WRAP_RAISE=1
            cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MSVC_STL_WRAP_RAISE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MSVC_STL_WRAP_RAISE 1
EOF

        else
            { echo "configure: error: Gecko exception wrapping doesn't understand your your MSVC/SDK.  Please file a bug describing this error and your build configuration." 1>&2; echo "configure: error: Gecko exception wrapping doesn't understand your your MSVC/SDK.  Please file a bug describing this error and your build configuration." 1>&5; exit 1; }
        fi

        if test "$WRAP_STL_INCLUDES" = "1"; then
            STL_FLAGS="-I${DIST}/stl_wrappers"
        fi
        CFLAGS="$CFLAGS -D_HAS_EXCEPTIONS=0"
        CXXFLAGS="$CXXFLAGS -D_HAS_EXCEPTIONS=0"
    else
        # Check w32api version
        _W32API_MAJOR_VERSION=`echo $W32API_VERSION | $AWK -F\. '{ print $1 }'`
        _W32API_MINOR_VERSION=`echo $W32API_VERSION | $AWK -F\. '{ print $2 }'`
        echo $ac_n "checking for w32api version >= $W32API_VERSION""... $ac_c" 1>&6
echo "configure:2873: checking for w32api version >= $W32API_VERSION" >&5
        cat > conftest.$ac_ext <<EOF
#line 2875 "configure"
#include "confdefs.h"
#include <w32api.h>
int main() {
#if (__W32API_MAJOR_VERSION < $_W32API_MAJOR_VERSION) || \
                (__W32API_MAJOR_VERSION == $_W32API_MAJOR_VERSION && \
                 __W32API_MINOR_VERSION < $_W32API_MINOR_VERSION)
                #error "test failed."
            #endif
            
; return 0; }
EOF
if { (eval echo configure:2887: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
   res=yes 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
   res=no 
fi
rm -f conftest*
        echo "$ac_t""$res" 1>&6
        if test "$res" != "yes"; then
            { echo "configure: error: w32api version $W32API_VERSION or higher required." 1>&2; echo "configure: error: w32api version $W32API_VERSION or higher required." 1>&5; exit 1; }
        fi
        # Check windres version
        echo $ac_n "checking for windres version >= $WINDRES_VERSION""... $ac_c" 1>&6
echo "configure:2903: checking for windres version >= $WINDRES_VERSION" >&5
        _WINDRES_VERSION=`${WINDRES} --version 2>&1 | grep -i windres 2>/dev/null | $AWK '{ print $3 }'`
        echo "$ac_t""$_WINDRES_VERSION" 1>&6
        _WINDRES_MAJOR_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $1 }'`
        _WINDRES_MINOR_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $2 }'`
        _WINDRES_RELEASE_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $3 }'`
        WINDRES_MAJOR_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $1 }'`
        WINDRES_MINOR_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $2 }'`
        WINDRES_RELEASE_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $3 }'`
        if test "$_WINDRES_MAJOR_VERSION" -lt "$WINDRES_MAJOR_VERSION" -o \
                "$_WINDRES_MAJOR_VERSION" -eq "$WINDRES_MAJOR_VERSION" -a \
                "$_WINDRES_MINOR_VERSION" -lt "$WINDRES_MINOR_VERSION" -o \
                "$_WINDRES_MAJOR_VERSION" -eq "$WINDRES_MAJOR_VERSION" -a \
                "$_WINDRES_MINOR_VERSION" -eq "$WINDRES_MINOR_VERSION" -a \
                "$_WINDRES_RELEASE_VERSION" -lt "$WINDRES_RELEASE_VERSION"
        then
            { echo "configure: error: windres version $WINDRES_VERSION or higher is required to build." 1>&2; echo "configure: error: windres version $WINDRES_VERSION or higher is required to build." 1>&5; exit 1; }
        fi

        for ac_prog in $target-widl widl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2927: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_MIDL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$MIDL"; then
  ac_cv_prog_MIDL="$MIDL" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_MIDL="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
MIDL="$ac_cv_prog_MIDL"
if test -n "$MIDL"; then
  echo "$ac_t""$MIDL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$MIDL" && break
done

        if test -n "$MIDL"; then
            case "$target" in
            i*86-*)
                MIDL_FLAGS="$MIDL_FLAGS --win32 -m32"
                ;;
            x86_64-*)
                MIDL_FLAGS="$MIDL_FLAGS --win64 -m64"
                ;;
            esac
        fi

        # strsafe.h on mingw uses macros for function deprecation that pollutes namespace
        # causing problems with local implementations with the same name.
        cat >> confdefs.pytmp <<\EOF
    (''' STRSAFE_NO_DEPRECATE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define STRSAFE_NO_DEPRECATE 1
EOF

    fi # !GNU_CC

    cat >> confdefs.pytmp <<EOF
    (''' WINVER ''', r''' 0x$WINVER ''')
EOF
cat >> confdefs.h <<EOF
#define WINVER 0x$WINVER
EOF

    cat >> confdefs.pytmp <<EOF
    (''' _WIN32_WINNT ''', r''' 0x$WINVER ''')
EOF
cat >> confdefs.h <<EOF
#define _WIN32_WINNT 0x$WINVER
EOF

    # Require OS features provided by IE 6.0 SP2 (XP SP2)
    cat >> confdefs.pytmp <<EOF
    (''' _WIN32_IE ''', r''' 0x0603 ''')
EOF
cat >> confdefs.h <<EOF
#define _WIN32_IE 0x0603
EOF


    ;;
esac

if test -n "$_WIN32_MSVC"; then
    SKIP_PATH_CHECKS=1
    SKIP_COMPILER_CHECKS=1
    SKIP_LIBRARY_CHECKS=1

    # Since we're skipping compiler and library checks, hard-code
    # some facts here.
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_IO_H ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_IO_H 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ISATTY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ISATTY 1
EOF

fi

fi # COMPILE_ENVIRONMENT













if test "$COMPILE_ENVIRONMENT"; then




# Check whether --with-unify-dist or --without-unify-dist was given.
if test "${with_unify_dist+set}" = set; then
  withval="$with_unify_dist"
  UNIFY_DIST=$withval
fi

if test -n "$UNIVERSAL_BINARY"; then
    if test -z "$UNIFY_DIST"; then
        { echo "configure: error: You need to provide the --with-unify-dist=dir argument when performing a universal build" 1>&2; echo "configure: error: You need to provide the --with-unify-dist=dir argument when performing a universal build" 1>&5; exit 1; }
    fi
    case "$UNIFY_DIST" in
    /*)
        ;;
    *)
        UNIFY_DIST="${MOZ_BUILD_ROOT}/${UNIFY_DIST}"
        ;;
    esac
fi


MACOS_SDK_DIR=
# Check whether --with-macos-sdk or --without-macos-sdk was given.
if test "${with_macos_sdk+set}" = set; then
  withval="$with_macos_sdk"
  MACOS_SDK_DIR=$withval
fi


MACOS_PRIVATE_FRAMEWORKS_DIR_DEFAULTED=
# Check whether --with-macos-private-frameworks or --without-macos-private-frameworks was given.
if test "${with_macos_private_frameworks+set}" = set; then
  withval="$with_macos_private_frameworks"
  MACOS_PRIVATE_FRAMEWORKS_DIR=$withval
else
  MACOS_PRIVATE_FRAMEWORKS_DIR=/System/Library/PrivateFrameworks
    MACOS_PRIVATE_FRAMEWORKS_DEFAULTED=1
fi


if test -z "${MACOS_PRIVATE_FRAMEWORKS_DEFAULTED}"; then
  if test -z "$CROSS_COMPILE"; then
    echo "configure: warning: You should only be using --with-macos-private-frameworks when cross-compiling." 1>&2
  fi
  if test ! -d "$MACOS_PRIVATE_FRAMEWORKS_DIR"; then
    { echo "configure: error: PrivateFrameworks directory not found." 1>&2; echo "configure: error: PrivateFrameworks directory not found." 1>&5; exit 1; }
  fi
fi




if test "$MACOS_SDK_DIR"; then
      
  if test ! -d "$MACOS_SDK_DIR"; then
    { echo "configure: error: SDK not found.  When using --with-macos-sdk, you must
specify a valid SDK.  SDKs are installed when the optional cross-development
tools are selected during the Xcode/Developer Tools installation." 1>&2; echo "configure: error: SDK not found.  When using --with-macos-sdk, you must
specify a valid SDK.  SDKs are installed when the optional cross-development
tools are selected during the Xcode/Developer Tools installation." 1>&5; exit 1; }
  fi

  CFLAGS="$CFLAGS -isysroot ${MACOS_SDK_DIR}"
  CXXFLAGS="$CXXFLAGS -isysroot ${MACOS_SDK_DIR}"

    CPP="$CPP -isysroot ${MACOS_SDK_DIR}"
  CXXCPP="$CXXCPP -isysroot ${MACOS_SDK_DIR}"

  
  echo $ac_n "checking for valid compiler/Mac OS X SDK combination""... $ac_c" 1>&6
echo "configure:3115: checking for valid compiler/Mac OS X SDK combination" >&5
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

  cat > conftest.$ac_ext <<EOF
#line 3124 "configure"
#include "confdefs.h"
#include <new>
int main() {

; return 0; }
EOF
if { (eval echo configure:3131: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  result=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result=no
fi
rm -f conftest*
  ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

  echo "$ac_t""$result" 1>&6

  if test "$result" = "no" ; then
    { echo "configure: error: The selected compiler and Mac OS X SDK are incompatible." 1>&2; echo "configure: error: The selected compiler and Mac OS X SDK are incompatible." 1>&5; exit 1; }
  fi
fi



# If we find X, set shell vars x_includes and x_libraries to the
# paths, otherwise set no_x=yes.
# Uses ac_ vars as temps to allow command line to override cache and checks.
# --without-x overrides everything else, but does not touch the cache.
echo $ac_n "checking for X""... $ac_c" 1>&6
echo "configure:3162: checking for X" >&5

# Check whether --with-x or --without-x was given.
if test "${with_x+set}" = set; then
  withval="$with_x"
  :
fi

# $have_x is `yes', `no', `disabled', or empty when we do not yet know.
if test "x$with_x" = xno; then
  # The user explicitly disabled X.
  have_x=disabled
else
  if test "x$x_includes" != xNONE && test "x$x_libraries" != xNONE; then
    # Both variables are already set.
    have_x=yes
  else
if eval "test \"`echo '$''{'ac_cv_have_x'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # One or both of the vars are not set, and there is no cached value.
ac_x_includes=NO ac_x_libraries=NO
rm -fr conftestdir
if mkdir conftestdir; then
  cd conftestdir
  # Make sure to not put "make" in the Imakefile rules, since we grep it out.
  cat > Imakefile <<'EOF'
acfindx:
	@echo 'ac_im_incroot="${INCROOT}"; ac_im_usrlibdir="${USRLIBDIR}"; ac_im_libdir="${LIBDIR}"'
EOF
  if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
    # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
    eval `${MAKE-make} acfindx 2>/dev/null | grep -v make`
    # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
    for ac_extension in a so sl; do
      if test ! -f $ac_im_usrlibdir/libX11.$ac_extension &&
        test -f $ac_im_libdir/libX11.$ac_extension; then
        ac_im_usrlibdir=$ac_im_libdir; break
      fi
    done
    # Screen out bogus values from the imake configuration.  They are
    # bogus both because they are the default anyway, and because
    # using them would break gcc on systems where it needs fixed includes.
    case "$ac_im_incroot" in
	/usr/include) ;;
	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes="$ac_im_incroot" ;;
    esac
    case "$ac_im_usrlibdir" in
	/usr/lib | /lib) ;;
	*) test -d "$ac_im_usrlibdir" && ac_x_libraries="$ac_im_usrlibdir" ;;
    esac
  fi
  cd ..
  rm -fr conftestdir
fi

if test "$ac_x_includes" = NO; then
  # Guess where to find include files, by looking for this one X11 .h file.
  test -z "$x_direct_test_include" && x_direct_test_include=X11/Intrinsic.h

  # First, try using that file with no special directory specified.
cat > conftest.$ac_ext <<EOF
#line 3224 "configure"
#include "confdefs.h"
#include <$x_direct_test_include>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3229: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  # We can compile using X headers with no special include directory.
ac_x_includes=
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  # Look for the header file in a standard set of common directories.
# Check X11 before X11Rn because it is often a symlink to the current release.
  for ac_dir in               \
    /usr/X11/include          \
    /usr/X11R6/include        \
    /usr/X11R5/include        \
    /usr/X11R4/include        \
                              \
    /usr/include/X11          \
    /usr/include/X11R6        \
    /usr/include/X11R5        \
    /usr/include/X11R4        \
                              \
    /usr/local/X11/include    \
    /usr/local/X11R6/include  \
    /usr/local/X11R5/include  \
    /usr/local/X11R4/include  \
                              \
    /usr/local/include/X11    \
    /usr/local/include/X11R6  \
    /usr/local/include/X11R5  \
    /usr/local/include/X11R4  \
                              \
    /usr/X386/include         \
    /usr/x386/include         \
    /usr/XFree86/include/X11  \
                              \
    /usr/include              \
    /usr/local/include        \
    /usr/unsupported/include  \
    /usr/athena/include       \
    /usr/local/x11r5/include  \
    /usr/lpp/Xamples/include  \
                              \
    /usr/openwin/include      \
    /usr/openwin/share/include \
    ; \
  do
    if test -r "$ac_dir/$x_direct_test_include"; then
      ac_x_includes=$ac_dir
      break
    fi
  done
fi
rm -f conftest*
fi # $ac_x_includes = NO

if test "$ac_x_libraries" = NO; then
  # Check for the libraries.

  test -z "$x_direct_test_library" && x_direct_test_library=Xt
  test -z "$x_direct_test_function" && x_direct_test_function=XtMalloc

  # See if we find them without any special options.
  # Don't add to $LIBS permanently.
  ac_save_LIBS="$LIBS"
  LIBS="-l$x_direct_test_library $LIBS"
cat > conftest.$ac_ext <<EOF
#line 3298 "configure"
#include "confdefs.h"

int main() {
${x_direct_test_function}()
; return 0; }
EOF
if { (eval echo configure:3305: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# We can link X programs with no special library path.
ac_x_libraries=
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# First see if replacing the include by lib works.
# Check X11 before X11Rn because it is often a symlink to the current release.
for ac_dir in `echo "$ac_x_includes" | sed s/include/lib/` \
    /usr/X11/lib          \
    /usr/X11R6/lib        \
    /usr/X11R5/lib        \
    /usr/X11R4/lib        \
                          \
    /usr/lib/X11          \
    /usr/lib/X11R6        \
    /usr/lib/X11R5        \
    /usr/lib/X11R4        \
                          \
    /usr/local/X11/lib    \
    /usr/local/X11R6/lib  \
    /usr/local/X11R5/lib  \
    /usr/local/X11R4/lib  \
                          \
    /usr/local/lib/X11    \
    /usr/local/lib/X11R6  \
    /usr/local/lib/X11R5  \
    /usr/local/lib/X11R4  \
                          \
    /usr/X386/lib         \
    /usr/x386/lib         \
    /usr/XFree86/lib/X11  \
                          \
    /usr/lib              \
    /usr/local/lib        \
    /usr/unsupported/lib  \
    /usr/athena/lib       \
    /usr/local/x11r5/lib  \
    /usr/lpp/Xamples/lib  \
    /lib/usr/lib/X11	  \
                          \
    /usr/openwin/lib      \
    /usr/openwin/share/lib \
    ; \
do
  for ac_extension in a so sl; do
    if test -r $ac_dir/lib${x_direct_test_library}.$ac_extension; then
      ac_x_libraries=$ac_dir
      break 2
    fi
  done
done
fi
rm -f conftest*
fi # $ac_x_libraries = NO

if test "$ac_x_includes" = NO || test "$ac_x_libraries" = NO; then
  # Didn't find X anywhere.  Cache the known absence of X.
  ac_cv_have_x="have_x=no"
else
  # Record where we found X for the cache.
  ac_cv_have_x="have_x=yes \
	        ac_x_includes=$ac_x_includes ac_x_libraries=$ac_x_libraries"
fi
fi
  fi
  eval "$ac_cv_have_x"
fi # $with_x != no

if test "$have_x" != yes; then
  echo "$ac_t""$have_x" 1>&6
  no_x=yes
else
  # If each of the values was on the command line, it overrides each guess.
  test "x$x_includes" = xNONE && x_includes=$ac_x_includes
  test "x$x_libraries" = xNONE && x_libraries=$ac_x_libraries
  # Update the cache value to reflect the command line values.
  ac_cv_have_x="have_x=yes \
		ac_x_includes=$x_includes ac_x_libraries=$x_libraries"
  echo "$ac_t""libraries $x_libraries, headers $x_includes" 1>&6
fi

if test "$no_x" = yes; then
  # Not all programs may use this symbol, but it does not hurt to define it.
  cat >> confdefs.pytmp <<\EOF
    (''' X_DISPLAY_MISSING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define X_DISPLAY_MISSING 1
EOF

  X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
else
  if test -n "$x_includes"; then
    X_CFLAGS="$X_CFLAGS -I$x_includes"
  fi

  # It would also be nice to do this for all -L options, not just this one.
  if test -n "$x_libraries"; then
    X_LIBS="$X_LIBS -L$x_libraries"
    # For Solaris; some versions of Sun CC require a space after -R and
    # others require no space.  Words are not sufficient . . . .
    case "`(uname -sr) 2>/dev/null`" in
    "SunOS 5"*)
      echo $ac_n "checking whether -R must be followed by a space""... $ac_c" 1>&6
echo "configure:3414: checking whether -R must be followed by a space" >&5
      ac_xsave_LIBS="$LIBS"; LIBS="$LIBS -R$x_libraries"
      cat > conftest.$ac_ext <<EOF
#line 3417 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:3424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_R_nospace=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_nospace=no
fi
rm -f conftest*
      if test $ac_R_nospace = yes; then
	echo "$ac_t""no" 1>&6
	X_LIBS="$X_LIBS -R$x_libraries"
      else
	LIBS="$ac_xsave_LIBS -R $x_libraries"
	cat > conftest.$ac_ext <<EOF
#line 3440 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:3447: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_R_space=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_space=no
fi
rm -f conftest*
	if test $ac_R_space = yes; then
	  echo "$ac_t""yes" 1>&6
	  X_LIBS="$X_LIBS -R $x_libraries"
	else
	  echo "$ac_t""neither works" 1>&6
	fi
      fi
      LIBS="$ac_xsave_LIBS"
    esac
  fi

  # Check for system-dependent libraries X programs must link with.
  # Do this before checking for the system-independent R6 libraries
  # (-lICE), since we may need -lsocket or whatever for X linking.

  if test "$ISC" = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl_s -linet"
  else
    # Martyn.Johnson@cl.cam.ac.uk says this is needed for Ultrix, if the X
    # libraries were built with DECnet support.  And karl@cs.umb.edu says
    # the Alpha needs dnet_stub (dnet does not exist).
    echo $ac_n "checking for dnet_ntoa in -ldnet""... $ac_c" 1>&6
echo "configure:3479: checking for dnet_ntoa in -ldnet" >&5
ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldnet  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 3487 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:3498: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_lib_dnet_dnet_ntoa = no; then
      echo $ac_n "checking for dnet_ntoa in -ldnet_stub""... $ac_c" 1>&6
echo "configure:3520: checking for dnet_ntoa in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldnet_stub  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 3528 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:3539: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
else
  echo "$ac_t""no" 1>&6
fi

    fi

    # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
    # to get the SysV transport functions.
    # chad@anasazi.com says the Pyramis MIS-ES running DC/OSx (SVR4)
    # needs -lnsl.
    # The nsl library prevents programs from opening the X display
    # on Irix 5.2, according to dickey@clark.net.
    echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
echo "configure:3568: checking for gethostbyname" >&5
if eval "test \"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 3573 "configure"
#define gethostbyname innocuous_gethostbyname
#include "confdefs.h"
#undef gethostbyname
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gethostbyname(); below.  */
#define gethostbyname innocuous_gethostbyname
#include <assert.h>
#undef gethostbyname
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gethostbyname) || defined (__stub___gethostbyname)
choke me
#else
gethostbyname();
#endif

; return 0; }
EOF
if { (eval echo configure:3600: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'gethostbyname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_gethostbyname = no; then
      echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
echo "configure:3621: checking for gethostbyname in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 3629 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {
gethostbyname()
; return 0; }
EOF
if { (eval echo configure:3640: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
else
  echo "$ac_t""no" 1>&6
fi

    fi

    # lieder@skyler.mavd.honeywell.com says without -lsocket,
    # socket/setsockopt and other routines are undefined under SCO ODT
    # 2.0.  But -lsocket is broken on IRIX 5.2 (and is not necessary
    # on later versions), says simon@lia.di.epfl.ch: it contains
    # gethostby* variants that don't use the nameserver (or something).
    # -lsocket must be given before -lnsl if both are needed.
    # We assume that if connect needs -lnsl, so does gethostbyname.
    echo $ac_n "checking for connect""... $ac_c" 1>&6
echo "configure:3670: checking for connect" >&5
if eval "test \"`echo '$''{'ac_cv_func_connect'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 3675 "configure"
#define connect innocuous_connect
#include "confdefs.h"
#undef connect
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char connect(); below.  */
#define connect innocuous_connect
#include <assert.h>
#undef connect
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_connect) || defined (__stub___connect)
choke me
#else
connect();
#endif

; return 0; }
EOF
if { (eval echo configure:3702: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_connect=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_connect=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'connect`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_connect = no; then
      echo $ac_n "checking for connect in -lsocket""... $ac_c" 1>&6
echo "configure:3723: checking for connect in -lsocket" >&5
ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 3731 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {
connect()
; return 0; }
EOF
if { (eval echo configure:3742: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
else
  echo "$ac_t""no" 1>&6
fi

    fi

    # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.
    echo $ac_n "checking for remove""... $ac_c" 1>&6
echo "configure:3766: checking for remove" >&5
if eval "test \"`echo '$''{'ac_cv_func_remove'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 3771 "configure"
#define remove innocuous_remove
#include "confdefs.h"
#undef remove
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char remove(); below.  */
#define remove innocuous_remove
#include <assert.h>
#undef remove
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_remove) || defined (__stub___remove)
choke me
#else
remove();
#endif

; return 0; }
EOF
if { (eval echo configure:3798: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_remove=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_remove=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'remove`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_remove = no; then
      echo $ac_n "checking for remove in -lposix""... $ac_c" 1>&6
echo "configure:3819: checking for remove in -lposix" >&5
ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lposix  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 3827 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {
remove()
; return 0; }
EOF
if { (eval echo configure:3838: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
else
  echo "$ac_t""no" 1>&6
fi

    fi

    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
    echo $ac_n "checking for shmat""... $ac_c" 1>&6
echo "configure:3862: checking for shmat" >&5
if eval "test \"`echo '$''{'ac_cv_func_shmat'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 3867 "configure"
#define shmat innocuous_shmat
#include "confdefs.h"
#undef shmat
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char shmat(); below.  */
#define shmat innocuous_shmat
#include <assert.h>
#undef shmat
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmat) || defined (__stub___shmat)
choke me
#else
shmat();
#endif

; return 0; }
EOF
if { (eval echo configure:3894: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_shmat=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_shmat=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'shmat`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_shmat = no; then
      echo $ac_n "checking for shmat in -lipc""... $ac_c" 1>&6
echo "configure:3915: checking for shmat in -lipc" >&5
ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lipc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 3923 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {
shmat()
; return 0; }
EOF
if { (eval echo configure:3934: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
else
  echo "$ac_t""no" 1>&6
fi

    fi
  fi

  # Check for libraries that X11R6 Xt/Xaw programs need.
  ac_save_LDFLAGS="$LDFLAGS"
  test -n "$x_libraries" && LDFLAGS="$LDFLAGS -L$x_libraries"
  # SM needs ICE to (dynamically) link under SunOS 4.x (so we have to
  # check for ICE first), but we must link in the order -lSM -lICE or
  # we get undefined symbols.  So assume we have SM if we have ICE.
  # These have to be linked with before -lX11, unlike the other
  # libraries we check for below, so use a different variable.
  #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
  echo $ac_n "checking for IceConnectionNumber in -lICE""... $ac_c" 1>&6
echo "configure:3967: checking for IceConnectionNumber in -lICE" >&5
ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lICE $X_EXTRA_LIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 3975 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char IceConnectionNumber();

int main() {
IceConnectionNumber()
; return 0; }
EOF
if { (eval echo configure:3986: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
else
  echo "$ac_t""no" 1>&6
fi

  LDFLAGS="$ac_save_LDFLAGS"

fi


XCFLAGS="$X_CFLAGS"

fi # COMPILE_ENVIRONMENT

AS_BIN=$AS
AR_EXTRACT='$(AR) x'
AS='$(CC)'
AS_DASH_C_FLAG='-c'
DLL_PREFIX=lib
LIB_PREFIX=lib
DLL_SUFFIX=.so
OBJ_SUFFIX=o
LIB_SUFFIX=a
IMPORT_LIB_SUFFIX=
DIRENT_INO=d_ino
MOZ_USER_DIR=".mozilla"

MOZ_FIX_LINK_PATHS="-Wl,-rpath-link,${DIST}/bin -Wl,-rpath-link,${prefix}/lib"

MOZ_FS_LAYOUT=unix

if test "$COMPILE_ENVIRONMENT"; then
    


MOZ_THUMB=toolchain-default
MOZ_THUMB_INTERWORK=toolchain-default
MOZ_FPU=toolchain-default
MOZ_FLOAT_ABI=toolchain-default
MOZ_SOFT_FLOAT=toolchain-default
MOZ_ALIGN=toolchain-default

# Check whether --with-arch or --without-arch was given.
if test "${with_arch+set}" = set; then
  withval="$with_arch"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-arch is not supported on non-GNU toolchains" 1>&2; echo "configure: error: --with-arch is not supported on non-GNU toolchains" 1>&5; exit 1; }
    fi
    MOZ_ARCH=$withval
fi


if test -z "$MOZ_ARCH"; then
        case "${CPU_ARCH}-${OS_TARGET}" in
    arm-Android)
        MOZ_THUMB=yes
        MOZ_ARCH=armv7-a
        MOZ_FPU=vfp
        MOZ_FLOAT_ABI=softfp
        MOZ_ALIGN=no
        ;;
    arm-Darwin)
        MOZ_ARCH=toolchain-default
        ;;
    esac
fi

if test "$MOZ_ARCH" = "armv6" -a "$OS_TARGET" = "Android"; then
   MOZ_FPU=vfp
   MOZ_FLOAT_ABI=softfp
fi

# Check whether --with-thumb or --without-thumb was given.
if test "${with_thumb+set}" = set; then
  withval="$with_thumb"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-thumb is not supported on non-GNU toolchains" 1>&2; echo "configure: error: --with-thumb is not supported on non-GNU toolchains" 1>&5; exit 1; }
    fi
    MOZ_THUMB=$withval
fi


# Check whether --with-thumb-interwork or --without-thumb-interwork was given.
if test "${with_thumb_interwork+set}" = set; then
  withval="$with_thumb_interwork"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-thumb-interwork is not supported on non-GNU toolchains" 1>&2; echo "configure: error: --with-thumb-interwork is not supported on non-GNU toolchains" 1>&5; exit 1; }
    fi
    MOZ_THUMB_INTERWORK=$withval
fi


# Check whether --with-fpu or --without-fpu was given.
if test "${with_fpu+set}" = set; then
  withval="$with_fpu"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-fpu is not supported on non-GNU toolchains" 1>&2; echo "configure: error: --with-fpu is not supported on non-GNU toolchains" 1>&5; exit 1; }
    fi
    MOZ_FPU=$withval
fi


# Check whether --with-float-abi or --without-float-abi was given.
if test "${with_float_abi+set}" = set; then
  withval="$with_float_abi"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-float-abi is not supported on non-GNU toolchains" 1>&2; echo "configure: error: --with-float-abi is not supported on non-GNU toolchains" 1>&5; exit 1; }
    fi
    MOZ_FLOAT_ABI=$withval
fi


# Check whether --with-soft-float or --without-soft-float was given.
if test "${with_soft_float+set}" = set; then
  withval="$with_soft_float"
  if test -z "$GNU_CC"; then
        { echo "configure: error: --with-soft-float is not supported on non-GNU toolchains" 1>&2; echo "configure: error: --with-soft-float is not supported on non-GNU toolchains" 1>&5; exit 1; }
    fi
    MOZ_SOFT_FLOAT=$withval
fi


case "$MOZ_ARCH" in
toolchain-default|"")
    arch_flag=""
    ;;
*)
    arch_flag="-march=$MOZ_ARCH"
    ;;
esac

case "$MOZ_THUMB" in
yes)
    MOZ_THUMB2=1
    thumb_flag="-mthumb"
    ;;
no)
    MOZ_THUMB2=
    thumb_flag="-marm"
    ;;
*)
    _SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$arch_flag"
    cat > conftest.$ac_ext <<EOF
#line 4145 "configure"
#include "confdefs.h"

int main() {
return sizeof(__thumb2__);
; return 0; }
EOF
if { (eval echo configure:4152: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_THUMB2=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  MOZ_THUMB2=
fi
rm -f conftest*
    CFLAGS="$_SAVE_CFLAGS"
    thumb_flag=""
    ;;
esac

if test "$MOZ_THUMB2" = 1; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_THUMB2 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_THUMB2 1
EOF

fi

case "$MOZ_THUMB_INTERWORK" in
yes)
    thumb_interwork_flag="-mthumb-interwork"
    ;;
no)
    thumb_interwork_flag="-mno-thumb-interwork"
    ;;
*) # toolchain-default
    thumb_interwork_flag=""
    ;;
esac

case "$MOZ_FPU" in
toolchain-default|"")
    fpu_flag=""
    ;;
*)
    fpu_flag="-mfpu=$MOZ_FPU"
    ;;
esac

case "$MOZ_FLOAT_ABI" in
toolchain-default|"")
    float_abi_flag=""
    ;;
*)
    float_abi_flag="-mfloat-abi=$MOZ_FLOAT_ABI"
    ;;
esac

case "$MOZ_SOFT_FLOAT" in
yes)
    soft_float_flag="-msoft-float"
    ;;
no)
    soft_float_flag="-mno-soft-float"
    ;;
*) # toolchain-default
    soft_float_flag=""
    ;;
esac

case "$MOZ_ALIGN" in
no)
    align_flag="-mno-unaligned-access"
    ;;
yes)
    align_flag="-munaligned-access"
    ;;
*)
    align_flag=""
    ;;
esac

if test -n "$align_flag"; then
  _SAVE_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS $align_flag"
  echo $ac_n "checking whether alignment flag ($align_flag) is supported""... $ac_c" 1>&6
echo "configure:4235: checking whether alignment flag ($align_flag) is supported" >&5
  cat > conftest.$ac_ext <<EOF
#line 4237 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4244: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  align_flag=""
fi
rm -f conftest*
  CFLAGS="$_SAVE_CFLAGS"
fi

all_flags=`echo $arch_flag $thumb_flag $thumb_interwork_flag $fpu_flag $float_abi_flag $soft_float_flag $align_flag`
if test -n "$all_flags"; then
    _SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$all_flags"
    echo $ac_n "checking whether the chosen combination of compiler flags ($all_flags) works""... $ac_c" 1>&6
echo "configure:4261: checking whether the chosen combination of compiler flags ($all_flags) works" >&5
    cat > conftest.$ac_ext <<EOF
#line 4263 "configure"
#include "confdefs.h"

int main() {
return 0;
; return 0; }
EOF
if { (eval echo configure:4270: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: no" 1>&2; echo "configure: error: no" 1>&5; exit 1; }
fi
rm -f conftest*

    CFLAGS="$_SAVE_CFLAGS $all_flags"
    CXXFLAGS="$CXXFLAGS $all_flags"
    ASFLAGS="$ASFLAGS $all_flags"
    if test -n "$thumb_flag"; then
        LDFLAGS="$LDFLAGS $thumb_flag"
    fi
fi



if test "$CPU_ARCH" = "arm"; then
  NEON_FLAGS="-mfpu=neon"
  echo $ac_n "checking for ARM SIMD support in compiler""... $ac_c" 1>&6
echo "configure:4294: checking for ARM SIMD support in compiler" >&5
  # We try to link so that this also fails when
  # building with LTO.
  cat > conftest.$ac_ext <<EOF
#line 4298 "configure"
#include "confdefs.h"

int main() {
asm("uqadd8 r1, r1, r2");
; return 0; }
EOF
if { (eval echo configure:4305: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  result="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result="no"
fi
rm -f conftest*
  echo "$ac_t"""$result"" 1>&6
  if test "$result" = "yes"; then
      cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ARM_SIMD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ARM_SIMD 1
EOF

      HAVE_ARM_SIMD=1
  fi

  echo $ac_n "checking ARM version support in compiler""... $ac_c" 1>&6
echo "configure:4328: checking ARM version support in compiler" >&5
    ARM_ARCH=`${CC-cc} ${CFLAGS} -dM -E - < /dev/null | sed -n 's/.*__ARM_ARCH_\([0-9][0-9]*\).*/\1/p'`
  echo "$ac_t"""$ARM_ARCH"" 1>&6

  echo $ac_n "checking for ARM NEON support in compiler""... $ac_c" 1>&6
echo "configure:4333: checking for ARM NEON support in compiler" >&5
  # We try to link so that this also fails when
  # building with LTO.
  cat > conftest.$ac_ext <<EOF
#line 4337 "configure"
#include "confdefs.h"

int main() {
asm(".fpu neon\n vadd.i8 d0, d0, d0");
; return 0; }
EOF
if { (eval echo configure:4344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  result="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result="no"
fi
rm -f conftest*
  echo "$ac_t"""$result"" 1>&6
  if test "$result" = "yes"; then
      cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ARM_NEON ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ARM_NEON 1
EOF

      HAVE_ARM_NEON=1

                  if test -n "$ARM_ARCH"; then
          if test "$ARM_ARCH" -lt 7; then
              BUILD_ARM_NEON=
          else
              cat >> confdefs.pytmp <<\EOF
    (''' BUILD_ARM_NEON ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define BUILD_ARM_NEON 1
EOF

              BUILD_ARM_NEON=1
          fi
      fi
  fi

fi # CPU_ARCH = arm








else
    if test "$OS_TARGET" = "Android"; then
                MOZ_ARCH=armv7-a
    fi
fi # COMPILE_ENVIRONMENT

if test -n "${CLANG_CC}${CLANG_CL}"; then
    _WARNINGS_CFLAGS="-Qunused-arguments ${_WARNINGS_CFLAGS}"
    CPPFLAGS="-Qunused-arguments ${CPPFLAGS}"
fi
if test -n "${CLANG_CXX}${CLANG_CL}"; then
    _WARNINGS_CXXFLAGS="-Qunused-arguments ${_WARNINGS_CXXFLAGS}"
fi

if test -n "$COMPILE_ENVIRONMENT"; then
   

# Check whether --enable-address-sanitizer or --disable-address-sanitizer was given.
if test "${enable_address_sanitizer+set}" = set; then
  enableval="$enable_address_sanitizer"
  if test "$enableval" = "yes"; then
    MOZ_ASAN=1
  elif test "$enableval" = "no"; then
    MOZ_ASAN= 
  else
    { echo "configure: error: Option, address-sanitizer, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, address-sanitizer, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_ASAN"; then
    MOZ_LLVM_HACKS=1
    if test -n "$CLANG_CL"; then
        # Look for the ASan runtime binary
        if test "$CPU_ARCH" = "x86_64"; then
          MOZ_CLANG_RT_ASAN_LIB=clang_rt.asan_dynamic-x86_64.dll
        else
          MOZ_CLANG_RT_ASAN_LIB=clang_rt.asan_dynamic-i386.dll
        fi
        # We use MOZ_PATH_PROG in order to get a Windows style path.
         # Extract the first word of "$MOZ_CLANG_RT_ASAN_LIB", so it can be a program name with args.
set dummy $MOZ_CLANG_RT_ASAN_LIB; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4432: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_MOZ_CLANG_RT_ASAN_LIB_PATH'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$MOZ_CLANG_RT_ASAN_LIB_PATH" in
  /*)
  ac_cv_path_MOZ_CLANG_RT_ASAN_LIB_PATH="$MOZ_CLANG_RT_ASAN_LIB_PATH" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_MOZ_CLANG_RT_ASAN_LIB_PATH="$MOZ_CLANG_RT_ASAN_LIB_PATH" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_MOZ_CLANG_RT_ASAN_LIB_PATH="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
MOZ_CLANG_RT_ASAN_LIB_PATH="$ac_cv_path_MOZ_CLANG_RT_ASAN_LIB_PATH"
if test -n "$MOZ_CLANG_RT_ASAN_LIB_PATH"; then
  echo "$ac_t""$MOZ_CLANG_RT_ASAN_LIB_PATH" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$MOZ_CLANG_RT_ASAN_LIB_PATH" in
    /*)
      tmp_DIRNAME=`dirname "$MOZ_CLANG_RT_ASAN_LIB_PATH"`
      tmp_BASENAME=`basename "$MOZ_CLANG_RT_ASAN_LIB_PATH"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      MOZ_CLANG_RT_ASAN_LIB_PATH="$tmp_PWD/$tmp_BASENAME"
      if test -e "$MOZ_CLANG_RT_ASAN_LIB_PATH.exe"; then
        MOZ_CLANG_RT_ASAN_LIB_PATH="$MOZ_CLANG_RT_ASAN_LIB_PATH.exe"
      fi
    esac
  fi

        if test -z "$MOZ_CLANG_RT_ASAN_LIB_PATH"; then
            { echo "configure: error: Couldn't find $MOZ_CLANG_RT_ASAN_LIB.  It should be available in the same location as clang-cl." 1>&2; echo "configure: error: Couldn't find $MOZ_CLANG_RT_ASAN_LIB.  It should be available in the same location as clang-cl." 1>&5; exit 1; }
        fi
        
        # Suppressing errors in recompiled code.
        if test "$OS_ARCH" = "WINNT"; then
            CFLAGS="-fsanitize-blacklist=$_topsrcdir/build/sanitizers/asan_blacklist_win.txt $CFLAGS"
            CXXFLAGS="-fsanitize-blacklist=$_topsrcdir/build/sanitizers/asan_blacklist_win.txt $CXXFLAGS"
        fi
    fi
    CFLAGS="-fsanitize=address $CFLAGS"
    CXXFLAGS="-fsanitize=address $CXXFLAGS"
    if test -z "$CLANG_CL"; then
        LDFLAGS="-fsanitize=address $LDFLAGS"
    fi
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ASAN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ASAN 1
EOF

     # Extract the first word of "llvm-symbolizer", so it can be a program name with args.
set dummy llvm-symbolizer; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4502: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_LLVM_SYMBOLIZER'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$LLVM_SYMBOLIZER" in
  /*)
  ac_cv_path_LLVM_SYMBOLIZER="$LLVM_SYMBOLIZER" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_LLVM_SYMBOLIZER="$LLVM_SYMBOLIZER" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_LLVM_SYMBOLIZER="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
LLVM_SYMBOLIZER="$ac_cv_path_LLVM_SYMBOLIZER"
if test -n "$LLVM_SYMBOLIZER"; then
  echo "$ac_t""$LLVM_SYMBOLIZER" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$LLVM_SYMBOLIZER" in
    /*)
      tmp_DIRNAME=`dirname "$LLVM_SYMBOLIZER"`
      tmp_BASENAME=`basename "$LLVM_SYMBOLIZER"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      LLVM_SYMBOLIZER="$tmp_PWD/$tmp_BASENAME"
      if test -e "$LLVM_SYMBOLIZER.exe"; then
        LLVM_SYMBOLIZER="$LLVM_SYMBOLIZER.exe"
      fi
    esac
  fi

fi


# Check whether --enable-memory-sanitizer or --disable-memory-sanitizer was given.
if test "${enable_memory_sanitizer+set}" = set; then
  enableval="$enable_memory_sanitizer"
  if test "$enableval" = "yes"; then
    MOZ_MSAN=1
  elif test "$enableval" = "no"; then
    MOZ_MSAN= 
  else
    { echo "configure: error: Option, memory-sanitizer, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, memory-sanitizer, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_MSAN"; then
    MOZ_LLVM_HACKS=1
    CFLAGS="-fsanitize=memory -fsanitize-memory-track-origins $CFLAGS"
    CXXFLAGS="-fsanitize=memory -fsanitize-memory-track-origins $CXXFLAGS"
    if test -z "$CLANG_CL"; then
        LDFLAGS="-fsanitize=memory -fsanitize-memory-track-origins $LDFLAGS"
    fi
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MSAN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MSAN 1
EOF

     # Extract the first word of "llvm-symbolizer", so it can be a program name with args.
set dummy llvm-symbolizer; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4579: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_LLVM_SYMBOLIZER'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$LLVM_SYMBOLIZER" in
  /*)
  ac_cv_path_LLVM_SYMBOLIZER="$LLVM_SYMBOLIZER" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_LLVM_SYMBOLIZER="$LLVM_SYMBOLIZER" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_LLVM_SYMBOLIZER="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
LLVM_SYMBOLIZER="$ac_cv_path_LLVM_SYMBOLIZER"
if test -n "$LLVM_SYMBOLIZER"; then
  echo "$ac_t""$LLVM_SYMBOLIZER" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$LLVM_SYMBOLIZER" in
    /*)
      tmp_DIRNAME=`dirname "$LLVM_SYMBOLIZER"`
      tmp_BASENAME=`basename "$LLVM_SYMBOLIZER"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      LLVM_SYMBOLIZER="$tmp_PWD/$tmp_BASENAME"
      if test -e "$LLVM_SYMBOLIZER.exe"; then
        LLVM_SYMBOLIZER="$LLVM_SYMBOLIZER.exe"
      fi
    esac
  fi

fi


# Check whether --enable-thread-sanitizer or --disable-thread-sanitizer was given.
if test "${enable_thread_sanitizer+set}" = set; then
  enableval="$enable_thread_sanitizer"
  if test "$enableval" = "yes"; then
    MOZ_TSAN=1
  elif test "$enableval" = "no"; then
    MOZ_TSAN= 
  else
    { echo "configure: error: Option, thread-sanitizer, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, thread-sanitizer, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_TSAN"; then
    MOZ_LLVM_HACKS=1
    CFLAGS="-fsanitize=thread $CFLAGS"
    CXXFLAGS="-fsanitize=thread $CXXFLAGS"
    if test -z "$CLANG_CL"; then
        LDFLAGS="-fsanitize=thread $LDFLAGS"
    fi
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TSAN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TSAN 1
EOF

     # Extract the first word of "llvm-symbolizer", so it can be a program name with args.
set dummy llvm-symbolizer; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4656: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_LLVM_SYMBOLIZER'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$LLVM_SYMBOLIZER" in
  /*)
  ac_cv_path_LLVM_SYMBOLIZER="$LLVM_SYMBOLIZER" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_LLVM_SYMBOLIZER="$LLVM_SYMBOLIZER" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_LLVM_SYMBOLIZER="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
LLVM_SYMBOLIZER="$ac_cv_path_LLVM_SYMBOLIZER"
if test -n "$LLVM_SYMBOLIZER"; then
  echo "$ac_t""$LLVM_SYMBOLIZER" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$msyshost"; then
    case "$LLVM_SYMBOLIZER" in
    /*)
      tmp_DIRNAME=`dirname "$LLVM_SYMBOLIZER"`
      tmp_BASENAME=`basename "$LLVM_SYMBOLIZER"`
      tmp_PWD=`cd "$tmp_DIRNAME" && pwd -W`
      LLVM_SYMBOLIZER="$tmp_PWD/$tmp_BASENAME"
      if test -e "$LLVM_SYMBOLIZER.exe"; then
        LLVM_SYMBOLIZER="$LLVM_SYMBOLIZER.exe"
      fi
    esac
  fi

fi


# The LLVM symbolizer is used by all sanitizers


# Check whether --enable-llvm-hacks or --disable-llvm-hacks was given.
if test "${enable_llvm_hacks+set}" = set; then
  enableval="$enable_llvm_hacks"
  if test "$enableval" = "yes"; then
    MOZ_LLVM_HACKS=1
  elif test "$enableval" = "no"; then
    MOZ_LLVM_HACKS= 
  else
    { echo "configure: error: Option, llvm-hacks, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, llvm-hacks, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_LLVM_HACKS"; then
    MOZ_NO_WLZDEFS=1
    MOZ_CFLAGS_NSS=1
fi



cat > conftest.$ac_ext <<EOF
#line 4727 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4734: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: compiler is incompatible with sanitize options" 1>&2; echo "configure: error: compiler is incompatible with sanitize options" 1>&5; exit 1; }
fi
rm -f conftest*


fi

if test "$GNU_CC"; then
    MMX_FLAGS="-mmmx"
    SSE_FLAGS="-msse"
    SSE2_FLAGS="-msse2"
    SSSE3_FLAGS="-mssse3"
    # FIXME: Let us build with strict aliasing. bug 414641.
    CFLAGS="$CFLAGS -fno-strict-aliasing"
    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-h,$(DSO_SONAME) -o $@'
    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-h,$(DSO_SONAME) -o $@'
    WARNINGS_AS_ERRORS='-Werror'
    DSO_CFLAGS=''
    DSO_PIC_CFLAGS='-fPIC'
    ASFLAGS="$ASFLAGS -fPIC"
    echo $ac_n "checking for --noexecstack option to as""... $ac_c" 1>&6
echo "configure:4761: checking for --noexecstack option to as" >&5
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS -Wa,--noexecstack"
    cat > conftest.$ac_ext <<EOF
#line 4765 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4772: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                     ASFLAGS="$ASFLAGS -Wa,--noexecstack"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
    CFLAGS=$_SAVE_CFLAGS
    echo $ac_n "checking for -z noexecstack option to ld""... $ac_c" 1>&6
echo "configure:4785: checking for -z noexecstack option to ld" >&5
    _SAVE_LDFLAGS=$LDFLAGS
    LDFLAGS="$LDFLAGS -Wl,-z,noexecstack"
    cat > conftest.$ac_ext <<EOF
#line 4789 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4796: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
                  LDFLAGS=$_SAVE_LDFLAGS
fi
rm -f conftest*

    echo $ac_n "checking for -z text option to ld""... $ac_c" 1>&6
echo "configure:4809: checking for -z text option to ld" >&5
    _SAVE_LDFLAGS=$LDFLAGS
    LDFLAGS="$LDFLAGS -Wl,-z,text"
    cat > conftest.$ac_ext <<EOF
#line 4813 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4820: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                  NSPR_LDFLAGS="$NSPR_LDFLAGS -Wl,-z,text"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
                  LDFLAGS=$_SAVE_LDFLAGS
fi
rm -f conftest*

    echo $ac_n "checking for --build-id option to ld""... $ac_c" 1>&6
echo "configure:4834: checking for --build-id option to ld" >&5
    _SAVE_LDFLAGS=$LDFLAGS
    LDFLAGS="$LDFLAGS -Wl,--build-id"
    cat > conftest.$ac_ext <<EOF
#line 4838 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4845: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                  NSPR_LDFLAGS="$NSPR_LDFLAGS -Wl,--build-id"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
                  LDFLAGS=$_SAVE_LDFLAGS
fi
rm -f conftest*

    echo $ac_n "checking for --ignore-unresolved-symbol option to ld""... $ac_c" 1>&6
echo "configure:4859: checking for --ignore-unresolved-symbol option to ld" >&5
    HAVE_LINKER_SUPPORT_IGNORE_UNRESOLVED=
    _SAVE_LDFLAGS=$LDFLAGS
    LDFLAGS="$LDFLAGS -Wl,--ignore-unresolved-symbol,environ"
    cat > conftest.$ac_ext <<EOF
#line 4864 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4871: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                  HAVE_LINKER_SUPPORT_IGNORE_UNRESOLVED=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
    LDFLAGS=$_SAVE_LDFLAGS

    # Check for -mssse3 on $CC
    echo $ac_n "checking if toolchain supports -mssse3 option""... $ac_c" 1>&6
echo "configure:4886: checking if toolchain supports -mssse3 option" >&5
    HAVE_TOOLCHAIN_SUPPORT_MSSSE3=
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS -mssse3"
    cat > conftest.$ac_ext <<EOF
#line 4891 "configure"
#include "confdefs.h"
asm ("pmaddubsw %xmm2,%xmm3");
int main() {

; return 0; }
EOF
if { (eval echo configure:4898: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                     HAVE_TOOLCHAIN_SUPPORT_MSSSE3=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
    CFLAGS=$_SAVE_CFLAGS

    # Check for -msse4.1 on $CC
    echo $ac_n "checking if toolchain supports -msse4.1 option""... $ac_c" 1>&6
echo "configure:4913: checking if toolchain supports -msse4.1 option" >&5
    HAVE_TOOLCHAIN_SUPPORT_MSSE4_1=
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS -msse4.1"
    cat > conftest.$ac_ext <<EOF
#line 4918 "configure"
#include "confdefs.h"
asm ("pmulld %xmm6,%xmm0");
int main() {

; return 0; }
EOF
if { (eval echo configure:4925: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                     HAVE_TOOLCHAIN_SUPPORT_MSSE4_1=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
    CFLAGS=$_SAVE_CFLAGS

    case "${CPU_ARCH}" in
    x86 | x86_64)
      echo $ac_n "checking for x86 AVX2 asm support in compiler""... $ac_c" 1>&6
echo "configure:4941: checking for x86 AVX2 asm support in compiler" >&5
      cat > conftest.$ac_ext <<EOF
#line 4943 "configure"
#include "confdefs.h"

int main() {
asm volatile ("vpermq      \$0xd8,%ymm0,%ymm0 \n");
; return 0; }
EOF
if { (eval echo configure:4950: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  result="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result="no"
fi
rm -f conftest*
      echo "$ac_t"""$result"" 1>&6
      if test "$result" = "yes"; then
          HAVE_X86_AVX2=1
      fi
      ;;

    ppc*)
      echo $ac_n "checking whether we can enable AltiVec support""... $ac_c" 1>&6
echo "configure:4968: checking whether we can enable AltiVec support" >&5
      HAVE_ALTIVEC=
      _SAVE_CFLAGS=$CFLAGS
      CFLAGS="$CFLAGS -maltivec"
      cat > conftest.$ac_ext <<EOF
#line 4973 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4980: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                       HAVE_ALTIVEC=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
      CFLAGS=$_SAVE_CFLAGS
      ;;
    esac

    DSO_LDOPTS='-shared'
    if test "$GCC_USE_GNU_LD"; then
        # Some tools like ASan use a runtime library that is only
        # linked against executables, so we must allow undefined
        # symbols for shared objects in some cases.
        if test -z "$MOZ_NO_WLZDEFS"; then
            # Don't allow undefined symbols in libraries
            DSO_LDOPTS="$DSO_LDOPTS -Wl,-z,defs"

            # BSDs need `environ' exposed for posix_spawn (bug 753046)
            case "$OS_TARGET" in
            DragonFly|FreeBSD|NetBSD|OpenBSD)
                if test -n "$HAVE_LINKER_SUPPORT_IGNORE_UNRESOLVED"; then
                    DSO_LDOPTS="$DSO_LDOPTS -Wl,--ignore-unresolved-symbol,environ"
                else
                    DSO_LDOPTS="$DSO_LDOPTS -Wl,--warn-unresolved-symbols"
                fi
                ;;
            esac
        fi
    fi

    _DEFINES_CFLAGS='-include $(topobjdir)/mozilla-config.h -DMOZILLA_CLIENT'
    _USE_CPP_INCLUDE_FLAG=1

    ASFLAGS="$ASFLAGS $_DEFINES_CFLAGS"

else
    MKSHLIB='$(LD) $(DSO_LDOPTS) -h $(DSO_SONAME) -o $@'
    MKCSHLIB='$(LD) $(DSO_LDOPTS) -h $(DSO_SONAME) -o $@'

    DSO_LDOPTS='-shared'
    if test "$GNU_LD"; then
        # Don't allow undefined symbols in libraries
        DSO_LDOPTS="$DSO_LDOPTS -z defs"
    fi

    DSO_CFLAGS=''
    DSO_PIC_CFLAGS='-KPIC'
    _DEFINES_CFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'
fi

if test "$GNU_CXX"; then
    # FIXME: Let us build with strict aliasing. bug 414641.
    CXXFLAGS="$CXXFLAGS -fno-exceptions -fno-strict-aliasing"

    _DEFINES_CXXFLAGS='-DMOZILLA_CLIENT -include $(topobjdir)/mozilla-config.h'
    _USE_CPP_INCLUDE_FLAG=1

else
    _DEFINES_CXXFLAGS='-DMOZILLA_CLIENT -D_MOZILLA_CONFIG_H_ $(ACDEFINES)'
fi

# Check whether --enable-valgrind or --disable-valgrind was given.
if test "${enable_valgrind+set}" = set; then
  enableval="$enable_valgrind"
  if test "$enableval" = "yes"; then
    MOZ_VALGRIND=1
  elif test "$enableval" = "no"; then
    MOZ_VALGRIND= 
  else
    { echo "configure: error: Option, valgrind, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, valgrind, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_VALGRIND"; then
       ac_safe=`echo "valgrind/valgrind.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for valgrind/valgrind.h""... $ac_c" 1>&6
echo "configure:5063: checking for valgrind/valgrind.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 5068 "configure"
#include "confdefs.h"

#include <valgrind/valgrind.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:5076: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    :
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: --enable-valgrind specified but Valgrind is not installed" 1>&2; echo "configure: error: --enable-valgrind specified but Valgrind is not installed" 1>&5; exit 1; }
  fi

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VALGRIND ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VALGRIND 1
EOF

fi


# For profiling builds keep the symbol information
if test "$MOZ_PROFILING" -a -z "$STRIP_FLAGS"; then
    case "$OS_TARGET" in
    Linux|DragonFly|FreeBSD|NetBSD|OpenBSD)
        STRIP_FLAGS="--strip-debug"
        ;;
    esac
fi

case "$host" in
*mingw*)
    if test -n "$_WIN32_MSVC"; then
        HOST_AR=lib
        HOST_AR_FLAGS='-NOLOGO -OUT:$@'
        HOST_CFLAGS="$HOST_CFLAGS -TC -nologo"
        HOST_RANLIB='echo ranlib'
    else
        HOST_CFLAGS="$HOST_CFLAGS -mwindows"
    fi
    HOST_CFLAGS="$HOST_CFLAGS -DXP_WIN32 -DXP_WIN -DWIN32 -D_WIN32 -D_CRT_SECURE_NO_WARNINGS"
    HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O2}"
    HOST_BIN_SUFFIX=.exe

    case "${host_cpu}" in
    i*86)
        if test -n "$_WIN32_MSVC"; then
            HOST_LDFLAGS="$HOST_LDFLAGS -MACHINE:X86"
        fi
        ;;
    x86_64)
        if test -n "$_WIN32_MSVC"; then
            HOST_LDFLAGS="$HOST_LDFLAGS -MACHINE:X64"
        fi
        HOST_CFLAGS="$HOST_CFLAGS -D_AMD64_"
        ;;
    esac
    ;;

*-linux*|*-kfreebsd*-gnu|*-gnu*)
    HOST_CFLAGS="$HOST_CFLAGS -DXP_UNIX"
    HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O3}"
    ;;
 
*)
    HOST_CFLAGS="$HOST_CFLAGS -DXP_UNIX"
    HOST_OPTIMIZE_FLAGS="${HOST_OPTIMIZE_FLAGS=-O2}"
    ;;
esac

MOZILLA_VERSION=`$PYTHON $srcdir/python/mozbuild/mozbuild/milestone.py --topsrcdir $srcdir`
MOZILLA_UAVERSION=`$PYTHON $srcdir/python/mozbuild/mozbuild/milestone.py --topsrcdir $srcdir --uaversion`
MOZILLA_SYMBOLVERSION=`$PYTHON $srcdir/python/mozbuild/mozbuild/milestone.py --topsrcdir $srcdir --symbolversion`
if test -z "$MOZILLA_VERSION"; then
  { echo "configure: error: failed to read version info from milestone file" 1>&2; echo "configure: error: failed to read version info from milestone file" 1>&5; exit 1; }
fi

cat >> confdefs.pytmp <<EOF
    (''' MOZILLA_VERSION ''', r''' "$MOZILLA_VERSION" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZILLA_VERSION "$MOZILLA_VERSION"
EOF

cat >> confdefs.pytmp <<EOF
    (''' MOZILLA_VERSION_U ''', r''' $MOZILLA_VERSION ''')
EOF
cat >> confdefs.h <<EOF
#define MOZILLA_VERSION_U $MOZILLA_VERSION
EOF

cat >> confdefs.pytmp <<EOF
    (''' MOZILLA_UAVERSION ''', r''' "$MOZILLA_UAVERSION" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZILLA_UAVERSION "$MOZILLA_UAVERSION"
EOF

cat >> confdefs.pytmp <<EOF
    (''' MOZILLA_UAVERSION_U ''', r''' $MOZILLA_UAVERSION ''')
EOF
cat >> confdefs.h <<EOF
#define MOZILLA_UAVERSION_U $MOZILLA_UAVERSION
EOF






  cat > conftest.c <<EOF
                  int foo = 1;
EOF
  lto_is_enabled=no
  if ${CC-cc} ${CFLAGS} -S conftest.c -o conftest.s >/dev/null 2>&1; then
    if grep '^target triple =' conftest.s; then
      lto_is_enabled=yes
    fi
  fi
  rm -f conftest.cs



case "$target" in
*-*linux*)
    if test "$GNU_CC" -o "$GNU_CXX"; then
        MOZ_PGO_OPTIMIZE_FLAGS="-O3"
        MOZ_OPTIMIZE_FLAGS="-O2"
        if test -z "$CLANG_CC"; then
           MOZ_OPTIMIZE_FLAGS="-freorder-blocks $MOZ_OPTIMIZE_FLAGS"
        fi
    fi

    case "${target_cpu}" in
    alpha*)
        CFLAGS="$CFLAGS -mieee"
        CXXFLAGS="$CXXFLAGS -mieee"
    ;;
    esac
    ;;
*-mingw*)
    DSO_CFLAGS=
    DSO_PIC_CFLAGS=
    DLL_SUFFIX=.dll
    RC=rc.exe
    # certain versions of cygwin's makedepend barf on the
    # #include <string> vs -I./dist/include/string issue so don't use it
    if test -n "$GNU_CC" -o -n "$CLANG_CC"; then
        CC="$CC -mwindows"
        CXX="$CXX -mwindows"
        CPP="$CPP -mwindows"
        CFLAGS="$CFLAGS -mms-bitfields"
        CXXFLAGS="$CXXFLAGS -mms-bitfields"
        DSO_LDOPTS='-shared'
        MKSHLIB='$(CXX) $(DSO_LDOPTS) -o $@'
        MKCSHLIB='$(CC) $(DSO_LDOPTS) -o $@'
        RC='$(WINDRES)'
        # Use static libgcc and libstdc++
        LDFLAGS="$LDFLAGS -static"
        NSPR_LDFLAGS="$NSPR_LDFLAGS -static-libgcc"
        # Use temp file for windres (bug 213281)
        RCFLAGS='-O coff --use-temp-file'
        # mingw doesn't require kernel32, user32, and advapi32 explicitly
        LIBS="$LIBS -luuid -lgdi32 -lwinmm -lwsock32 -luserenv -lsecur32"
        MOZ_FIX_LINK_PATHS=
        DLL_PREFIX=
        IMPORT_LIB_SUFFIX=a

        WIN32_CONSOLE_EXE_LDFLAGS=-mconsole
        WIN32_GUI_EXE_LDFLAGS=-mwindows

        # GCC/binutils can't link to a function if we try to include dllexport function
        # in the same library as dllimport caller. To work around it, we build NSPR
        # and NSS with -mnop-fun-dllimport flag. The drawback of this solution is that
        # function thunks need to be generated for cross-DLL calls.
        MOZ_FOLD_LIBS_FLAGS=-mnop-fun-dllimport
    else
        TARGET_COMPILER_ABI=msvc
        HOST_LD='$(LD)'
        if test "$AS_BIN"; then
            AS="$(basename "$AS_BIN")"
        fi
        AR='lib'
        AR_FLAGS='-NOLOGO -OUT:$@'
        AR_EXTRACT=
        RANLIB='echo not_ranlib'
        STRIP='echo not_strip'
        PKG_SKIP_STRIP=1
        OBJ_SUFFIX=obj
        LIB_SUFFIX=lib
        DLL_PREFIX=
        LIB_PREFIX=
        IMPORT_LIB_SUFFIX=lib
        MKSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ -PDB:$(LINK_PDBFILE) $(DSO_LDOPTS)'
        MKCSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ -PDB:$(LINK_PDBFILE) $(DSO_LDOPTS)'
        WIN32_SUBSYSTEM_VERSION=6.01
        WIN32_CONSOLE_EXE_LDFLAGS=-SUBSYSTEM:CONSOLE,$WIN32_SUBSYSTEM_VERSION
        WIN32_GUI_EXE_LDFLAGS=-SUBSYSTEM:WINDOWS,$WIN32_SUBSYSTEM_VERSION
        DSO_LDOPTS=-SUBSYSTEM:WINDOWS,$WIN32_SUBSYSTEM_VERSION
        _USE_CPP_INCLUDE_FLAG=1
        _DEFINES_CFLAGS='-FI $(topobjdir)/mozilla-config.h -DMOZILLA_CLIENT'
        _DEFINES_CXXFLAGS='-FI $(topobjdir)/mozilla-config.h -DMOZILLA_CLIENT'
        CFLAGS="$CFLAGS -W3 -Gy -Zc:inline"
        CXXFLAGS="$CXXFLAGS -W3 -Gy -Zc:inline"
        if test -z "$CLANG_CL"; then
            CFLAGS="$CFLAGS -utf-8"
            CXXFLAGS="$CXXFLAGS -utf-8"
        fi
        if test "$CPU_ARCH" = "x86"; then
            
                                                
            SSE_FLAGS="-arch:SSE"
            SSE2_FLAGS="-arch:SSE2"
                                    SSSE3_FLAGS="-arch:SSE2"
        fi
                        if test -n "$CLANG_CL"; then
            SSSE3_FLAGS="-mssse3"
        fi
                        CFLAGS="$CFLAGS -FS"
        CXXFLAGS="$CXXFLAGS -FS"
                                if test -z "$MOZ_ASAN"; then
            CFLAGS="$CFLAGS -Gw"
            CXXFLAGS="$CXXFLAGS -Gw"
        fi
        # khuey says we can safely ignore MSVC warning C4251
        # MSVC warning C4244 (implicit type conversion may lose data) warns
        # and requires workarounds for perfectly valid code.  Also, GCC/clang
        # don't warn about it by default. So for consistency/sanity, we turn
        # it off on MSVC, too.
        # MSVC warning C4267 warns for narrowing type conversions from size_t
        # to 32-bit integer types on 64-bit platforms.  Since this is virtually
        # the same thing as C4244, we disable C4267, too.
        # MSVC warning C4345 warns of newly conformant behavior as of VS2003.
        # MSVC warning C4351 warns of newly conformant behavior as of VS2005.
        # MSVC warning C4800 warns when a value is implicitly cast to bool,
        # because this also forces narrowing to a single byte, which can be a
        # perf hit.  But this matters so little in practice (and often we want
        # that behavior) that it's better to turn it off.
        # MSVC warning wd4595 warns non-member operator new or delete functions
        # may not be declared inline, as of VS2015 Update 2.
        CFLAGS="$CFLAGS -wd4244 -wd4267"
        CXXFLAGS="$CXXFLAGS -wd4251 -wd4244 -wd4267 -wd4345 -wd4351 -wd4800 -wd4595"
        if test -n "$CLANG_CL"; then
            # XXX We should combine some of these with our generic GCC-style
            # warning checks.
            #
            # Suppress the clang-cl warning for the inline 'new' and 'delete' in mozalloc
            CXXFLAGS="$CXXFLAGS -Wno-inline-new-delete"
            # We use offsetof on non-POD objects all the time.
            # We also suppress this warning on other platforms.
            CXXFLAGS="$CXXFLAGS -Wno-invalid-offsetof"
            # MFBT thinks clang-cl supports constexpr, which it does, but
            # not everything in Windows C++ headers supports constexpr
            # as we might expect until MSVC 2015, so turn off this warning
            # for now.
            CXXFLAGS="$CXXFLAGS -Wno-invalid-constexpr"
            # This warns for reasonable things like:
            #   enum { X = 0xffffffffU };
            # which is annoying for IDL headers.
            CXXFLAGS="$CXXFLAGS -Wno-microsoft-enum-value"
            # This warns for cases that would be reached by the Microsoft
            # #include rules, but also currently warns on cases that would
            # *also* be reached by standard C++ include rules.  That
            # behavior doesn't seem useful, so we turn it off.
            CXXFLAGS="$CXXFLAGS -Wno-microsoft-include"
            # We normally error out on unknown pragmas, but since clang-cl
            # claims to be MSVC, it would be difficult to add
            # #if defined(_MSC_VER) && !defined(__clang__) everywhere we
            # use such pragmas, so just ignore them.
            CFLAGS="$CFLAGS -Wno-unknown-pragmas"
            CXXFLAGS="$CXXFLAGS -Wno-unknown-pragmas"
            # We get errors about various #pragma intrinsic directives from
            # clang-cl, and we don't need to hear about those.
            CFLAGS="$CFLAGS -Wno-ignored-pragmas"
            CXXFLAGS="$CXXFLAGS -Wno-ignored-pragmas"
            # clang-cl's Intrin.h marks things like _ReadWriteBarrier
            # as __attribute((__deprecated__)).  This is nice to know,
            # but since we don't get the equivalent warning from MSVC,
            # let's just ignore it.
            CFLAGS="$CFLAGS -Wno-deprecated-declarations"
            CXXFLAGS="$CXXFLAGS -Wno-deprecated-declarations"
            # We use a function like:
            #   __declspec(noreturn) __inline void f() {}
            # which -Winvalid-noreturn complains about.  Again, MSVC seems
            # OK with it, so let's silence the warning.
            CFLAGS="$CFLAGS -Wno-invalid-noreturn"
            CXXFLAGS="$CXXFLAGS -Wno-invalid-noreturn"
            # Missing |override| on virtual function declarations isn't
            # something that MSVC currently warns about.
            CXXFLAGS="$CXXFLAGS -Wno-inconsistent-missing-override"
            # We use -DHAS_EXCEPTIONS=0, which removes the |throw()|
            # declaration on |operator delete(void*)|.  However, clang-cl
            # must internally declare |operator delete(void*)| differently,
            # which causes this warning for virtually every file in the
            # tree.  clang-cl doesn't support -fno-exceptions or equivalent,
            # so there doesn't seem to be any way to convince clang-cl to
            # declare |delete| differently.  Therefore, suppress this
            # warning.
            CXXFLAGS="$CXXFLAGS -Wno-implicit-exception-spec-mismatch"
            # At least one MSVC header and several headers in-tree have
            # unused typedefs, so turn this on.
            CXXFLAGS="$CXXFLAGS -Wno-unused-local-typedef"
            # Several JS engine header files use __declspec(dllimport) on
            # classes, and clang-cl helpfully warns about its non-support
            # for such cases.  We're not particularly worried about that,
            # so ignore that warning.
            CXXFLAGS="$CXXFLAGS -Wno-ignored-attributes"
        fi
        # make 'foo == bar;' error out
        CFLAGS="$CFLAGS -we4553"
        CXXFLAGS="$CXXFLAGS -we4553"
        LIBS="$LIBS kernel32.lib user32.lib gdi32.lib winmm.lib wsock32.lib advapi32.lib secur32.lib"
        MOZ_DEBUG_LDFLAGS='-DEBUG -DEBUGTYPE:CV'
        WARNINGS_AS_ERRORS='-WX'
        MOZ_OPTIMIZE_FLAGS='-O1 -Oi'
        MOZ_FIX_LINK_PATHS=
        num_cores=$($PYTHON -c 'import multiprocessing; print(min(8,multiprocessing.cpu_count()))')
        cgthreads="-CGTHREADS:${num_cores}"
        LDFLAGS="$LDFLAGS -LARGEADDRESSAWARE -NXCOMPAT -DYNAMICBASE -OPT:REF -OPT:ICF=${num_cores} $cgthreads"
        if test -z "$DEVELOPER_OPTIONS"; then
            LDFLAGS="$LDFLAGS -RELEASE"
        fi
                PROFILE_GEN_CFLAGS="-GL"
        PROFILE_GEN_LDFLAGS="-LTCG:PGINSTRUMENT"
                                                                PROFILE_USE_CFLAGS="-GL -wd4624 -wd4952"
                        PROFILE_USE_LDFLAGS="-LTCG:PGUPDATE"
        RCFLAGS="-nologo"
                HAVE_TOOLCHAIN_SUPPORT_MSSSE3=1
        HAVE_TOOLCHAIN_SUPPORT_MSSE4_1=1
        HAVE_X86_AVX2=1
    fi
    cat >> confdefs.pytmp <<\EOF
    (''' WIN32_LEAN_AND_MEAN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define WIN32_LEAN_AND_MEAN 1
EOF

        cat >> confdefs.pytmp <<\EOF
    (''' NOMINMAX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NOMINMAX 1
EOF

    BIN_SUFFIX='.exe'
    MOZ_USER_DIR="Mozilla"

    case "$host_os" in
    cygwin*|msvc*|mks*)
        { echo "configure: error: Using a Cygwin build environment is unsupported. Configure cannot check for presence of necessary headers. Please upgrade to MozillaBuild; see https://developer.mozilla.org/en/Windows_Build_Prerequisites." 1>&2; echo "configure: error: Using a Cygwin build environment is unsupported. Configure cannot check for presence of necessary headers. Please upgrade to MozillaBuild; see https://developer.mozilla.org/en/Windows_Build_Prerequisites." 1>&5; exit 1; }
        ;;
    esac

    case "$target" in
    i*86-*)
        if test -n "$GNU_CC"; then
            CFLAGS="$CFLAGS -mstackrealign -fno-keep-inline-dllexport"
            CXXFLAGS="$CXXFLAGS -mstackrealign -fno-keep-inline-dllexport"
            LDFLAGS="$LDFLAGS -Wl,--enable-stdcall-fixup -Wl,--large-address-aware"
        else
            DSO_LDOPTS="$DSO_LDOPTS -MACHINE:X86"
            LDFLAGS="$LDFLAGS -SAFESEH"
        fi

        cat >> confdefs.pytmp <<\EOF
    (''' _X86_ ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _X86_ 1
EOF

        ;;
    x86_64-*)
        if test -n "$_WIN32_MSVC"; then
            DSO_LDOPTS="$DSO_LDOPTS -MACHINE:X64"
        fi
        cat >> confdefs.pytmp <<\EOF
    (''' _AMD64_ ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _AMD64_ 1
EOF

        ;;
    *)
        cat >> confdefs.pytmp <<\EOF
    (''' _CPU_ARCH_NOT_DEFINED ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _CPU_ARCH_NOT_DEFINED 1
EOF

        ;;
    esac
    ;;

*-netbsd*)
    DSO_CFLAGS=''
    CFLAGS="$CFLAGS -Dunix"
    CXXFLAGS="$CXXFLAGS -Dunix"
    if $CC -E - -dM </dev/null | grep __ELF__ >/dev/null; then
        DLL_SUFFIX=".so"
        DSO_PIC_CFLAGS='-fPIC -DPIC'
        DSO_LDOPTS='-shared'
        BIN_FLAGS='-Wl,--export-dynamic'
    else
        DSO_PIC_CFLAGS='-fPIC -DPIC'
        DLL_SUFFIX=".so.1.0"
        DSO_LDOPTS='-shared'
    fi
    # This will fail on a.out systems prior to 1.5.1_ALPHA.
    if test "$LIBRUNPATH"; then
        DSO_LDOPTS="-Wl,-R$LIBRUNPATH $DSO_LDOPTS"
    fi
    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-soname,$(DSO_SONAME) -o $@'
    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-soname,$(DSO_SONAME) -o $@'
    ;;

*-openbsd*)
    if test "$SO_VERSION"; then
        DLL_SUFFIX=".so.$SO_VERSION"
    else
        DLL_SUFFIX=".so.1.0"
    fi
    if test -z "$X11BASE"; then
        X11BASE=/usr/X11R6
    fi
    MOZ_FIX_LINK_PATHS="$MOZ_FIX_LINK_PATHS -Wl,-rpath-link,${X11BASE}/lib"
    DSO_CFLAGS=''
    DSO_PIC_CFLAGS='-fPIC'
    DSO_LDOPTS='-shared -fPIC'
    if test "$LIBRUNPATH"; then
        DSO_LDOPTS="-R$LIBRUNPATH $DSO_LDOPTS"
    fi
    ;;

i*86-*-solaris*)
    MOZ_FIX_LINK_PATHS="-L${DIST}/bin -R'\$\$ORIGIN':/usr/gcc/7/lib"
    ;;

x86_64-*-solaris*)
    MOZ_FIX_LINK_PATHS="-L${DIST}/bin -R'\$\$ORIGIN':/usr/gcc/7/lib/amd64"
    ;;

esac







if test -n "$MOZ_LINKER"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_LINKER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_LINKER 1
EOF

  MOZ_LINKER_EXTRACT=1
  for ac_prog in xz
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:5552: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_XZ'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$XZ"; then
  ac_cv_prog_XZ="$XZ" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_XZ="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
XZ="$ac_cv_prog_XZ"
if test -n "$XZ"; then
  echo "$ac_t""$XZ" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$XZ" && break
done

fi

cat >> confdefs.pytmp <<EOF
    (''' D_INO ''', r''' $DIRENT_INO ''')
EOF
cat >> confdefs.h <<EOF
#define D_INO $DIRENT_INO
EOF


case "$target" in
    *-linux*|*-kfreebsd*-gnu|*-gnu*)
        MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'
        ;;
    *-mingw*)
        if test -n "$GNU_CC"; then
           MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'
        fi
        ;;
esac

if test -z "$COMPILE_ENVIRONMENT"; then
    SKIP_COMPILER_CHECKS=1
    SKIP_LIBRARY_CHECKS=1
    PKG_SKIP_STRIP=1
    

if test -z "$MOZ_DEBUG" -o -n "$MOZ_ASAN"; then
    MOZ_NO_DEBUG_RTL=1
fi



MOZ_DEBUG_ENABLE_DEFS="DEBUG TRACING"
# Check whether --with-debug-label or --without-debug-label was given.
if test "${with_debug_label+set}" = set; then
  withval="$with_debug_label"
   for option in `echo $withval | sed 's/,/ /g'`; do
    MOZ_DEBUG_ENABLE_DEFS="$MOZ_DEBUG_ENABLE_DEFS DEBUG_${option}"
done
fi


if test -n "$MOZ_DEBUG"; then
    if test -n "$COMPILE_ENVIRONMENT"; then
        echo $ac_n "checking for valid debug flags""... $ac_c" 1>&6
echo "configure:5627: checking for valid debug flags" >&5
        _SAVE_CFLAGS=$CFLAGS
        CFLAGS="$CFLAGS $MOZ_DEBUG_FLAGS"
        cat > conftest.$ac_ext <<EOF
#line 5631 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
printf("Hello World\n");
; return 0; }
EOF
if { (eval echo configure:5638: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  _results=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _results=no
fi
rm -f conftest*
        echo "$ac_t""$_results" 1>&6
        if test "$_results" = "no"; then
            { echo "configure: error: These compiler flags are invalid: $MOZ_DEBUG_FLAGS" 1>&2; echo "configure: error: These compiler flags are invalid: $MOZ_DEBUG_FLAGS" 1>&5; exit 1; }
        fi
        CFLAGS=$_SAVE_CFLAGS
    fi

    MOZ_DEBUG_DEFINES="$MOZ_DEBUG_ENABLE_DEFS"
else
    MOZ_DEBUG_DEFINES="NDEBUG TRIMMED"
fi




else
    
  

if test -z "$MOZ_DEBUG" -o -n "$MOZ_ASAN"; then
    MOZ_NO_DEBUG_RTL=1
fi



MOZ_DEBUG_ENABLE_DEFS="DEBUG TRACING"
# Check whether --with-debug-label or --without-debug-label was given.
if test "${with_debug_label+set}" = set; then
  withval="$with_debug_label"
   for option in `echo $withval | sed 's/,/ /g'`; do
    MOZ_DEBUG_ENABLE_DEFS="$MOZ_DEBUG_ENABLE_DEFS DEBUG_${option}"
done
fi


if test -n "$MOZ_DEBUG"; then
    if test -n "$COMPILE_ENVIRONMENT"; then
        echo $ac_n "checking for valid debug flags""... $ac_c" 1>&6
echo "configure:5686: checking for valid debug flags" >&5
        _SAVE_CFLAGS=$CFLAGS
        CFLAGS="$CFLAGS $MOZ_DEBUG_FLAGS"
        cat > conftest.$ac_ext <<EOF
#line 5690 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
printf("Hello World\n");
; return 0; }
EOF
if { (eval echo configure:5697: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  _results=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _results=no
fi
rm -f conftest*
        echo "$ac_t""$_results" 1>&6
        if test "$_results" = "no"; then
            { echo "configure: error: These compiler flags are invalid: $MOZ_DEBUG_FLAGS" 1>&2; echo "configure: error: These compiler flags are invalid: $MOZ_DEBUG_FLAGS" 1>&5; exit 1; }
        fi
        CFLAGS=$_SAVE_CFLAGS
    fi

    MOZ_DEBUG_DEFINES="$MOZ_DEBUG_ENABLE_DEFS"
else
    MOZ_DEBUG_DEFINES="NDEBUG TRIMMED"
fi




  
# Check whether --enable-cpp-rtti or --disable-cpp-rtti was given.
if test "${enable_cpp_rtti+set}" = set; then
  enableval="$enable_cpp_rtti"
  if test "$enableval" = "yes"; then
     _MOZ_USE_RTTI=1 
  elif test "$enableval" = "no"; then
     _MOZ_USE_RTTI= 
  else
    { echo "configure: error: Option, cpp-rtti, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, cpp-rtti, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -z "$_MOZ_USE_RTTI"; then
    if test "$GNU_CC"; then
        CXXFLAGS="$CXXFLAGS -fno-rtti"
    else
        case "$target" in
        *-mingw*)
            CXXFLAGS="$CXXFLAGS -GR-"
        esac
    fi
fi

if test "$CLANG_CXX"; then
    ## We disable return-type-c-linkage because jsval is defined as a C++ type but is
    ## returned by C functions. This is possible because we use knowledge about the ABI
    ## to typedef it to a C type with the same layout when the headers are included
    ## from C.
    _WARNINGS_CXXFLAGS="${_WARNINGS_CXXFLAGS} -Wno-unknown-warning-option -Wno-return-type-c-linkage"
fi

if test -n "$DEVELOPER_OPTIONS"; then
    MOZ_FORCE_GOLD=1
fi

# Check whether --enable-gold or --disable-gold was given.
if test "${enable_gold+set}" = set; then
  enableval="$enable_gold"
  if test "$enableval" = "yes"; then
    MOZ_FORCE_GOLD=1
  elif test "$enableval" = "no"; then
    MOZ_FORCE_GOLD=
    
  else
    { echo "configure: error: Option, gold, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, gold, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test "$GNU_CC" -a -n "$MOZ_FORCE_GOLD"; then
            if $CC -Wl,--version 2>&1 | grep -q "GNU ld"; then
        GOLD=$($CC -print-prog-name=ld.gold)
        case "$GOLD" in
        /*)
            ;;
        *)
            GOLD=$(which $GOLD)
            ;;
        esac
        if test -n "$GOLD"; then
            mkdir -p $_objdir/build/unix/gold
            rm -f $_objdir/build/unix/gold/ld
            ln -s "$GOLD" $_objdir/build/unix/gold/ld
            if $CC -B $_objdir/build/unix/gold -Wl,--version 2>&1 | grep -q "GNU gold"; then
                LDFLAGS="$LDFLAGS -B $_objdir/build/unix/gold"
            else
                rm -rf $_objdir/build/unix/gold
            fi
        fi
    fi
fi
if test "$GNU_CC"; then
    if $CC $LDFLAGS -Wl,--version 2>&1 | grep -q "GNU ld"; then
        LD_IS_BFD=1
    fi
fi



if test "$GNU_CC"; then
    if test -z "$DEVELOPER_OPTIONS"; then
        CFLAGS="$CFLAGS -ffunction-sections -fdata-sections"
        CXXFLAGS="$CXXFLAGS -ffunction-sections -fdata-sections"
    fi
    CFLAGS="$CFLAGS -fno-math-errno"
    CXXFLAGS="$CXXFLAGS -fno-exceptions -fno-math-errno"

    if test "$CPU_ARCH" = "x86" -o "$CPU_ARCH" = "x86_64"; then
      CFLAGS="$CFLAGS -msse2 -mfpmath=sse"
      CXXFLAGS="$CXXFLAGS -msse2 -mfpmath=sse"
    fi

    if test -z "$CLANG_CC"; then
        case "$CC_VERSION" in
        4.* | 5.*)
            ;;
        *)
            # Lifetime Dead Store Elimination level 2 (default in GCC6+) breaks Gecko.
            # Instead of completely disabling this optimization on newer GCC's,
            # we'll force them to use level 1 optimization with -flifetime-dse=1.
            # Add it first so that a mozconfig can override by setting CFLAGS/CXXFLAGS.
            CFLAGS="-flifetime-dse=1 $CFLAGS"
            CXXFLAGS="-flifetime-dse=1 $CXXFLAGS"
            ;;
        esac
    fi
fi


# Check whether --enable-icf or --disable-icf was given.
if test "${enable_icf+set}" = set; then
  enableval="$enable_icf"
  if test "$enableval" = "no"; then
    MOZ_DISABLE_ICF=1
  elif test "$enableval" = "yes"; then
    MOZ_DISABLE_ICF= 
  else
    { echo "configure: error: Option, icf, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, icf, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test "$GNU_CC" -a "$GCC_USE_GNU_LD" -a -z "$MOZ_DISABLE_ICF" -a -z "$DEVELOPER_OPTIONS"; then
    echo $ac_n "checking whether the linker supports Identical Code Folding""... $ac_c" 1>&6
echo "configure:5848: checking whether the linker supports Identical Code Folding" >&5
if eval "test \"`echo '$''{'LD_SUPPORTS_ICF'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'int foo() {return 42;}' \
              'int bar() {return 42;}' \
              'int main() {return foo() - bar();}' > conftest.${ac_ext}
        # If the linker supports ICF, foo and bar symbols will have
        # the same address
        if { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS -Wl,--icf=safe -ffunction-sections conftest.${ac_ext} $LIBS 1>&2'; { (eval echo configure:5857: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
           test -s conftest${ac_exeext} &&
           objdump -t conftest${ac_exeext} | awk '{a[$6] = $1} END {if (a["foo"] && (a["foo"] != a["bar"])) { exit 1 }}'; then
            LD_SUPPORTS_ICF=yes
        else
            LD_SUPPORTS_ICF=no
        fi
        rm -rf conftest*
fi

echo "$ac_t""$LD_SUPPORTS_ICF" 1>&6
    if test "$LD_SUPPORTS_ICF" = yes; then
        _SAVE_LDFLAGS="$LDFLAGS -Wl,--icf=safe"
        LDFLAGS="$LDFLAGS -Wl,--icf=safe -Wl,--print-icf-sections"
        cat > conftest.$ac_ext <<EOF
#line 5872 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:5879: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  LD_PRINT_ICF_SECTIONS=-Wl,--print-icf-sections
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  LD_PRINT_ICF_SECTIONS=
fi
rm -f conftest*
        
        LDFLAGS="$_SAVE_LDFLAGS"
    fi
fi


if test "$GNU_CC" -a "$GCC_USE_GNU_LD" -a -z "$DEVELOPER_OPTIONS"; then
    if test -n "$MOZ_DEBUG_FLAGS"; then
                echo $ac_n "checking whether removing dead symbols breaks debugging""... $ac_c" 1>&6
echo "configure:5898: checking whether removing dead symbols breaks debugging" >&5
if eval "test \"`echo '$''{'GC_SECTIONS_BREAKS_DEBUG_RANGES'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'int foo() {return 42;}' \
                  'int bar() {return 1;}' \
                  'int main() {return foo();}' > conftest.${ac_ext}
            if { ac_try='${CC-cc} -o conftest.${ac_objext} $CFLAGS $MOZ_DEBUG_FLAGS -c conftest.${ac_ext} 1>&2'; { (eval echo configure:5905: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
                { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS $MOZ_DEBUG_FLAGS -Wl,--gc-sections conftest.${ac_objext} $LIBS 1>&2'; { (eval echo configure:5906: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
                test -s conftest${ac_exeext} -a -s conftest.${ac_objext}; then
                 if test "`$PYTHON -m mozbuild.configure.check_debug_ranges conftest.${ac_objext} conftest.${ac_ext}`" = \
                         "`$PYTHON -m mozbuild.configure.check_debug_ranges conftest${ac_exeext} conftest.${ac_ext}`"; then
                     GC_SECTIONS_BREAKS_DEBUG_RANGES=no
                 else
                     GC_SECTIONS_BREAKS_DEBUG_RANGES=yes
                 fi
             else
                                    GC_SECTIONS_BREAKS_DEBUG_RANGES="no, but it's broken in some other way"
             fi
             rm -rf conftest*
fi

echo "$ac_t""$GC_SECTIONS_BREAKS_DEBUG_RANGES" 1>&6
         if test "$GC_SECTIONS_BREAKS_DEBUG_RANGES" = no; then
             DSO_LDOPTS="$DSO_LDOPTS -Wl,--gc-sections"
         fi
    else
        DSO_LDOPTS="$DSO_LDOPTS -Wl,--gc-sections"
    fi
fi

# bionic in Android < 4.1 doesn't support PIE
# On OSX, the linker defaults to building PIE programs when targetting OSX 10.7+,
# but not when targetting OSX < 10.7. OSX < 10.7 doesn't support running PIE
# programs, so as long as support for OSX 10.6 is kept, we can't build PIE.
# Even after dropping 10.6 support, MOZ_PIE would not be useful since it's the
# default (and clang says the -pie option is not used).
# On other Unix systems, some file managers (Nautilus) can't start PIE programs
if test -n "$gonkdir" && test "$ANDROID_VERSION" -ge 16; then
    MOZ_PIE=1
else
    MOZ_PIE=
fi

# Check whether --enable-pie or --disable-pie was given.
if test "${enable_pie+set}" = set; then
  enableval="$enable_pie"
  if test "$enableval" = "yes"; then
    MOZ_PIE=1
  elif test "$enableval" = "no"; then
    MOZ_PIE= 
  else
    { echo "configure: error: Option, pie, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, pie, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test "$GNU_CC" -a -n "$MOZ_PIE"; then
    echo $ac_n "checking for PIE support""... $ac_c" 1>&6
echo "configure:5957: checking for PIE support" >&5
    _SAVE_LDFLAGS=$LDFLAGS
    LDFLAGS="$LDFLAGS $DSO_PIC_CFLAGS -pie"
    cat > conftest.$ac_ext <<EOF
#line 5961 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:5968: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                  MOZ_PROGRAM_LDFLAGS="$MOZ_PROGRAM_LDFLAGS -pie"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
                  { echo "configure: error: --enable-pie requires PIE support from the linker." 1>&2; echo "configure: error: --enable-pie requires PIE support from the linker." 1>&5; exit 1; }
fi
rm -f conftest*
    LDFLAGS=$_SAVE_LDFLAGS
fi



if test -n "$GCC_USE_GNU_LD"; then
  case "$LDFLAGS" in
  *-fsanitize=address*)
    LDFLAGS="$LDFLAGS -Wl,-Bsymbolic"
    ;;
  esac
fi


fi # COMPILE_ENVIRONMENT

if test -z "$SKIP_COMPILER_CHECKS"; then
echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:5998: checking for working const" >&5
if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6003 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:6052: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' const ''', r'''  ''')
EOF
cat >> confdefs.h <<\EOF
#define const 
EOF

fi



echo $ac_n "checking for mode_t""... $ac_c" 1>&6
echo "configure:6078: checking for mode_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_mode_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6083 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])mode_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_mode_t=yes
else
  rm -rf conftest*
  ac_cv_type_mode_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_mode_t" 1>&6
if test $ac_cv_type_mode_t = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' mode_t ''', r''' int ''')
EOF
cat >> confdefs.h <<\EOF
#define mode_t int
EOF

fi



echo $ac_n "checking for off_t""... $ac_c" 1>&6
echo "configure:6116: checking for off_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_off_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6121 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])off_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_off_t=yes
else
  rm -rf conftest*
  ac_cv_type_off_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_off_t" 1>&6
if test $ac_cv_type_off_t = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' off_t ''', r''' long ''')
EOF
cat >> confdefs.h <<\EOF
#define off_t long
EOF

fi



echo $ac_n "checking for pid_t""... $ac_c" 1>&6
echo "configure:6154: checking for pid_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_pid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6159 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])pid_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_pid_t=yes
else
  rm -rf conftest*
  ac_cv_type_pid_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_pid_t" 1>&6
if test $ac_cv_type_pid_t = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' pid_t ''', r''' int ''')
EOF
cat >> confdefs.h <<\EOF
#define pid_t int
EOF

fi



echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:6192: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6197 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.pytmp <<\EOF
    (''' size_t ''', r''' unsigned ''')
EOF
cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross



ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

if test "$GNU_CXX"; then
    echo $ac_n "checking whether 64-bits std::atomic requires -latomic""... $ac_c" 1>&6
echo "configure:6260: checking whether 64-bits std::atomic requires -latomic" >&5
if eval "test \"`echo '$''{'ac_cv_needs_atomic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6265 "configure"
#include "confdefs.h"
#include <cstdint>
             #include <atomic>
int main() {
 std::atomic<uint64_t> foo; foo = 1; 
; return 0; }
EOF
if { (eval echo configure:6273: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_needs_atomic=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _SAVE_LIBS="$LIBS"
            LIBS="$LIBS -latomic"
            cat > conftest.$ac_ext <<EOF
#line 6283 "configure"
#include "confdefs.h"
#include <cstdint>
                 #include <atomic>
int main() {
 std::atomic<uint64_t> foo; foo = 1; 
; return 0; }
EOF
if { (eval echo configure:6291: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_needs_atomic=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_needs_atomic="do not know; assuming no"
fi
rm -f conftest*
            LIBS="$_SAVE_LIBS"
        
fi
rm -f conftest*
    
fi

echo "$ac_t""$ac_cv_needs_atomic" 1>&6
    if test "$ac_cv_needs_atomic" = yes; then
      MOZ_NEEDS_LIBATOMIC=1
    else
      MOZ_NEEDS_LIBATOMIC=
    fi
    
fi
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross



ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


case "${OS_TARGET}" in
*)
  STL_FLAGS="-I${DIST}/stl_wrappers"
  WRAP_STL_INCLUDES=1
  ;;
esac

ac_header_dirent=no
for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
echo "configure:6345: checking for $ac_hdr that defines DIR" >&5
if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6350 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_hdr>
int main() {
DIR *dirp = 0;
; return 0; }
EOF
if { (eval echo configure:6358: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_dirent_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 ac_header_dirent=$ac_hdr; break
else
  echo "$ac_t""no" 1>&6
fi
done
# Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
if test $ac_header_dirent = dirent.h; then
echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
echo "configure:6386: checking for opendir in -ldir" >&5
ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldir  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 6394 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:6405: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -ldir"
else
  echo "$ac_t""no" 1>&6
fi

else
echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
echo "configure:6427: checking for opendir in -lx" >&5
ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lx  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 6435 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:6446: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -lx"
else
  echo "$ac_t""no" 1>&6
fi

fi

case "$target_os" in
bitrig*|dragonfly*|freebsd*|openbsd*)
# for stuff like -lXshm
    CPPFLAGS="${CPPFLAGS} ${X_CFLAGS}"
    ;;
esac

echo $ac_n "checking for sockaddr_in.sin_len""... $ac_c" 1>&6
echo "configure:6476: checking for sockaddr_in.sin_len" >&5
if eval "test \"`echo '$''{'ac_cv_sockaddr_in_sin_len'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6481 "configure"
#include "confdefs.h"
#ifdef HAVE_SYS_TYPES_H
                                    #include <sys/types.h>
                                    #endif
                                    #include <netinet/in.h>
                                    struct sockaddr_in x;
                                    void *foo = (void*) &x.sin_len;
int main() {

; return 0; }
EOF
if { (eval echo configure:6493: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_sockaddr_in_sin_len=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_sockaddr_in_sin_len=false
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_sockaddr_in_sin_len" 1>&6
if test "$ac_cv_sockaddr_in_sin_len" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SIN_LEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SIN_LEN 1
EOF

  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SCONN_LEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SCONN_LEN 1
EOF

fi

echo $ac_n "checking for sockaddr_in6.sin6_len""... $ac_c" 1>&6
echo "configure:6524: checking for sockaddr_in6.sin6_len" >&5
if eval "test \"`echo '$''{'ac_cv_sockaddr_in6_sin6_len'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6529 "configure"
#include "confdefs.h"
#ifdef HAVE_SYS_TYPES_H
                                #include <sys/types.h>
                                #endif
                                #include <netinet/in.h>
                                struct sockaddr_in6 x;
                                void *foo = (void*) &x.sin6_len;
int main() {

; return 0; }
EOF
if { (eval echo configure:6541: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_sockaddr_in6_sin6_len=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_sockaddr_in6_sin6_len=false
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_sockaddr_in6_sin6_len" 1>&6
if test "$ac_cv_sockaddr_in6_sin6_len" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SIN6_LEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SIN6_LEN 1
EOF

fi

echo $ac_n "checking for sockaddr.sa_len""... $ac_c" 1>&6
echo "configure:6565: checking for sockaddr.sa_len" >&5
if eval "test \"`echo '$''{'ac_cv_sockaddr_sa_len'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6570 "configure"
#include "confdefs.h"
#ifdef HAVE_SYS_TYPES_H
                                #include <sys/types.h>
                                #endif
                                #include <sys/socket.h>
                                struct sockaddr x;
                                void *foo = (void*) &x.sa_len;
int main() {

; return 0; }
EOF
if { (eval echo configure:6582: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_sockaddr_sa_len=true
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_sockaddr_sa_len=false
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_sockaddr_sa_len" 1>&6
if test "$ac_cv_sockaddr_sa_len" = true ; then
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_SA_LEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SA_LEN 1
EOF

fi

# Check whether --enable-dtrace or --disable-dtrace was given.
if test "${enable_dtrace+set}" = set; then
  enableval="$enable_dtrace"
  if test "$enableval" = "yes"; then
    enable_dtrace="yes"
  elif test "$enableval" = "no"; then
    :
  else
    { echo "configure: error: Option, dtrace, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, dtrace, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test "x$enable_dtrace" = "xyes"; then
     ac_safe=`echo "sys/sdt.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for sys/sdt.h""... $ac_c" 1>&6
echo "configure:6620: checking for sys/sdt.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 6625 "configure"
#include "confdefs.h"

#include <sys/sdt.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:6633: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    HAVE_DTRACE=1
  else
    echo "$ac_t""no" 1>&6
    
  fi

  if test -n "$HAVE_DTRACE"; then
      cat >> confdefs.pytmp <<\EOF
    (''' INCLUDE_MOZILLA_DTRACE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define INCLUDE_MOZILLA_DTRACE 1
EOF

  else
      { echo "configure: error: dtrace enabled but sys/sdt.h not found" 1>&2; echo "configure: error: dtrace enabled but sys/sdt.h not found" 1>&5; exit 1; };
  fi
fi


echo $ac_n "checking for gethostbyname_r in -lc_r""... $ac_c" 1>&6
echo "configure:6668: checking for gethostbyname_r in -lc_r" >&5
ac_lib_var=`echo c_r'_'gethostbyname_r | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc_r  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 6676 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname_r();

int main() {
gethostbyname_r()
; return 0; }
EOF
if { (eval echo configure:6687: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo c_r | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_lib ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lc_r $LIBS"

else
  echo "$ac_t""no" 1>&6
fi


case $target in
*)
    
echo $ac_n "checking for library containing dlopen""... $ac_c" 1>&6
echo "configure:6722: checking for library containing dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_search_dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_func_search_save_LIBS="$LIBS"
ac_cv_search_dlopen="no"
cat > conftest.$ac_ext <<EOF
#line 6729 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:6740: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_dlopen="none required"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
test "$ac_cv_search_dlopen" = "no" && for i in dl; do
LIBS="-l$i  $ac_func_search_save_LIBS"
cat > conftest.$ac_ext <<EOF
#line 6751 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:6762: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_search_dlopen="-l$i"
break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done
LIBS="$ac_func_search_save_LIBS"
fi

echo "$ac_t""$ac_cv_search_dlopen" 1>&6
if test "$ac_cv_search_dlopen" != "no"; then
  test "$ac_cv_search_dlopen" = "none required" || LIBS="$ac_cv_search_dlopen $LIBS"
     ac_safe=`echo "dlfcn.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for dlfcn.h""... $ac_c" 1>&6
echo "configure:6780: checking for dlfcn.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 6785 "configure"
#include "confdefs.h"

#include <dlfcn.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:6793: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_DLOPEN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF

  else
    echo "$ac_t""no" 1>&6
    
  fi

else :
  
fi
    ;;
esac

_SAVE_CFLAGS="$CFLAGS"
CFLAGS="$CFLAGS -D_GNU_SOURCE"
for ac_func in dladdr memmem
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:6830: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6835 "configure"
#define $ac_func innocuous_$ac_func
#include "confdefs.h"
#undef $ac_func
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#define $ac_func innocuous_$ac_func
#include <assert.h>
#undef $ac_func
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:6862: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

CFLAGS="$_SAVE_CFLAGS"

if test ! "$GNU_CXX"; then
    echo $ac_n "checking for demangle in -lC""... $ac_c" 1>&6
echo "configure:6893: checking for demangle in -lC" >&5
ac_lib_var=`echo C'_'demangle | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lC  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 6901 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char demangle();

int main() {
demangle()
; return 0; }
EOF
if { (eval echo configure:6912: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo C | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_lib ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lC $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

fi

echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
echo "configure:6945: checking for socket in -lsocket" >&5
ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 6953 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {
socket()
; return 0; }
EOF
if { (eval echo configure:6964: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo socket | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_lib ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lsocket $LIBS"

else
  echo "$ac_t""no" 1>&6
fi


XLDFLAGS="$X_LIBS"
XLIBS="$X_EXTRA_LIBS"

if test -n "$MOZ_X11"; then
    cat >> confdefs.pytmp <<EOF
    (''' FUNCPROTO ''', r''' 15 ''')
EOF
cat >> confdefs.h <<EOF
#define FUNCPROTO 15
EOF

    _SAVE_LDFLAGS="$LDFLAGS"
    _SAVE_LIBS="$LIBS"
    LDFLAGS="$XLDFLAGS $LDFLAGS"
    echo $ac_n "checking for XDrawLines in -lX11""... $ac_c" 1>&6
echo "configure:7010: checking for XDrawLines in -lX11" >&5
ac_lib_var=`echo X11'_'XDrawLines | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lX11 $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7018 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XDrawLines();

int main() {
XDrawLines()
; return 0; }
EOF
if { (eval echo configure:7029: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XLIBS="-lX11 $XLIBS"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lX11"
fi

    echo $ac_n "checking for XextAddDisplay in -lXext""... $ac_c" 1>&6
echo "configure:7051: checking for XextAddDisplay in -lXext" >&5
ac_lib_var=`echo Xext'_'XextAddDisplay | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXext $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7059 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XextAddDisplay();

int main() {
XextAddDisplay()
; return 0; }
EOF
if { (eval echo configure:7070: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XEXT_LIBS="-lXext"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lXext"
fi


    echo $ac_n "checking for XtFree in -lXt""... $ac_c" 1>&6
echo "configure:7093: checking for XtFree in -lXt" >&5
ac_lib_var=`echo Xt'_'XtFree | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7101 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XtFree();

int main() {
XtFree()
; return 0; }
EOF
if { (eval echo configure:7112: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   XT_LIBS="-lXt"
else
  echo "$ac_t""no" 1>&6

        unset ac_cv_lib_Xt_XtFree
        echo $ac_n "checking for IceFlush in -lICE""... $ac_c" 1>&6
echo "configure:7133: checking for IceFlush in -lICE" >&5
ac_lib_var=`echo ICE'_'IceFlush | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lICE $XT_LIBS $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7141 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char IceFlush();

int main() {
IceFlush()
; return 0; }
EOF
if { (eval echo configure:7152: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XT_LIBS="-lICE $XT_LIBS"
else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for SmcCloseConnection in -lSM""... $ac_c" 1>&6
echo "configure:7173: checking for SmcCloseConnection in -lSM" >&5
ac_lib_var=`echo SM'_'SmcCloseConnection | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lSM $XT_LIBS $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7181 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SmcCloseConnection();

int main() {
SmcCloseConnection()
; return 0; }
EOF
if { (eval echo configure:7192: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XT_LIBS="-lSM $XT_LIBS"
else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for XtFree in -lXt""... $ac_c" 1>&6
echo "configure:7213: checking for XtFree in -lXt" >&5
ac_lib_var=`echo Xt'_'XtFree | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXt $X_PRE_LIBS $XT_LIBS $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7221 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XtFree();

int main() {
XtFree()
; return 0; }
EOF
if { (eval echo configure:7232: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   XT_LIBS="-lXt $XT_LIBS"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lXt"
fi

        
fi


                echo $ac_n "checking for xcb_connect in -lxcb""... $ac_c" 1>&6
echo "configure:7258: checking for xcb_connect in -lxcb" >&5
ac_lib_var=`echo xcb'_'xcb_connect | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lxcb $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7266 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char xcb_connect();

int main() {
xcb_connect()
; return 0; }
EOF
if { (eval echo configure:7277: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XLIBS="-lxcb $XLIBS"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lxcb"
fi

    echo $ac_n "checking for xcb_shm_query_version in -lxcb-shm""... $ac_c" 1>&6
echo "configure:7299: checking for xcb_shm_query_version in -lxcb-shm" >&5
ac_lib_var=`echo xcb-shm'_'xcb_shm_query_version | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lxcb-shm $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7307 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char xcb_shm_query_version();

int main() {
xcb_shm_query_version()
; return 0; }
EOF
if { (eval echo configure:7318: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XLIBS="-lxcb-shm $XLIBS"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lxcb-shm"
fi

    echo $ac_n "checking for XGetXCBConnection in -lX11-xcb""... $ac_c" 1>&6
echo "configure:7340: checking for XGetXCBConnection in -lX11-xcb" >&5
ac_lib_var=`echo X11-xcb'_'XGetXCBConnection | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lX11-xcb $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7348 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XGetXCBConnection();

int main() {
XGetXCBConnection()
; return 0; }
EOF
if { (eval echo configure:7359: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XLIBS="-lX11-xcb $XLIBS"
else
  echo "$ac_t""no" 1>&6
MISSING_X="$MISSING_X -lX11-xcb"
fi


                   ac_safe=`echo "X11/extensions/scrnsaver.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for X11/extensions/scrnsaver.h""... $ac_c" 1>&6
echo "configure:7383: checking for X11/extensions/scrnsaver.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 7388 "configure"
#include "confdefs.h"

#include <X11/extensions/scrnsaver.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:7396: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    echo $ac_n "checking for XScreenSaverQueryInfo in -lXss""... $ac_c" 1>&6
echo "configure:7411: checking for XScreenSaverQueryInfo in -lXss" >&5
ac_lib_var=`echo Xss'_'XScreenSaverQueryInfo | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXss $XEXT_LIBS $XLIBS $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7419 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XScreenSaverQueryInfo();

int main() {
XScreenSaverQueryInfo()
; return 0; }
EOF
if { (eval echo configure:7430: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XSS_LIBS="-lXss $XEXT_LIBS $XLIBS"
             cat >> confdefs.pytmp <<\EOF
    (''' HAVE_LIBXSS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LIBXSS 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  else
    echo "$ac_t""no" 1>&6
    
  fi


    LDFLAGS="$_SAVE_LDFLAGS"
    LIBS="$_SAVE_LIBS"
fi # $MOZ_X11









echo $ac_n "checking for pthread_create in -lpthreads""... $ac_c" 1>&6
echo "configure:7476: checking for pthread_create in -lpthreads" >&5
ac_lib_var=`echo pthreads'_'pthread_create | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpthreads  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7484 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pthread_create();

int main() {
pthread_create()
; return 0; }
EOF
if { (eval echo configure:7495: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_USE_PTHREADS=1 _PTHREAD_LDFLAGS="-lpthreads"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for pthread_create in -lpthread""... $ac_c" 1>&6
echo "configure:7514: checking for pthread_create in -lpthread" >&5
ac_lib_var=`echo pthread'_'pthread_create | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpthread  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7522 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pthread_create();

int main() {
pthread_create()
; return 0; }
EOF
if { (eval echo configure:7533: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_USE_PTHREADS=1 _PTHREAD_LDFLAGS="-lpthread"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for pthread_create in -lc_r""... $ac_c" 1>&6
echo "configure:7552: checking for pthread_create in -lc_r" >&5
ac_lib_var=`echo c_r'_'pthread_create | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc_r  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7560 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pthread_create();

int main() {
pthread_create()
; return 0; }
EOF
if { (eval echo configure:7571: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_USE_PTHREADS=1 _PTHREAD_LDFLAGS="-lc_r"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for pthread_create in -lc""... $ac_c" 1>&6
echo "configure:7590: checking for pthread_create in -lc" >&5
ac_lib_var=`echo c'_'pthread_create | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 7598 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pthread_create();

int main() {
pthread_create()
; return 0; }
EOF
if { (eval echo configure:7609: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_USE_PTHREADS=1
            
else
  echo "$ac_t""no" 1>&6
fi

        
fi

    
fi


fi


# Check whether --with-pthreads or --without-pthreads was given.
if test "${with_pthreads+set}" = set; then
  withval="$with_pthreads"
  if test "$withval" = "yes"; then
     if test "$MOZ_USE_PTHREADS"x = x; then
    { echo "configure: error:  --with-pthreads specified for a system without pthread support " 1>&2; echo "configure: error:  --with-pthreads specified for a system without pthread support " 1>&5; exit 1; };
fi
  elif test "$withval" = "no"; then
    MOZ_USE_PTHREADS=
    _PTHREAD_LDFLAGS=

  else
    { echo "configure: error: Option, pthreads, does not take an argument ($withval)." 1>&2; echo "configure: error: Option, pthreads, does not take an argument ($withval)." 1>&5; exit 1; }
  fi
fi


if test "$MOZ_USE_PTHREADS"x != x
then
                rm -f conftest*
    ac_cv_have_dash_pthread=no
    echo $ac_n "checking whether ${CC-cc} accepts -pthread""... $ac_c" 1>&6
echo "configure:7662: checking whether ${CC-cc} accepts -pthread" >&5
    echo 'int main() { return 0; }' | cat > conftest.c
    ${CC-cc} -pthread -o conftest conftest.c > conftest.out 2>&1
    if test $? -eq 0; then
        if test -z "`egrep -i '(unrecognize|unknown)' conftest.out | grep pthread`" -a -z "`egrep -i '(error|incorrect)' conftest.out`" ; then
            ac_cv_have_dash_pthread=yes
            case "$target_os" in
            freebsd*)
# Freebsd doesn't use -pthread for compiles, it uses them for linking
                ;;
            *)
                CFLAGS="$CFLAGS -pthread"
                CXXFLAGS="$CXXFLAGS -pthread"
                ;;
            esac
        fi
    fi
    rm -f conftest*
    echo "$ac_t""$ac_cv_have_dash_pthread" 1>&6

                ac_cv_have_dash_pthreads=no
    if test "$ac_cv_have_dash_pthread" = "no"; then
        echo $ac_n "checking whether ${CC-cc} accepts -pthreads""... $ac_c" 1>&6
echo "configure:7685: checking whether ${CC-cc} accepts -pthreads" >&5
        echo 'int main() { return 0; }' | cat > conftest.c
        ${CC-cc} -pthreads -o conftest conftest.c > conftest.out 2>&1
        if test $? -eq 0; then
            if test -z "`egrep -i '(unrecognize|unknown)' conftest.out | grep pthreads`" -a -z "`egrep -i '(error|incorrect)' conftest.out`" ; then
                ac_cv_have_dash_pthreads=yes
                CFLAGS="$CFLAGS -pthreads"
                CXXFLAGS="$CXXFLAGS -pthreads"
            fi
        fi
        rm -f conftest*
        echo "$ac_t""$ac_cv_have_dash_pthreads" 1>&6
    fi

    case "$target" in
        *-*-freebsd*)
            cat >> confdefs.pytmp <<\EOF
    (''' _REENTRANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _REENTRANT 1
EOF

            cat >> confdefs.pytmp <<\EOF
    (''' _THREAD_SAFE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _THREAD_SAFE 1
EOF

                        if test "$ac_cv_have_dash_pthread" = "yes"; then
                _PTHREAD_LDFLAGS="-pthread"
            fi
            ;;

        *-*-openbsd*|*-*-bsdi*)
            cat >> confdefs.pytmp <<\EOF
    (''' _REENTRANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _REENTRANT 1
EOF

            cat >> confdefs.pytmp <<\EOF
    (''' _THREAD_SAFE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _THREAD_SAFE 1
EOF

                        if test "$ac_cv_have_dash_pthread" = "yes"; then
                _PTHREAD_LDFLAGS="-pthread"
            fi
            ;;

        *-*-linux*|*-*-kfreebsd*-gnu|*-*-gnu*)
            cat >> confdefs.pytmp <<\EOF
    (''' _REENTRANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define _REENTRANT 1
EOF

            ;;

    esac
    LDFLAGS="${_PTHREAD_LDFLAGS} ${LDFLAGS}"
    
     for ac_hdr in pthread.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:7757: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 7762 "configure"
#include "confdefs.h"

#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:7770: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    
  fi

  done

fi





if test $ac_cv_prog_gcc = yes; then
    echo $ac_n "checking whether ${CC-cc} needs -traditional""... $ac_c" 1>&6
echo "configure:7807: checking whether ${CC-cc} needs -traditional" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc_traditional'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    ac_pattern="Autoconf.*'x'"
  cat > conftest.$ac_ext <<EOF
#line 7813 "configure"
#include "confdefs.h"
#include <sgtty.h>
Autoconf TIOCGETP
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "$ac_pattern" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_prog_gcc_traditional=yes
else
  rm -rf conftest*
  ac_cv_prog_gcc_traditional=no
fi
rm -f conftest*


  if test $ac_cv_prog_gcc_traditional = no; then
    cat > conftest.$ac_ext <<EOF
#line 7831 "configure"
#include "confdefs.h"
#include <termio.h>
Autoconf TCGETA
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "$ac_pattern" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_prog_gcc_traditional=yes
fi
rm -f conftest*

  fi
fi

echo "$ac_t""$ac_cv_prog_gcc_traditional" 1>&6
  if test $ac_cv_prog_gcc_traditional = yes; then
    CC="$CC -traditional"
  fi
fi

echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
echo "configure:7853: checking for 8-bit clean memcmp" >&5
if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_func_memcmp_clean=no
else
  cat > conftest.$ac_ext <<EOF
#line 7861 "configure"
#include "confdefs.h"

main()
{
  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
}

EOF
if { (eval echo configure:7871: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_memcmp_clean=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_memcmp_clean=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"

for ac_func in stat64 lstat64 truncate64 statvfs64 statvfs statfs64 statfs getpagesize gmtime_r localtime_r arc4random arc4random_buf mallinfo gettid lchown setpriority strerror syscall
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:7891: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 7896 "configure"
#define $ac_func innocuous_$ac_func
#include "confdefs.h"
#undef $ac_func
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#define $ac_func innocuous_$ac_func
#include <assert.h>
#undef $ac_func
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:7923: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking for clock_gettime(CLOCK_MONOTONIC)""... $ac_c" 1>&6
echo "configure:7952: checking for clock_gettime(CLOCK_MONOTONIC)" >&5
if eval "test \"`echo '$''{'ac_cv_clock_monotonic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  for libs in "" -lrt; do
                    _SAVE_LIBS="$LIBS"
                    LIBS="$LIBS $libs"
                    cat > conftest.$ac_ext <<EOF
#line 7960 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
 struct timespec ts;
                                   clock_gettime(CLOCK_MONOTONIC, &ts); 
; return 0; }
EOF
if { (eval echo configure:7968: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_clock_monotonic=$libs
                                 LIBS="$_SAVE_LIBS"
                                 break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_clock_monotonic=no
fi
rm -f conftest*
                    LIBS="$_SAVE_LIBS"
                done
fi

echo "$ac_t""$ac_cv_clock_monotonic" 1>&6
if test "$ac_cv_clock_monotonic" != "no"; then
    HAVE_CLOCK_MONOTONIC=1
    REALTIME_LIBS=$ac_cv_clock_monotonic
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CLOCK_MONOTONIC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CLOCK_MONOTONIC 1
EOF

    
    
fi

echo $ac_n "checking for pthread_cond_timedwait_monotonic_np""... $ac_c" 1>&6
echo "configure:8000: checking for pthread_cond_timedwait_monotonic_np" >&5
if eval "test \"`echo '$''{'ac_cv_pthread_cond_timedwait_monotonic_np'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8005 "configure"
#include "confdefs.h"
#include <pthread.h>
int main() {
pthread_cond_timedwait_monotonic_np(0, 0, 0);
; return 0; }
EOF
if { (eval echo configure:8012: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_pthread_cond_timewait_monotonic_np=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_pthread_cond_timewait_monotonic_np=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_pthread_cond_timedwait_monotonic_np" 1>&6
if test "$ac_cv_pthread_cond_timewait_monotonic_np" != "no"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_PTHREAD_COND_TIMEDWAIT_MONOTONIC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_PTHREAD_COND_TIMEDWAIT_MONOTONIC 1
EOF

fi

if test -z "$MACOS_DEPLOYMENT_TARGET" || test "$MACOS_DEPLOYMENT_TARGET" -ge "100300"; then

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking for wcrtomb""... $ac_c" 1>&6
echo "configure:8045: checking for wcrtomb" >&5
if eval "test \"`echo '$''{'ac_cv_have_wcrtomb'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8050 "configure"
#include "confdefs.h"
#include <wchar.h>
int main() {
mbstate_t ps={0};wcrtomb(0,'f',&ps);
; return 0; }
EOF
if { (eval echo configure:8057: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_have_wcrtomb="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_wcrtomb="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_have_wcrtomb" 1>&6
if test "$ac_cv_have_wcrtomb" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_WCRTOMB ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_WCRTOMB 1
EOF

fi
echo $ac_n "checking for mbrtowc""... $ac_c" 1>&6
echo "configure:8080: checking for mbrtowc" >&5
if eval "test \"`echo '$''{'ac_cv_have_mbrtowc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8085 "configure"
#include "confdefs.h"
#include <wchar.h>
int main() {
mbstate_t ps={0};mbrtowc(0,0,0,&ps);
; return 0; }
EOF
if { (eval echo configure:8092: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_have_mbrtowc="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_mbrtowc="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_have_mbrtowc" 1>&6
if test "$ac_cv_have_mbrtowc" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_MBRTOWC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MBRTOWC 1
EOF

fi
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

fi

echo $ac_n "checking for res_ninit()""... $ac_c" 1>&6
echo "configure:8124: checking for res_ninit()" >&5
if eval "test \"`echo '$''{'ac_cv_func_res_ninit'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$OS_TARGET" = NetBSD -o "$OS_TARGET" = OpenBSD; then
                ac_cv_func_res_ninit=no
     else
        cat > conftest.$ac_ext <<EOF
#line 8132 "configure"
#include "confdefs.h"

            #ifdef linux
            #define _BSD_SOURCE 1
            #endif
            #include <sys/types.h>
            #include <netinet/in.h>
            #include <arpa/nameser.h>
            #include <resolv.h>
            
int main() {
int foo = res_ninit(&_res);
; return 0; }
EOF
if { (eval echo configure:8147: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_res_ninit=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_res_ninit=no
fi
rm -f conftest*
     fi
    
fi

echo "$ac_t""$ac_cv_func_res_ninit" 1>&6

if test "$ac_cv_func_res_ninit" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_RES_NINIT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_RES_NINIT 1
EOF

fi

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross


ICONV_LIBS=

echo $ac_n "checking for iconv in -lc""... $ac_c" 1>&6
echo "configure:8184: checking for iconv in -lc" >&5
ac_lib_var=`echo c'_'iconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 8192 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {
iconv()
; return 0; }
EOF
if { (eval echo configure:8206: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ICONV_LIBS=
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for iconv in -liconv""... $ac_c" 1>&6
echo "configure:8225: checking for iconv in -liconv" >&5
ac_lib_var=`echo iconv'_'iconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-liconv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 8233 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {
iconv()
; return 0; }
EOF
if { (eval echo configure:8247: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ICONV_LIBS="-liconv"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for libiconv in -liconv""... $ac_c" 1>&6
echo "configure:8266: checking for libiconv in -liconv" >&5
ac_lib_var=`echo iconv'_'libiconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-liconv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 8274 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {
libiconv()
; return 0; }
EOF
if { (eval echo configure:8288: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ICONV_LIBS="-liconv"
else
  echo "$ac_t""no" 1>&6
fi

fi

fi

_SAVE_LIBS=$LIBS
LIBS="$LIBS $ICONV_LIBS"
echo $ac_n "checking for iconv()""... $ac_c" 1>&6
echo "configure:8315: checking for iconv()" >&5
if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8320 "configure"
#include "confdefs.h"

        #include <stdlib.h>
        #include <iconv.h>
        
int main() {

            iconv_t h = iconv_open("", "");
            iconv(h, NULL, NULL, NULL, NULL);
            iconv_close(h);
        
; return 0; }
EOF
if { (eval echo configure:8334: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_iconv=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_iconv=no
        
fi
rm -f conftest*
    
fi

echo "$ac_t""$ac_cv_func_iconv" 1>&6
if test "$ac_cv_func_iconv" = "yes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ICONV ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ICONV 1
EOF

    LIBICONV="$ICONV_LIBS"
    echo $ac_n "checking for iconv() with const input""... $ac_c" 1>&6
echo "configure:8359: checking for iconv() with const input" >&5
if eval "test \"`echo '$''{'ac_cv_func_const_iconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8364 "configure"
#include "confdefs.h"

            #include <stdlib.h>
            #include <iconv.h>
            
int main() {

                const char *input = "testing";
                iconv_t h = iconv_open("", "");
                iconv(h, &input, NULL, NULL, NULL);
                iconv_close(h);
            
; return 0; }
EOF
if { (eval echo configure:8379: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_func_const_iconv=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_const_iconv=no
            
fi
rm -f conftest*
        
fi

echo "$ac_t""$ac_cv_func_const_iconv" 1>&6
    if test "$ac_cv_func_const_iconv" = "yes"; then
        cat >> confdefs.pytmp <<\EOF
    (''' HAVE_ICONV_WITH_CONST_INPUT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ICONV_WITH_CONST_INPUT 1
EOF

    fi
fi
LIBS=$_SAVE_LIBS




  echo $ac_n "checking for nl_langinfo and CODESET""... $ac_c" 1>&6
echo "configure:8410: checking for nl_langinfo and CODESET" >&5
if eval "test \"`echo '$''{'am_cv_langinfo_codeset'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8415 "configure"
#include "confdefs.h"
#include <langinfo.h>
int main() {
char* cs = nl_langinfo(CODESET);
; return 0; }
EOF
if { (eval echo configure:8422: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  am_cv_langinfo_codeset=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  am_cv_langinfo_codeset=no
fi
rm -f conftest*
    
fi

echo "$ac_t""$am_cv_langinfo_codeset" 1>&6
  if test $am_cv_langinfo_codeset = yes; then
    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_LANGINFO_CODESET ''', r''' 1 ''')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LANGINFO_CODESET 1
EOF

      HAVE_LANGINFO_CODESET=1
  fi
  


ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


echo $ac_n "checking for an implementation of va_copy()""... $ac_c" 1>&6
echo "configure:8458: checking for an implementation of va_copy()" >&5
if eval "test \"`echo '$''{'ac_cv_va_copy'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8463 "configure"
#include "confdefs.h"
#include <stdarg.h>
                     #include <stdlib.h>
        void f (int i, ...) {
            va_list args1, args2;
            va_start (args1, i);
            va_copy (args2, args1);
            if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)
                exit (1);
            va_end (args1); va_end (args2);
        }
int main() {
f(0, 42); return 0
; return 0; }
EOF
if { (eval echo configure:8479: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_va_copy=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_va_copy=no
    
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_va_copy" 1>&6
echo $ac_n "checking whether va_list can be copied by value""... $ac_c" 1>&6
echo "configure:8495: checking whether va_list can be copied by value" >&5
if eval "test \"`echo '$''{'ac_cv_va_val_copy'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8500 "configure"
#include "confdefs.h"
#include <stdarg.h>
                     #include <stdlib.h>
        void f (int i, ...) {
            va_list args1, args2;
            va_start (args1, i);
            args2 = args1;
            if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)
                exit (1);
            va_end (args1); va_end (args2);
        }
int main() {
f(0, 42); return 0
; return 0; }
EOF
if { (eval echo configure:8516: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_va_val_copy=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_va_val_copy=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_va_val_copy" 1>&6
if test "x$ac_cv_va_copy" = "xyes"; then
    cat >> confdefs.pytmp <<\EOF
    (''' VA_COPY ''', r''' va_copy ''')
EOF
cat >> confdefs.h <<\EOF
#define VA_COPY va_copy
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' HAVE_VA_COPY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VA_COPY 1
EOF

fi

if test "x$ac_cv_va_val_copy" = "xno"; then
   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_VA_LIST_AS_ARRAY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VA_LIST_AS_ARRAY 1
EOF

fi

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross


ARM_ABI_PREFIX=
if test "$GNU_CC"; then
  if test "$CPU_ARCH" = "arm" ; then
    echo $ac_n "checking for ARM EABI""... $ac_c" 1>&6
echo "configure:8569: checking for ARM EABI" >&5
if eval "test \"`echo '$''{'ac_cv_gcc_arm_eabi'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8574 "configure"
#include "confdefs.h"

int main() {

#if defined(__ARM_EABI__)
  return 0;
#else
#error Not ARM EABI.
#endif
                        
; return 0; }
EOF
if { (eval echo configure:8587: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_gcc_arm_eabi="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_gcc_arm_eabi="no"
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_gcc_arm_eabi" 1>&6
    if test "$ac_cv_gcc_arm_eabi" = "yes"; then
        HAVE_ARM_EABI=1
        ARM_ABI_PREFIX=eabi-
    else
        ARM_ABI_PREFIX=oabi-
    fi
  fi

  TARGET_COMPILER_ABI="${TARGET_COMPILER_ABI-${ARM_ABI_PREFIX}gcc3}"
fi

echo $ac_n "checking whether the C++ \"using\" keyword resolves ambiguity""... $ac_c" 1>&6
echo "configure:8612: checking whether the C++ \"using\" keyword resolves ambiguity" >&5
if eval "test \"`echo '$''{'ac_cv_cpp_ambiguity_resolving_using'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8617 "configure"
#include "confdefs.h"
class X {
                                 public: int go(const X&) {return 3;}
                                         int jo(const X&) {return 3;}
                               };
                               class Y : public X {
                                 public:  int go(int) {return 2;}
                                          int jo(int) {return 2;}
                                          using X::jo;
                                 private: using X::go;
                               };
int main() {
X x; Y y; y.jo(x);
; return 0; }
EOF
if { (eval echo configure:8633: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_cpp_ambiguity_resolving_using=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cpp_ambiguity_resolving_using=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_cpp_ambiguity_resolving_using" 1>&6
if test "$ac_cv_cpp_ambiguity_resolving_using" = yes ; then
   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CPP_AMBIGUITY_RESOLVING_USING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CPP_AMBIGUITY_RESOLVING_USING 1
EOF

fi

echo $ac_n "checking for C++ dynamic_cast to void*""... $ac_c" 1>&6
echo "configure:8657: checking for C++ dynamic_cast to void*" >&5
if eval "test \"`echo '$''{'ac_cv_cpp_dynamic_cast_void_ptr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_cpp_dynamic_cast_void_ptr=no
else
  cat > conftest.$ac_ext <<EOF
#line 8665 "configure"
#include "confdefs.h"
#ifdef __cplusplus
extern "C" void exit(int);
#endif
class X { int i; public: virtual ~X() { } };
                            class Y { int j; public: virtual ~Y() { } };
                            class Z : public X, public Y { int k; };

                            int main() {
                                 Z mdo;
                                 X *subx = (X*)&mdo;
                                 Y *suby = (Y*)&mdo;
                                 return !((((void*)&mdo != (void*)subx) &&
                                           ((void*)&mdo == dynamic_cast<void*>(subx))) ||
                                          (((void*)&mdo != (void*)suby) &&
                                           ((void*)&mdo == dynamic_cast<void*>(suby))));
                            }
EOF
if { (eval echo configure:8684: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_cpp_dynamic_cast_void_ptr=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_cpp_dynamic_cast_void_ptr=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_cpp_dynamic_cast_void_ptr" 1>&6
if test "$ac_cv_cpp_dynamic_cast_void_ptr" = yes ; then
   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR 1
EOF

fi


# try harder, when checking for __thread support, see bug 521750 comment #33 and below
# We pass MOZ_OPTIMIZE_LDFLAGS to the linker because if dead_strip is
# enabled, the linker in xcode 4.1 will crash. Without this it would crash when
# linking XUL.
_SAVE_LDFLAGS=$LDFLAGS
LDFLAGS="$LDFLAGS $DSO_PIC_CFLAGS $DSO_LDOPTS $MOZ_OPTIMIZE_LDFLAGS"
echo $ac_n "checking for __thread keyword for TLS variables""... $ac_c" 1>&6
echo "configure:8717: checking for __thread keyword for TLS variables" >&5
if eval "test \"`echo '$''{'ac_cv_thread_keyword'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8722 "configure"
#include "confdefs.h"
__thread bool tlsIsMainThread = false;
int main() {
return tlsIsMainThread;
; return 0; }
EOF
if { (eval echo configure:8729: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_thread_keyword=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_thread_keyword=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_thread_keyword" 1>&6
LDFLAGS=$_SAVE_LDFLAGS
# The custom dynamic linker doesn't support TLS variables
MOZ_TLS=
if test "$ac_cv_thread_keyword" = yes -a "$MOZ_LINKER" != 1; then
  # mips builds fail with TLS variables because of a binutils bug.
  # See bug 528687
  # OpenBSD doesn't have TLS support, and the test succeeds with clang++
  case "${target}" in
    mips*-*)
      :
      ;;
    *-openbsd*)
      :
      ;;
    *)
      cat >> confdefs.pytmp <<\EOF
    (''' HAVE_THREAD_TLS_KEYWORD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_THREAD_TLS_KEYWORD 1
EOF

      MOZ_TLS=1
      ;;
  esac
fi

if test -n "$MOZ_LINKER"; then
  if test "$CPU_ARCH" = arm; then
        if test -n "$ARM_ARCH" && test "$ARM_ARCH" -lt 7; then
      LDFLAGS="$LDFLAGS -Wl,-z,max-page-size=0x4000 -Wl,-z,common-page-size=0x4000"
      _SUBDIR_LDFLAGS="$_SUBDIR_LDFLAGS -Wl,-z,max-page-size=0x4000 -Wl,-z,common-page-size=0x4000"
    fi
  fi

  LDFLAGS="$LDFLAGS -Wl,--hash-style=sysv"
fi

if test -n "$MOZ_LINKER" -a "$OS_TARGET" = "Android"; then
  echo $ac_n "checking whether the CRT objects have text relocations""... $ac_c" 1>&6
echo "configure:8782: checking whether the CRT objects have text relocations" >&5
if eval "test \"`echo '$''{'ac_cv_crt_has_text_relocations'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'int foo() { return 0; }' > conftest.cpp
     if { ac_try='${CXX-g++} -o conftest${DLL_SUFFIX} $CXXFLAGS $DSO_LDOPTS $LDFLAGS conftest.cpp $LIBS 1>&5'; { (eval echo configure:8787: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
        test -s conftest${DLL_SUFFIX}; then
       if ${TOOLCHAIN_PREFIX}readelf -d conftest${DLL_SUFFIX} | grep TEXTREL > /dev/null; then
         ac_cv_crt_has_text_relocations=yes
       else
         ac_cv_crt_has_text_relocations=no
       fi
     else
       { echo "configure: error: couldn't compile a simple C file" 1>&2; echo "configure: error: couldn't compile a simple C file" 1>&5; exit 1; }
     fi
     rm -rf conftest*
fi

echo "$ac_t""$ac_cv_crt_has_text_relocations" 1>&6
  if test "$ac_cv_crt_has_text_relocations" = yes; then
                            DSO_LDOPTS="$DSO_LDOPTS -nostartfiles"
    NSPR_LDFLAGS="$NSPR_LDFLAGS -nostartfiles"
  fi
fi


echo $ac_n "checking for __attribute__((always_inline))""... $ac_c" 1>&6
echo "configure:8809: checking for __attribute__((always_inline))" >&5
if eval "test \"`echo '$''{'ac_cv_attribute_always_inline'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8814 "configure"
#include "confdefs.h"
inline void f(void) __attribute__((always_inline));
int main() {

; return 0; }
EOF
if { (eval echo configure:8821: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_attribute_always_inline=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_attribute_always_inline=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_attribute_always_inline" 1>&6

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross



echo $ac_n "checking for LC_MESSAGES""... $ac_c" 1>&6
echo "configure:8845: checking for LC_MESSAGES" >&5
if eval "test \"`echo '$''{'ac_cv_i18n_lc_messages'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8850 "configure"
#include "confdefs.h"
#include <locale.h>
int main() {
int category = LC_MESSAGES;
; return 0; }
EOF
if { (eval echo configure:8857: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_i18n_lc_messages=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_i18n_lc_messages=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_i18n_lc_messages" 1>&6
if test "$ac_cv_i18n_lc_messages" = yes; then
   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_I18N_LC_MESSAGES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_I18N_LC_MESSAGES 1
EOF

fi

for ac_func in localeconv
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:8883: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8888 "configure"
#define $ac_func innocuous_$ac_func
#include "confdefs.h"
#undef $ac_func
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#define $ac_func innocuous_$ac_func
#include <assert.h>
#undef $ac_func
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:8915: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


fi # ! SKIP_COMPILER_CHECKS

if test -n "${COMPILE_ENVIRONMENT}"; then
  



MALLOC_HEADERS="malloc.h malloc_np.h malloc/malloc.h sys/malloc.h"
MALLOC_H=

for file in $MALLOC_HEADERS; do
     ac_safe=`echo "$file" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $file""... $ac_c" 1>&6
echo "configure:8956: checking for $file" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 8961 "configure"
#include "confdefs.h"

#include <$file>
int main() {

; return 0; }
EOF
if { (eval echo configure:8969: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    MALLOC_H=$file
  else
    echo "$ac_t""no" 1>&6
    
  fi

  if test "$MALLOC_H" != ""; then
    cat >> confdefs.pytmp <<EOF
    (''' MALLOC_H ''', r''' <$MALLOC_H> ''')
EOF
cat >> confdefs.h <<EOF
#define MALLOC_H <$MALLOC_H>
EOF

    break
  fi
done

for ac_func in strndup posix_memalign memalign
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:9004: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9009 "configure"
#define $ac_func innocuous_$ac_func
#include "confdefs.h"
#undef $ac_func
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#define $ac_func innocuous_$ac_func
#include <assert.h>
#undef $ac_func
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:9036: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


for ac_func in malloc_usable_size
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:9067: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9072 "configure"
#define $ac_func innocuous_$ac_func
#include "confdefs.h"
#undef $ac_func
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#define $ac_func innocuous_$ac_func
#include <assert.h>
#undef $ac_func
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:9099: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

MALLOC_USABLE_SIZE_CONST_PTR=const
if test -n "$HAVE_MALLOC_H"; then
  echo $ac_n "checking whether malloc_usable_size definition can use const argument""... $ac_c" 1>&6
echo "configure:9129: checking whether malloc_usable_size definition can use const argument" >&5
  cat > conftest.$ac_ext <<EOF
#line 9131 "configure"
#include "confdefs.h"
#include <malloc.h>
                  #include <stddef.h>
                  size_t malloc_usable_size(const void *ptr);
int main() {
return malloc_usable_size(0);
; return 0; }
EOF
if { (eval echo configure:9140: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
                  MALLOC_USABLE_SIZE_CONST_PTR=
fi
rm -f conftest*
fi
cat >> confdefs.pytmp <<EOF
    (''' MALLOC_USABLE_SIZE_CONST_PTR ''', r''' $MALLOC_USABLE_SIZE_CONST_PTR ''')
EOF
cat >> confdefs.h <<EOF
#define MALLOC_USABLE_SIZE_CONST_PTR $MALLOC_USABLE_SIZE_CONST_PTR
EOF



echo $ac_n "checking for valloc in malloc.h""... $ac_c" 1>&6
echo "configure:9162: checking for valloc in malloc.h" >&5
cat > conftest.$ac_ext <<EOF
#line 9164 "configure"
#include "confdefs.h"
#include <malloc.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "valloc" >/dev/null 2>&1; then
  rm -rf conftest*
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_VALLOC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VALLOC 1
EOF

                echo "$ac_t""yes" 1>&6
else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*


echo $ac_n "checking for valloc in unistd.h""... $ac_c" 1>&6
echo "configure:9187: checking for valloc in unistd.h" >&5
cat > conftest.$ac_ext <<EOF
#line 9189 "configure"
#include "confdefs.h"
#include <unistd.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "valloc" >/dev/null 2>&1; then
  rm -rf conftest*
  cat >> confdefs.pytmp <<\EOF
    (''' HAVE_VALLOC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VALLOC 1
EOF

                echo "$ac_t""yes" 1>&6
else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*




fi

TARGET_XPCOM_ABI=
if test -n "${CPU_ARCH}" -a -n "${TARGET_COMPILER_ABI}"; then
    TARGET_XPCOM_ABI="${CPU_ARCH}-${TARGET_COMPILER_ABI}"
    cat >> confdefs.pytmp <<EOF
    (''' TARGET_XPCOM_ABI ''', r''' "${TARGET_XPCOM_ABI}" ''')
EOF
cat >> confdefs.h <<EOF
#define TARGET_XPCOM_ABI "${TARGET_XPCOM_ABI}"
EOF

fi


if test -n "$SKIP_COMPILER_CHECKS"; then
      cat >> confdefs.pytmp <<\EOF
    (''' MALLOC_H ''', r''' <malloc.h> ''')
EOF
cat >> confdefs.h <<\EOF
#define MALLOC_H <malloc.h>
EOF

   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_FORCEINLINE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_FORCEINLINE 1
EOF

   cat >> confdefs.pytmp <<\EOF
    (''' HAVE_LOCALECONV ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LOCALECONV 1
EOF

fi # SKIP_COMPILER_CHECKS


# External Packages

case "$OS_TARGET" in
WINNT)
  MOZ_FOLD_LIBS=1
  ;;
*)
  MOZ_FOLD_LIBS=
  ;;
esac






# Check whether --with-nspr-cflags or --without-nspr-cflags was given.
if test "${with_nspr_cflags+set}" = set; then
  withval="$with_nspr_cflags"
  NSPR_CFLAGS=$withval
fi

# Check whether --with-nspr-libs or --without-nspr-libs was given.
if test "${with_nspr_libs+set}" = set; then
  withval="$with_nspr_libs"
  NSPR_LIBS=$withval
fi



    # Check whether --enable-nspr-build or --disable-nspr-build was given.
if test "${enable_nspr_build+set}" = set; then
  enableval="$enable_nspr_build"
  if test "$enableval" = "yes"; then
    MOZ_BUILD_NSPR=1
  elif test "$enableval" = "no"; then
    MOZ_BUILD_NSPR=
  else
    { echo "configure: error: Option, nspr-build, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, nspr-build, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi



if test "$MOZ_BUILD_APP" != js || test -n "$JS_STANDALONE"; then
  _IS_OUTER_CONFIGURE=1
fi

JS_POSIX_NSPR=unset

    if test -n "$JS_STANDALONE"; then
      case "$target" in
        *linux*|*darwin*|*dragonfly*|*freebsd*|*netbsd*|*openbsd*)
          if test -z "$_HAS_NSPR"; then
            JS_POSIX_NSPR_DEFAULT=1
          fi
          ;;
      esac
    fi

    # Check whether --enable-posix-nspr-emulation or --disable-posix-nspr-emulation was given.
if test "${enable_posix_nspr_emulation+set}" = set; then
  enableval="$enable_posix_nspr_emulation"
  if test "$enableval" = "yes"; then
    JS_POSIX_NSPR=1
  elif test "$enableval" = "no"; then
    JS_POSIX_NSPR=
  else
    { echo "configure: error: Option, posix-nspr-emulation, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, posix-nspr-emulation, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi




echo $ac_n "checking NSPR selection""... $ac_c" 1>&6
echo "configure:9329: checking NSPR selection" >&5
nspr_opts=
which_nspr=default
if test -n "$NSPR_CFLAGS" -o -n "$NSPR_LIBS"; then
    nspr_opts="x$nspr_opts"
    which_nspr="command-line"
fi
if test -n "$MOZ_BUILD_NSPR"; then
    nspr_opts="x$nspr_opts"
    which_nspr="source-tree"
fi
if test "$JS_POSIX_NSPR" = unset; then
    JS_POSIX_NSPR=
else
    nspr_opts="x$nspr_opts"
    which_nspr="posix-wrapper"
fi

if test -z "$nspr_opts"; then
    if test "$MOZ_BUILD_APP" != js; then
            MOZ_BUILD_NSPR=1
      which_nspr="source-tree"
    else
                  JS_POSIX_NSPR="$JS_POSIX_NSPR_DEFAULT"
      if test -z "$JS_POSIX_NSPR"; then
        MOZ_BUILD_NSPR=1
        which_nspr="source-tree"
      else
        which_nspr="posix-wrapper"
      fi
   fi
fi

if test -z "$nspr_opts" || test "$nspr_opts" = x; then
    echo "$ac_t""$which_nspr" 1>&6
else
    { echo "configure: error: only one way of using NSPR may be selected. See 'configure --help'." 1>&2; echo "configure: error: only one way of using NSPR may be selected. See 'configure --help'." 1>&5; exit 1; }
fi



if test "$MOZ_BUILD_APP" = js; then
  if test "$JS_POSIX_NSPR" = 1; then
    cat >> confdefs.pytmp <<\EOF
    (''' JS_POSIX_NSPR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define JS_POSIX_NSPR 1
EOF

  fi
  
fi

# A (sub)configure invoked by the toplevel configure will always receive
# --with-nspr-libs on the command line. It will never need to figure out
# anything itself.
if test -n "$_IS_OUTER_CONFIGURE"; then

if test -n "$NSPR_CFLAGS" -o -n "$NSPR_LIBS"; then
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS $NSPR_CFLAGS"
    cat > conftest.$ac_ext <<EOF
#line 9392 "configure"
#include "confdefs.h"
#include "prtypes.h"
int main() {
#ifndef PR_STATIC_ASSERT
                 #error PR_STATIC_ASSERT not defined or requires including prtypes.h
                 #endif
; return 0; }
EOF
if { (eval echo configure:9401: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: system NSPR does not support PR_STATIC_ASSERT or including prtypes.h does not provide it" 1>&2; echo "configure: error: system NSPR does not support PR_STATIC_ASSERT or including prtypes.h does not provide it" 1>&5; exit 1; }
fi
rm -f conftest*
    cat > conftest.$ac_ext <<EOF
#line 9411 "configure"
#include "confdefs.h"
#include "prtypes.h"
int main() {
#ifndef PR_UINT64
                 #error PR_UINT64 not defined or requires including prtypes.h
                 #endif
; return 0; }
EOF
if { (eval echo configure:9420: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: system NSPR does not support PR_UINT64 or including prtypes.h does not provide it" 1>&2; echo "configure: error: system NSPR does not support PR_UINT64 or including prtypes.h does not provide it" 1>&5; exit 1; }
fi
rm -f conftest*
    CFLAGS=$_SAVE_CFLAGS
elif test -z "$JS_POSIX_NSPR"; then
    NSPR_INCLUDE_DIR="${DIST}/include/nspr"
    NSPR_CFLAGS="-I${NSPR_INCLUDE_DIR}"
    if test -n "$GNU_CC"; then
        if test -n "$MOZ_FOLD_LIBS"; then
           NSPR_LIB_DIR=${DIST}/lib
        else
           NSPR_LIB_DIR=${DIST}/bin
        fi
        NSPR_LIBS="-L${NSPR_LIB_DIR} -lnspr${NSPR_VERSION} -lplc${NSPR_VERSION} -lplds${NSPR_VERSION}"
    else
        # NSS needs actual static libs to link to, and this is where they are.
        NSPR_LIBS="${DIST}/lib/nspr${NSPR_VERSION}.lib ${DIST}/lib/plc${NSPR_VERSION}.lib ${DIST}/lib/plds${NSPR_VERSION}.lib "
        NSPR_LIB_DIR="${DIST}/lib"
    fi
fi





PKGCONF_REQUIRES_PRIVATE="Requires.private: nspr"
if test -n "$JS_POSIX_NSPR"; then
    PKGCONF_REQUIRES_PRIVATE=
fi


fi # _IS_OUTER_CONFIGURE



# TODO: We need to find a better place to define this include
NSS_CFLAGS="-I${DIST}/include/nss"


if test -z "$SKIP_LIBRARY_CHECKS"; then
# Check whether --with-system-jpeg or --without-system-jpeg was given.
if test "${with_system_jpeg+set}" = set; then
  withval="$with_system_jpeg"
  JPEG_DIR=$withval
fi


_SAVE_CFLAGS=$CFLAGS
_SAVE_LDFLAGS=$LDFLAGS
_SAVE_LIBS=$LIBS
if test -n "${JPEG_DIR}" -a "${JPEG_DIR}" != "yes"; then
    CFLAGS="-I${JPEG_DIR}/include $CFLAGS"
    LDFLAGS="-L${JPEG_DIR}/lib $LDFLAGS"
fi
if test -z "$JPEG_DIR" -o "$JPEG_DIR" = no; then
    MOZ_SYSTEM_JPEG=
else
    echo $ac_n "checking for jpeg_destroy_compress in -ljpeg""... $ac_c" 1>&6
echo "configure:9484: checking for jpeg_destroy_compress in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_destroy_compress | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 9492 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_destroy_compress();

int main() {
jpeg_destroy_compress()
; return 0; }
EOF
if { (eval echo configure:9503: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_SYSTEM_JPEG=1 MOZ_JPEG_LIBS="-ljpeg"
else
  echo "$ac_t""no" 1>&6
MOZ_SYSTEM_JPEG=
fi

fi

if test "$MOZ_SYSTEM_JPEG" = 1; then
    cat > conftest.$ac_ext <<EOF
#line 9528 "configure"
#include "confdefs.h"
 #include <stdio.h>
                     #include <sys/types.h>
                     #include <jpeglib.h> 
int main() {
 #if JPEG_LIB_VERSION < $MOZJPEG
                     #error "Insufficient JPEG library version ($MOZJPEG required)."
                     #endif
                     #ifndef JCS_EXTENSIONS
                     #error "libjpeg-turbo JCS_EXTENSIONS required"
                     #endif
                     
; return 0; }
EOF
if { (eval echo configure:9543: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_SYSTEM_JPEG=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: Insufficient JPEG library version for --with-system-jpeg" 1>&2; echo "configure: error: Insufficient JPEG library version for --with-system-jpeg" 1>&5; exit 1; }
fi
rm -f conftest*
fi
CFLAGS=$_SAVE_CFLAGS
LDFLAGS=$_SAVE_LDFLAGS
LIBS=$_SAVE_LIBS

if test -n "${JPEG_DIR}" -a -d "${JPEG_DIR}" -a "$MOZ_SYSTEM_JPEG" = 1; then
    MOZ_JPEG_CFLAGS="-I${JPEG_DIR}/include"
    MOZ_JPEG_LIBS="-L${JPEG_DIR}/lib ${MOZ_JPEG_LIBS}"
fi
fi # SKIP_LIBRARY_CHECKS



MOZZLIB=1.2.3

# Check whether --with-system-zlib or --without-system-zlib was given.
if test "${with_system_zlib+set}" = set; then
  withval="$with_system_zlib"
  ZLIB_DIR=$withval
fi


if test -z "$MOZ_ZLIB_LIBS$MOZ_ZLIB_CFLAGS$SKIP_LIBRARY_CHECKS"; then
    _SAVE_CFLAGS=$CFLAGS
    _SAVE_LDFLAGS=$LDFLAGS
    _SAVE_LIBS=$LIBS

    if test -n "${ZLIB_DIR}" -a "${ZLIB_DIR}" != "yes"; then
        MOZ_ZLIB_CFLAGS="-I${ZLIB_DIR}/include"
        MOZ_ZLIB_LIBS="-L${ZLIB_DIR}/lib"
        CFLAGS="$MOZ_ZLIB_CFLAGS $CFLAGS"
        LDFLAGS="$MOZ_ZLIB_LIBS $LDFLAGS"
    fi
    if test -z "$ZLIB_DIR" -o "$ZLIB_DIR" = no; then
        MOZ_SYSTEM_ZLIB=
    else
        echo $ac_n "checking for gzread in -lz""... $ac_c" 1>&6
echo "configure:9590: checking for gzread in -lz" >&5
ac_lib_var=`echo z'_'gzread | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 9598 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gzread();

int main() {
gzread()
; return 0; }
EOF
if { (eval echo configure:9609: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_SYSTEM_ZLIB=1 MOZ_ZLIB_LIBS="$MOZ_ZLIB_LIBS -lz"
else
  echo "$ac_t""no" 1>&6
MOZ_SYSTEM_ZLIB=
fi

        if test "$MOZ_SYSTEM_ZLIB" = 1; then
            MOZZLIBNUM=`echo $MOZZLIB | awk -F. '{printf "0x%x\n", ((($1 * 16 + $2) * 16) + $3) * 16 + $4}'`
            cat > conftest.$ac_ext <<EOF
#line 9633 "configure"
#include "confdefs.h"
 #include <stdio.h>
                             #include <string.h>
                             #include <zlib.h> 
int main() {
 #if ZLIB_VERNUM < $MOZZLIBNUM
                             #error "Insufficient zlib version ($MOZZLIBNUM required)."
                             #endif 
; return 0; }
EOF
if { (eval echo configure:9644: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_SYSTEM_ZLIB=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: Insufficient zlib version for --with-system-zlib ($MOZZLIB required)" 1>&2; echo "configure: error: Insufficient zlib version for --with-system-zlib ($MOZZLIB required)" 1>&5; exit 1; }
fi
rm -f conftest*
        fi
    fi
    CFLAGS=$_SAVE_CFLAGS
    LDFLAGS=$_SAVE_LDFLAGS
    LIBS=$_SAVE_LIBS
fi







if test "$MOZ_LINKER" = 1 -a "$MOZ_SYSTEM_ZLIB" != 1; then
    { echo "configure: error: Custom dynamic linker requires --with-system-zlib" 1>&2; echo "configure: error: Custom dynamic linker requires --with-system-zlib" 1>&5; exit 1; }
fi

if test -z "$SKIP_LIBRARY_CHECKS"; then
# Check whether --with-system-bz2 or --without-system-bz2 was given.
if test "${with_system_bz2+set}" = set; then
  withval="$with_system_bz2"
  BZ2_DIR=$withval
fi


_SAVE_CFLAGS=$CFLAGS
_SAVE_LDFLAGS=$LDFLAGS
_SAVE_LIBS=$LIBS
if test -n "${BZ2_DIR}" -a "${BZ2_DIR}" != "yes"; then
    CFLAGS="-I${BZ2_DIR}/include $CFLAGS"
    LDFLAGS="-L${BZ2_DIR}/lib $LDFLAGS"
fi
if test -z "$BZ2_DIR" -o "$BZ2_DIR" = no; then
    MOZ_SYSTEM_BZ2=
else
    echo $ac_n "checking for BZ2_bzread in -lbz2""... $ac_c" 1>&6
echo "configure:9690: checking for BZ2_bzread in -lbz2" >&5
ac_lib_var=`echo bz2'_'BZ2_bzread | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbz2  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 9698 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char BZ2_bzread();

int main() {
BZ2_bzread()
; return 0; }
EOF
if { (eval echo configure:9709: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  MOZ_SYSTEM_BZ2=1 MOZ_BZ2_LIBS="-lbz2"
else
  echo "$ac_t""no" 1>&6
MOZ_SYSTEM_BZ2= MOZ_BZ2_CFLAGS= MOZ_BZ2_LIBS=
fi

fi
CFLAGS=$_SAVE_CFLAGS
LDFLAGS=$_SAVE_LDFLAGS
LIBS=$_SAVE_LIBS

if test "${BZ2_DIR}" -a -d "${BZ2_DIR}" -a "$MOZ_SYSTEM_BZ2" = 1; then
    MOZ_BZ2_CFLAGS="-I${BZ2_DIR}/include"
    MOZ_BZ2_LIBS="-L${BZ2_DIR}/lib ${MOZ_BZ2_LIBS}"
fi

fi # SKIP_LIBRARY_CHECKS


# Application

ENABLE_TESTS=
ENABLE_SYSTEM_EXTENSION_DIRS=1
MOZ_BRANDING_DIRECTORY=
MOZ_OFFICIAL_BRANDING=
MC_OFFICIAL=
MOZ_FEEDS=1
MOZ_AUTH_EXTENSION=1
if test "$MOZ_IOS"; then
   MOZ_AUTH_EXTENSION=
fi
MOZ_RAW=
MOZ_AV1=
MOZ_VORBIS=
MOZ_TREMOR=
MOZ_SAMPLE_TYPE_FLOAT32=
MOZ_SAMPLE_TYPE_S16=
MOZ_WEBRTC=
MOZ_PEERCONNECTION=
MOZ_SRTP=
MOZ_WEBRTC_SIGNALING=
MOZ_WEBRTC_ASSERT_ALWAYS=1
MOZ_WEBRTC_HARDWARE_AEC_NS=
MOZ_SCTP=
MOZ_VPX_ERROR_CONCEALMENT=
VPX_USE_YASM=
VPX_ASFLAGS=
VPX_AS_CONVERSION=
VPX_X86_ASM=
VPX_ARM_ASM=
LIBJPEG_TURBO_AS=
LIBJPEG_TURBO_ASFLAGS=
MOZ_GAMEPAD=
MOZ_PREF_EXTENSIONS=1
MOZ_REFLOW_PERF=
MOZ_SAFE_BROWSING=
MOZ_SPELLCHECK=1
MOZ_TOOLKIT_SEARCH=1
MOZ_UI_LOCALE=en-US
MOZ_UNIVERSALCHARDET=1
MOZ_URL_CLASSIFIER=
MOZ_XUL=1
MOZ_ZIPWRITER=1
MOZ_NO_SMART_CARDS=
MOZ_NECKO_WIFI=1
NECKO_COOKIES=1
MOZ_USE_NATIVE_POPUP_WINDOWS=
MOZ_EXCLUDE_HYPHENATION_DICTIONARIES=
ACCESSIBILITY=1
MOZ_TIME_MANAGER=
MOZ_AUDIO_CHANNEL_MANAGER=
MOZ_JETPACK=1
MOZ_DEVTOOLS_SERVER=1
MOZ_DEVTOOLS=
MOZ_PLACES=1
MOZ_SECURITY_SQLSTORE=
MOZ_SERVICES_HEALTHREPORT=1
MOZ_SERVICES_SYNC=1
MOZ_USERINFO=1
NSS_DISABLE_DBM=
MOZ_MAILNEWS=
MOZ_MAILNEWS_OAUTH2=
MOZ_LDAP_XPCOM=
MOZ_MORK=
MOZ_MAPI_SUPPORT=
MOZ_INCOMPLETE_EXTERNAL_LINKAGE=
MOZ_CAN_DRAW_IN_TITLEBAR=

case "$target_os" in
    mingw*)
        NS_ENABLE_TSF=1
        cat >> confdefs.pytmp <<\EOF
    (''' NS_ENABLE_TSF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NS_ENABLE_TSF 1
EOF

        ;;
esac

# Check whether --enable-official-vendor or --disable-official-vendor was given.
if test "${enable_official_vendor+set}" = set; then
  enableval="$enable_official_vendor"
  if test "$enableval" = "yes"; then
    MC_OFFICIAL=1
  elif test "$enableval" = "no"; then
    MC_OFFICIAL=
  else
    { echo "configure: error: Option, official-vendor, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, official-vendor, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi



# Check whether --enable-official-branding or --disable-official-branding was given.
if test "${enable_official_branding+set}" = set; then
  enableval="$enable_official_branding"
  if test "$enableval" = "yes"; then
    MOZ_OFFICIAL_BRANDING=1
  elif test "$enableval" = "no"; then
    MOZ_OFFICIAL_BRANDING=
  else
    { echo "configure: error: Option, official-branding, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, official-branding, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


# Allow the application to influence configure with a confvars.sh script.
echo $ac_n "checking if app-specific confvars.sh exists""... $ac_c" 1>&6
echo "configure:9854: checking if app-specific confvars.sh exists" >&5
if test -f "${srcdir}/${MOZ_BUILD_APP}/confvars.sh" ; then
  echo "$ac_t""${srcdir}/${MOZ_BUILD_APP}/confvars.sh" 1>&6
  . "${srcdir}/${MOZ_BUILD_APP}/confvars.sh"
else
  echo "$ac_t""no" 1>&6
fi

# Allow someone to change MOZ_APP_NAME and MOZ_APP_BASENAME in mozconfig
# Check whether --with-app-name or --without-app-name was given.
if test "${with_app_name+set}" = set; then
  withval="$with_app_name"
  WITH_APP_NAME=$withval
fi


if test -n "$WITH_APP_NAME" ; then
    MOZ_APP_NAME="$WITH_APP_NAME"
fi

# Check whether --with-app-basename or --without-app-basename was given.
if test "${with_app_basename+set}" = set; then
  withval="$with_app_basename"
  WITH_APP_BASENAME=$withval
fi


if test -n "$WITH_APP_BASENAME" ; then
    MOZ_APP_BASENAME="$WITH_APP_BASENAME"
fi

# Toolkit Options


case "$MOZ_WIDGET_TOOLKIT" in

cocoa)
    LDFLAGS="$LDFLAGS -framework Cocoa -lobjc"
    # Use -Wl as a trick to avoid -framework and framework names from
    # being separated by AC_SUBST_LIST.
    TK_LIBS='-Wl,-framework,CoreLocation -Wl,-framework,QuartzCore -Wl,-framework,Carbon -Wl,-framework,CoreAudio -Wl,-framework,AudioToolbox -Wl,-framework,AudioUnit -Wl,-framework,AddressBook -Wl,-framework,OpenGL -Wl,-framework,Security -Wl,-framework,ServiceManagement'
    TK_CFLAGS=""
    CFLAGS="$CFLAGS $TK_CFLAGS"
    CXXFLAGS="$CXXFLAGS $TK_CFLAGS"
    MOZ_USER_DIR="Mozilla"
    MOZ_FS_LAYOUT=bundle
    ;;

uikit)
    LDFLAGS="$LDFLAGS -framework UIKit -lobjc"
    TK_CFLAGS=""
    TK_LIBS='-Wl,-framework,Foundation -Wl,-framework,CoreFoundation -Wl,-framework,CoreGraphics -Wl,-framework,CoreText -Wl,-framework,AVFoundation -Wl,-framework,AudioToolbox -Wl,-framework,CoreMedia -Wl,-framework,CoreVideo -Wl,-framework,OpenGLES -Wl,-framework,QuartzCore'
    CFLAGS="$CFLAGS $TK_CFLAGS"
    CXXFLAGS="$CXXFLAGS $TK_CFLAGS"
    MOZ_USER_DIR="Mozilla"
    MOZ_FS_LAYOUT=bundle
    ;;

esac

case "$MOZ_WIDGET_TOOLKIT" in
gtk*)
    MOZ_ENABLE_GTK=1
    ;;
esac

if test "$COMPILE_ENVIRONMENT"; then
  if test "$MOZ_WIDGET_TOOLKIT" = gtk3; then
    succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gtk+-3.0 >= $GTK3_VERSION gtk+-unix-print-3.0 glib-2.0 gobject-2.0 $GDK_PACKAGES""... $ac_c" 1>&6
echo "configure:9933: checking for gtk+-3.0 >= $GTK3_VERSION gtk+-unix-print-3.0 glib-2.0 gobject-2.0 $GDK_PACKAGES" >&5

        if $PKG_CONFIG --exists "gtk+-3.0 >= $GTK3_VERSION gtk+-unix-print-3.0 glib-2.0 gobject-2.0 $GDK_PACKAGES" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GTK3_CFLAGS""... $ac_c" 1>&6
echo "configure:9940: checking MOZ_GTK3_CFLAGS" >&5
            MOZ_GTK3_CFLAGS=`$PKG_CONFIG --cflags "gtk+-3.0 >= $GTK3_VERSION gtk+-unix-print-3.0 glib-2.0 gobject-2.0 $GDK_PACKAGES"`
            echo "$ac_t""$MOZ_GTK3_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GTK3_LIBS""... $ac_c" 1>&6
echo "configure:9945: checking MOZ_GTK3_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GTK3_LIBS="`$PKG_CONFIG --libs \"gtk+-3.0 >= $GTK3_VERSION gtk+-unix-print-3.0 glib-2.0 gobject-2.0 $GDK_PACKAGES\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GTK3_LIBS" 1>&6
        else
            MOZ_GTK3_CFLAGS=""
            MOZ_GTK3_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GTK3_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gtk+-3.0 >= $GTK3_VERSION gtk+-unix-print-3.0 glib-2.0 gobject-2.0 $GDK_PACKAGES"`
            echo $MOZ_GTK3_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (gtk+-3.0 >= $GTK3_VERSION gtk+-unix-print-3.0 glib-2.0 gobject-2.0 $GDK_PACKAGES) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (gtk+-3.0 >= $GTK3_VERSION gtk+-unix-print-3.0 glib-2.0 gobject-2.0 $GDK_PACKAGES) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

    MOZ_GTK3_CFLAGS="-I${_topsrcdir}/widget/gtk/compat-gtk3 $MOZ_GTK3_CFLAGS"
    TK_CFLAGS=$MOZ_GTK3_CFLAGS
    TK_LIBS=$MOZ_GTK3_LIBS
            cat >> confdefs.pytmp <<EOF
    (''' GDK_VERSION_MAX_ALLOWED ''', r''' $GDK_VERSION_MAX_ALLOWED ''')
EOF
cat >> confdefs.h <<EOF
#define GDK_VERSION_MAX_ALLOWED $GDK_VERSION_MAX_ALLOWED
EOF

    GLIB_VERSION_MAX_ALLOWED=GLIB_VERSION_2_32
  fi
  if test "$MOZ_WIDGET_TOOLKIT" = gtk2; then
    GLIB_VERSION_MAX_ALLOWED=$GLIB_VERSION_MIN_REQUIRED
  fi
  if test "$MOZ_ENABLE_GTK"; then
    if test "$MOZ_X11"; then
      GDK_PACKAGES=gdk-x11-2.0
    fi
    cat >> confdefs.pytmp <<EOF
    (''' GLIB_VERSION_MIN_REQUIRED ''', r''' $GLIB_VERSION_MIN_REQUIRED ''')
EOF
cat >> confdefs.h <<EOF
#define GLIB_VERSION_MIN_REQUIRED $GLIB_VERSION_MIN_REQUIRED
EOF

    cat >> confdefs.pytmp <<EOF
    (''' GLIB_VERSION_MAX_ALLOWED ''', r''' $GLIB_VERSION_MAX_ALLOWED ''')
EOF
cat >> confdefs.h <<EOF
#define GLIB_VERSION_MAX_ALLOWED $GLIB_VERSION_MAX_ALLOWED
EOF


    succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 >= $GLIB_VERSION gobject-2.0 $GDK_PACKAGES""... $ac_c" 1>&6
echo "configure:10019: checking for gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 >= $GLIB_VERSION gobject-2.0 $GDK_PACKAGES" >&5

        if $PKG_CONFIG --exists "gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 >= $GLIB_VERSION gobject-2.0 $GDK_PACKAGES" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GTK2_CFLAGS""... $ac_c" 1>&6
echo "configure:10026: checking MOZ_GTK2_CFLAGS" >&5
            MOZ_GTK2_CFLAGS=`$PKG_CONFIG --cflags "gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 >= $GLIB_VERSION gobject-2.0 $GDK_PACKAGES"`
            echo "$ac_t""$MOZ_GTK2_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GTK2_LIBS""... $ac_c" 1>&6
echo "configure:10031: checking MOZ_GTK2_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GTK2_LIBS="`$PKG_CONFIG --libs \"gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 >= $GLIB_VERSION gobject-2.0 $GDK_PACKAGES\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GTK2_LIBS" 1>&6
        else
            MOZ_GTK2_CFLAGS=""
            MOZ_GTK2_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GTK2_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 >= $GLIB_VERSION gobject-2.0 $GDK_PACKAGES"`
            echo $MOZ_GTK2_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 >= $GLIB_VERSION gobject-2.0 $GDK_PACKAGES) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (gtk+-2.0 >= $GTK2_VERSION gtk+-unix-print-2.0 glib-2.0 >= $GLIB_VERSION gobject-2.0 $GDK_PACKAGES) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

    MOZ_GTK2_CFLAGS="-I${_topsrcdir}/widget/gtk/compat $MOZ_GTK2_CFLAGS"
  fi
  if test "$MOZ_WIDGET_TOOLKIT" = gtk2; then
    TK_CFLAGS=$MOZ_GTK2_CFLAGS
    TK_LIBS=$MOZ_GTK2_LIBS
  fi
fi # COMPILE_ENVIRONMENT




if test "$MOZ_ENABLE_GTK"
then
    MOZ_ENABLE_STARTUP_NOTIFICATION=

    # Check whether --enable-startup-notification or --disable-startup-notification was given.
if test "${enable_startup_notification+set}" = set; then
  enableval="$enable_startup_notification"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_STARTUP_NOTIFICATION=force
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_STARTUP_NOTIFICATION=
  else
    { echo "configure: error: Option, startup-notification, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, startup-notification, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

    if test "$MOZ_ENABLE_STARTUP_NOTIFICATION"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION""... $ac_c" 1>&6
echo "configure:10100: checking for libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION" >&5

        if $PKG_CONFIG --exists "libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_STARTUP_NOTIFICATION_CFLAGS""... $ac_c" 1>&6
echo "configure:10107: checking MOZ_STARTUP_NOTIFICATION_CFLAGS" >&5
            MOZ_STARTUP_NOTIFICATION_CFLAGS=`$PKG_CONFIG --cflags "libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION"`
            echo "$ac_t""$MOZ_STARTUP_NOTIFICATION_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_STARTUP_NOTIFICATION_LIBS""... $ac_c" 1>&6
echo "configure:10112: checking MOZ_STARTUP_NOTIFICATION_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_STARTUP_NOTIFICATION_LIBS="`$PKG_CONFIG --libs \"libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_STARTUP_NOTIFICATION_LIBS" 1>&6
        else
            MOZ_STARTUP_NOTIFICATION_CFLAGS=""
            MOZ_STARTUP_NOTIFICATION_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_STARTUP_NOTIFICATION_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libstartup-notification-1.0 >= $STARTUP_NOTIFICATION_VERSION"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     MOZ_ENABLE_STARTUP_NOTIFICATION=1
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       
            if test "$MOZ_ENABLE_STARTUP_NOTIFICATION" = "force"
            then
                { echo "configure: error: * * * Could not find startup-notification >= $STARTUP_NOTIFICATION_VERSION" 1>&2; echo "configure: error: * * * Could not find startup-notification >= $STARTUP_NOTIFICATION_VERSION" 1>&5; exit 1; }
            fi
            MOZ_ENABLE_STARTUP_NOTIFICATION=
        
     fi
  fi

    fi

    if test "$MOZ_ENABLE_STARTUP_NOTIFICATION"; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_STARTUP_NOTIFICATION ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_STARTUP_NOTIFICATION 1
EOF

    fi

    TK_LIBS="$TK_LIBS $MOZ_STARTUP_NOTIFICATION_LIBS"
fi








# Components and Features

# Check whether --enable-ui-locale or --disable-ui-locale was given.
if test "${enable_ui_locale+set}" = set; then
  enableval="$enable_ui_locale"
  MOZ_UI_LOCALE=$enableval 
fi




if test -n "$MOZ_OFFICIAL_BRANDING"; then
  if test -z "$MOZ_OFFICIAL_BRANDING_DIRECTORY"; then
    { echo "configure: error: You must specify MOZ_OFFICIAL_BRANDING_DIRECTORY to use --enable-official-branding." 1>&2; echo "configure: error: You must specify MOZ_OFFICIAL_BRANDING_DIRECTORY to use --enable-official-branding." 1>&5; exit 1; }
  else
    MOZ_BRANDING_DIRECTORY=${MOZ_OFFICIAL_BRANDING_DIRECTORY}
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_OFFICIAL_BRANDING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_OFFICIAL_BRANDING 1
EOF

    MC_OFFICIAL=1
  fi
fi


if test -n "$MC_OFFICIAL"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MC_OFFICIAL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MC_OFFICIAL 1
EOF

fi

# Check whether --with-branding or --without-branding was given.
if test "${with_branding+set}" = set; then
  withval="$with_branding"
  MOZ_BRANDING_DIRECTORY=$withval
fi


REAL_BRANDING_DIRECTORY="${MOZ_BRANDING_DIRECTORY}"
if test -z "$REAL_BRANDING_DIRECTORY"; then
  REAL_BRANDING_DIRECTORY=${MOZ_BUILD_APP}/branding/nightly
fi

if test -f "${_topsrcdir}/$REAL_BRANDING_DIRECTORY/configure.sh"; then
  . "${_topsrcdir}/$REAL_BRANDING_DIRECTORY/configure.sh"
elif test -f "${EXTERNAL_SOURCE_DIR}/$REAL_BRANDING_DIRECTORY/configure.sh"; then
  . "${EXTERNAL_SOURCE_DIR}/$REAL_BRANDING_DIRECTORY/configure.sh"
fi



# Check whether --enable-private-build or --disable-private-build was given.
if test "${enable_private_build+set}" = set; then
  enableval="$enable_private_build"
  if test "$enableval" = "yes"; then
    MC_PRIVATE_BUILD=1
  elif test "$enableval" = "no"; then
    MC_PRIVATE_BUILD=
  else
    { echo "configure: error: Option, private-build, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, private-build, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi



if test -n "$MC_PRIVATE_BUILD"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MC_PRIVATE_BUILD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MC_PRIVATE_BUILD 1
EOF

fi

# Check whether --with-distribution-id or --without-distribution-id was given.
if test "${with_distribution_id+set}" = set; then
  withval="$with_distribution_id"
   val=`echo $withval`
    MOZ_DISTRIBUTION_ID="$val"
fi


if test -z "$MOZ_DISTRIBUTION_ID"; then
   MOZ_DISTRIBUTION_ID="org.mozilla"
fi

cat >> confdefs.pytmp <<EOF
    (''' MOZ_DISTRIBUTION_ID ''', r''' "$MOZ_DISTRIBUTION_ID" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_DISTRIBUTION_ID "$MOZ_DISTRIBUTION_ID"
EOF




if test "$MOZ_X11"
then
            if test "$MOZ_ENABLE_GTK"
    then
        MOZ_ENABLE_GIO=1
        MOZ_ENABLE_GCONF=1
    fi

                # Check whether --enable-gio or --disable-gio was given.
if test "${enable_gio+set}" = set; then
  enableval="$enable_gio"
  if test "$enableval" = "no"; then
    MOZ_ENABLE_GIO=
  elif test "$enableval" = "yes"; then
    MOZ_ENABLE_GIO=force
  else
    { echo "configure: error: Option, gio, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, gio, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_GIO" -a "$MOZ_ENABLE_GTK"
    then
        if test "$MOZ_WIDGET_TOOLKIT" = gtk2
        then
            succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gtk+-2.0 >= 2.14""... $ac_c" 1>&6
echo "configure:10309: checking for gtk+-2.0 >= 2.14" >&5

        if $PKG_CONFIG --exists "gtk+-2.0 >= 2.14" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking _GTKCHECK_CFLAGS""... $ac_c" 1>&6
echo "configure:10316: checking _GTKCHECK_CFLAGS" >&5
            _GTKCHECK_CFLAGS=`$PKG_CONFIG --cflags "gtk+-2.0 >= 2.14"`
            echo "$ac_t""$_GTKCHECK_CFLAGS" 1>&6

            echo $ac_n "checking _GTKCHECK_LIBS""... $ac_c" 1>&6
echo "configure:10321: checking _GTKCHECK_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            _GTKCHECK_LIBS="`$PKG_CONFIG --libs \"gtk+-2.0 >= 2.14\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$_GTKCHECK_LIBS" 1>&6
        else
            _GTKCHECK_CFLAGS=""
            _GTKCHECK_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            _GTKCHECK_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gtk+-2.0 >= 2.14"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: * * * Could not find gtk+-2.0 > 2.14. Required for build with gio." 1>&2; echo "configure: error: * * * Could not find gtk+-2.0 > 2.14. Required for build with gio." 1>&5; exit 1; }
     fi
  fi

        fi
        succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gio-2.0 >= $GIO_VERSION""... $ac_c" 1>&6
echo "configure:10362: checking for gio-2.0 >= $GIO_VERSION" >&5

        if $PKG_CONFIG --exists "gio-2.0 >= $GIO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GIO_CFLAGS""... $ac_c" 1>&6
echo "configure:10369: checking MOZ_GIO_CFLAGS" >&5
            MOZ_GIO_CFLAGS=`$PKG_CONFIG --cflags "gio-2.0 >= $GIO_VERSION"`
            echo "$ac_t""$MOZ_GIO_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GIO_LIBS""... $ac_c" 1>&6
echo "configure:10374: checking MOZ_GIO_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GIO_LIBS="`$PKG_CONFIG --libs \"gio-2.0 >= $GIO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GIO_LIBS" 1>&6
        else
            MOZ_GIO_CFLAGS=""
            MOZ_GIO_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GIO_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gio-2.0 >= $GIO_VERSION"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     
            MOZ_GIO_LIBS=`echo $MOZ_GIO_LIBS | sed 's/-llinc\>//'`
            MOZ_ENABLE_GIO=1
            cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_GIO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_GIO 1
EOF

        
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       
            if test "$MOZ_ENABLE_GIO" = "force"
            then
                { echo "configure: error: * * * Could not find gio-2.0 >= $GIO_VERSION" 1>&2; echo "configure: error: * * * Could not find gio-2.0 >= $GIO_VERSION" 1>&5; exit 1; }
            fi
            MOZ_ENABLE_GIO=
        
     fi
  fi

    fi

    

                # Check whether --enable-gconf or --disable-gconf was given.
if test "${enable_gconf+set}" = set; then
  enableval="$enable_gconf"
  if test "$enableval" = "no"; then
    MOZ_ENABLE_GCONF=
  elif test "$enableval" = "yes"; then
    MOZ_ENABLE_GCONF=1
  else
    { echo "configure: error: Option, gconf, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, gconf, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_GCONF"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for gconf-2.0 >= $GCONF_VERSION gobject-2.0 ""... $ac_c" 1>&6
echo "configure:10449: checking for gconf-2.0 >= $GCONF_VERSION gobject-2.0 " >&5

        if $PKG_CONFIG --exists "gconf-2.0 >= $GCONF_VERSION gobject-2.0 " ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GCONF_CFLAGS""... $ac_c" 1>&6
echo "configure:10456: checking MOZ_GCONF_CFLAGS" >&5
            MOZ_GCONF_CFLAGS=`$PKG_CONFIG --cflags "gconf-2.0 >= $GCONF_VERSION gobject-2.0 "`
            echo "$ac_t""$MOZ_GCONF_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GCONF_LIBS""... $ac_c" 1>&6
echo "configure:10461: checking MOZ_GCONF_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GCONF_LIBS="`$PKG_CONFIG --libs \"gconf-2.0 >= $GCONF_VERSION gobject-2.0 \" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GCONF_LIBS" 1>&6
        else
            MOZ_GCONF_CFLAGS=""
            MOZ_GCONF_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GCONF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "gconf-2.0 >= $GCONF_VERSION gobject-2.0 "`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     
            MOZ_GCONF_LIBS=`$PKG_CONFIG --libs gobject-2.0`
            MOZ_ENABLE_GCONF=1
        
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       
            if test -n "$MOZ_ENABLE_GCONF";
            then
                { echo "configure: error: * * * Could not find gconf-2.0 " 1>&2; echo "configure: error: * * * Could not find gconf-2.0 " 1>&5; exit 1; }
            else
                echo "configure: warning: Many automated tests will fail with --disable-gconf. See bug 1167201." 1>&2
            fi
        
     fi
  fi

    fi

    if test "$MOZ_ENABLE_GCONF"; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_GCONF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_GCONF 1
EOF

    fi

    
fi


if test "$MOZ_ENABLE_GTK"
then
    MOZ_ENABLE_LIBPROXY=

    # Check whether --enable-libproxy or --disable-libproxy was given.
if test "${enable_libproxy+set}" = set; then
  enableval="$enable_libproxy"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_LIBPROXY=1
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_LIBPROXY=
  else
    { echo "configure: error: Option, libproxy, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, libproxy, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_LIBPROXY"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libproxy-1.0""... $ac_c" 1>&6
echo "configure:10546: checking for libproxy-1.0" >&5

        if $PKG_CONFIG --exists "libproxy-1.0" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_LIBPROXY_CFLAGS""... $ac_c" 1>&6
echo "configure:10553: checking MOZ_LIBPROXY_CFLAGS" >&5
            MOZ_LIBPROXY_CFLAGS=`$PKG_CONFIG --cflags "libproxy-1.0"`
            echo "$ac_t""$MOZ_LIBPROXY_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_LIBPROXY_LIBS""... $ac_c" 1>&6
echo "configure:10558: checking MOZ_LIBPROXY_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_LIBPROXY_LIBS="`$PKG_CONFIG --libs \"libproxy-1.0\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_LIBPROXY_LIBS" 1>&6
        else
            MOZ_LIBPROXY_CFLAGS=""
            MOZ_LIBPROXY_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_LIBPROXY_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libproxy-1.0"`
            echo $MOZ_LIBPROXY_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (libproxy-1.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (libproxy-1.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_LIBPROXY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_LIBPROXY 1
EOF

    fi
fi



if test "$MOZ_ENABLE_GTK"
then
    # Check whether --enable-gnomeui or --disable-gnomeui was given.
if test "${enable_gnomeui+set}" = set; then
  enableval="$enable_gnomeui"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_GNOMEUI=force
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_GNOMEUI=
  else
    { echo "configure: error: Option, gnomeui, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, gnomeui, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_GNOMEUI"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libgnomeui-2.0 >= $GNOMEUI_VERSION""... $ac_c" 1>&6
echo "configure:10627: checking for libgnomeui-2.0 >= $GNOMEUI_VERSION" >&5

        if $PKG_CONFIG --exists "libgnomeui-2.0 >= $GNOMEUI_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_GNOMEUI_CFLAGS""... $ac_c" 1>&6
echo "configure:10634: checking MOZ_GNOMEUI_CFLAGS" >&5
            MOZ_GNOMEUI_CFLAGS=`$PKG_CONFIG --cflags "libgnomeui-2.0 >= $GNOMEUI_VERSION"`
            echo "$ac_t""$MOZ_GNOMEUI_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_GNOMEUI_LIBS""... $ac_c" 1>&6
echo "configure:10639: checking MOZ_GNOMEUI_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_GNOMEUI_LIBS="`$PKG_CONFIG --libs \"libgnomeui-2.0 >= $GNOMEUI_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_GNOMEUI_LIBS" 1>&6
        else
            MOZ_GNOMEUI_CFLAGS=""
            MOZ_GNOMEUI_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_GNOMEUI_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libgnomeui-2.0 >= $GNOMEUI_VERSION"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     
            MOZ_ENABLE_GNOMEUI=1
        
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       
            if test "$MOZ_ENABLE_GNOMEUI" = "force"
            then
                { echo "configure: error: * * * Could not find libgnomeui-2.0 >= $GNOMEUI_VERSION" 1>&2; echo "configure: error: * * * Could not find libgnomeui-2.0 >= $GNOMEUI_VERSION" 1>&5; exit 1; }
            fi
            MOZ_ENABLE_GNOMEUI=
        
     fi
  fi

    fi

    if test "$MOZ_ENABLE_GNOMEUI"; then
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_GNOMEUI ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_GNOMEUI 1
EOF

    fi
fi




if test "$MOZ_ENABLE_GTK"
then
    MOZ_ENABLE_DBUS=1

    # Check whether --enable-dbus or --disable-dbus was given.
if test "${enable_dbus+set}" = set; then
  enableval="$enable_dbus"
  if test "$enableval" = "no"; then
    MOZ_ENABLE_DBUS=
  elif test "$enableval" = "yes"; then
    MOZ_ENABLE_DBUS=1
  else
    { echo "configure: error: Option, dbus, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, dbus, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


    if test "$MOZ_ENABLE_DBUS"
    then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for dbus-1 >= $DBUS_VERSION""... $ac_c" 1>&6
echo "configure:10722: checking for dbus-1 >= $DBUS_VERSION" >&5

        if $PKG_CONFIG --exists "dbus-1 >= $DBUS_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_DBUS_CFLAGS""... $ac_c" 1>&6
echo "configure:10729: checking MOZ_DBUS_CFLAGS" >&5
            MOZ_DBUS_CFLAGS=`$PKG_CONFIG --cflags "dbus-1 >= $DBUS_VERSION"`
            echo "$ac_t""$MOZ_DBUS_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_DBUS_LIBS""... $ac_c" 1>&6
echo "configure:10734: checking MOZ_DBUS_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_DBUS_LIBS="`$PKG_CONFIG --libs \"dbus-1 >= $DBUS_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_DBUS_LIBS" 1>&6
        else
            MOZ_DBUS_CFLAGS=""
            MOZ_DBUS_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_DBUS_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "dbus-1 >= $DBUS_VERSION"`
            echo $MOZ_DBUS_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (dbus-1 >= $DBUS_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (dbus-1 >= $DBUS_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

        succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for dbus-glib-1 >= $DBUS_VERSION""... $ac_c" 1>&6
echo "configure:10774: checking for dbus-glib-1 >= $DBUS_VERSION" >&5

        if $PKG_CONFIG --exists "dbus-glib-1 >= $DBUS_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_DBUS_GLIB_CFLAGS""... $ac_c" 1>&6
echo "configure:10781: checking MOZ_DBUS_GLIB_CFLAGS" >&5
            MOZ_DBUS_GLIB_CFLAGS=`$PKG_CONFIG --cflags "dbus-glib-1 >= $DBUS_VERSION"`
            echo "$ac_t""$MOZ_DBUS_GLIB_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_DBUS_GLIB_LIBS""... $ac_c" 1>&6
echo "configure:10786: checking MOZ_DBUS_GLIB_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_DBUS_GLIB_LIBS="`$PKG_CONFIG --libs \"dbus-glib-1 >= $DBUS_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_DBUS_GLIB_LIBS" 1>&6
        else
            MOZ_DBUS_GLIB_CFLAGS=""
            MOZ_DBUS_GLIB_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_DBUS_GLIB_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "dbus-glib-1 >= $DBUS_VERSION"`
            echo $MOZ_DBUS_GLIB_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (dbus-glib-1 >= $DBUS_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (dbus-glib-1 >= $DBUS_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_DBUS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_DBUS 1
EOF

    fi
fi


if test -n "$MOZ_EXCLUDE_HYPHENATION_DICTIONARIES"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_EXCLUDE_HYPHENATION_DICTIONARIES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_EXCLUDE_HYPHENATION_DICTIONARIES 1
EOF

fi

# Check whether --enable-accessibility or --disable-accessibility was given.
if test "${enable_accessibility+set}" = set; then
  enableval="$enable_accessibility"
  if test "$enableval" = "no"; then
    ACCESSIBILITY=
  elif test "$enableval" = "yes"; then
    ACCESSIBILITY=1 
  else
    { echo "configure: error: Option, accessibility, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, accessibility, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test "$ACCESSIBILITY"; then
    case "$target" in
    *-mingw*)
        if test -z "$MIDL"; then
            if test "$GCC" != "yes"; then
                { echo "configure: error: MIDL could not be found. Building accessibility without MIDL is not supported." 1>&2; echo "configure: error: MIDL could not be found. Building accessibility without MIDL is not supported." 1>&5; exit 1; }
            else
                { echo "configure: error: You have accessibility enabled, but widl could not be found. Add --disable-accessibility to your mozconfig or install widl. See https://developer.mozilla.org/en-US/docs/Cross_Compile_Mozilla_for_Mingw32 for details." 1>&2; echo "configure: error: You have accessibility enabled, but widl could not be found. Add --disable-accessibility to your mozconfig or install widl. See https://developer.mozilla.org/en-US/docs/Cross_Compile_Mozilla_for_Mingw32 for details." 1>&5; exit 1; }
            fi
        fi
    esac
    cat >> confdefs.pytmp <<\EOF
    (''' ACCESSIBILITY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ACCESSIBILITY 1
EOF

fi

if test "${MOZ_WIDGET_TOOLKIT}" = "linuxgl" -a "$ACCESSIBILITY" != "1"; then
    { echo "configure: error: "Accessibility is required for the linuxgl widget backend"" 1>&2; echo "configure: error: "Accessibility is required for the linuxgl widget backend"" 1>&5; exit 1; }
fi

if test -n "$MOZ_WEBRTC"; then
    case "$target" in
    *-linux*|*-mingw*|*-dragonfly*|*-freebsd*|*-netbsd*|*-openbsd*)
                ;;
    *)
                MOZ_WEBRTC=
        ;;
    esac
fi

cat > conftest.$ac_ext <<EOF
#line 10883 "configure"
#include "confdefs.h"
#include <linux/ethtool.h>
int main() {
 struct ethtool_cmd cmd; cmd.speed_hi = 0; 
; return 0; }
EOF
if { (eval echo configure:10890: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  MOZ_WEBRTC_HAVE_ETHTOOL_SPEED_HI=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*



# target_arch is from {ia32|x64|arm|ppc}
case "$CPU_ARCH" in
x86_64 | arm | aarch64 | x86 | ppc* | ia64)
    :
    ;;
*)
# unsupported arch for webrtc
    MOZ_WEBRTC=
    ;;

esac

# Check whether --enable-dbm or --disable-dbm was given.
if test "${enable_dbm+set}" = set; then
  enableval="$enable_dbm"
  if test "$enableval" = "no"; then
    NSS_DISABLE_DBM=1
  elif test "$enableval" = "yes"; then
    NSS_DISABLE_DBM=
  else
    { echo "configure: error: Option, dbm, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, dbm, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$NSS_DISABLE_DBM"; then
  cat >> confdefs.pytmp <<\EOF
    (''' NSS_DISABLE_DBM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NSS_DISABLE_DBM 1
EOF

fi



# Check whether --enable-security-sqlstore or --disable-security-sqlstore was given.
if test "${enable_security_sqlstore+set}" = set; then
  enableval="$enable_security_sqlstore"
  if test "$enableval" = "yes"; then
    MOZ_SECURITY_SQLSTORE=1
  elif test "$enableval" = "no"; then
    MOZ_SECURITY_SQLSTORE=
  else
    { echo "configure: error: Option, security-sqlstore, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, security-sqlstore, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$NSS_DISABLE_DBM" -a -z "$MOZ_SECURITY_SQLSTORE"; then
  { echo "configure: error: DBM storage support is required if not using NSS SQL storage" 1>&2; echo "configure: error: DBM storage support is required if not using NSS SQL storage" 1>&5; exit 1; }
fi

if test -n "$MOZ_SECURITY_SQLSTORE"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SECURITY_SQLSTORE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SECURITY_SQLSTORE 1
EOF

fi



# Check whether --enable-incomplete-external-linkage or --disable-incomplete-external-linkage was given.
if test "${enable_incomplete_external_linkage+set}" = set; then
  enableval="$enable_incomplete_external_linkage"
  if test "$enableval" = "yes"; then
    MOZ_INCOMPLETE_EXTERNAL_LINKAGE=1
  elif test "$enableval" = "no"; then
    MOZ_INCOMPLETE_EXTERNAL_LINKAGE= 
  else
    { echo "configure: error: Option, incomplete-external-linkage, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, incomplete-external-linkage, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi




# Check whether --enable-mailnews or --disable-mailnews was given.
if test "${enable_mailnews+set}" = set; then
  enableval="$enable_mailnews"
  if test "$enableval" = "yes"; then
    MOZ_MAILNEWS=1
  elif test "$enableval" = "no"; then
    MOZ_MAILNEWS=
  else
    { echo "configure: error: Option, mailnews, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, mailnews, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_MAILNEWS"; then
    MOZ_MORK=1
    MOZ_LDAP_XPCOM=1

    if test "$OS_ARCH" == "WINNT"; then
        MOZ_MAPI_SUPPORT=1
    else
      MOZ_MOVEMAIL=1
      HAVE_MOVEMAIL=1
      cat >> confdefs.pytmp <<\EOF
    (''' HAVE_MOVEMAIL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MOVEMAIL 1
EOF

    fi

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MAILNEWS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MAILNEWS 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MORK ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MORK 1
EOF

fi





# Check whether --enable-mailnews-oauth2 or --disable-mailnews-oauth2 was given.
if test "${enable_mailnews_oauth2+set}" = set; then
  enableval="$enable_mailnews_oauth2"
  if test "$enableval" = "no"; then
    MOZ_MAILNEWS_OAUTH2=
  elif test "$enableval" = "yes"; then
    MOZ_MAILNEWS_OAUTH2=1
  else
    { echo "configure: error: Option, mailnews-oauth2, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, mailnews-oauth2, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_MAILNEWS_OAUTH2"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MAILNEWS_OAUTH2 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MAILNEWS_OAUTH2 1
EOF

fi



# Check whether --enable-ldap or --disable-ldap was given.
if test "${enable_ldap+set}" = set; then
  enableval="$enable_ldap"
  if test "$enableval" = "no"; then
    MOZ_LDAP_XPCOM= 
  elif test "$enableval" = "yes"; then
    :
  else
    { echo "configure: error: Option, ldap, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, ldap, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_LDAP_XPCOM"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_LDAP_XPCOM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_LDAP_XPCOM 1
EOF

fi




# Check whether --enable-mapi or --disable-mapi was given.
if test "${enable_mapi+set}" = set; then
  enableval="$enable_mapi"
  if test "$enableval" = "no"; then
    MOZ_MAPI_SUPPORT= 
  elif test "$enableval" = "yes"; then
    :
  else
    { echo "configure: error: Option, mapi, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, mapi, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_MAPI_SUPPORT"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MAPI_SUPPORT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MAPI_SUPPORT 1
EOF

fi



if test -n "$MOZ_CAN_DRAW_IN_TITLEBAR"; then
    case "$OS_TARGET" in
    WINNT)
        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CAN_DRAW_IN_TITLEBAR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CAN_DRAW_IN_TITLEBAR 1
EOF

        ;;
    *)
        { echo "configure: error: Drawing in the titlebar is only supported on Windows targets" 1>&2; echo "configure: error: Drawing in the titlebar is only supported on Windows targets" 1>&5; exit 1; }
        ;;
    esac
fi



# Check whether --enable-webrtc or --disable-webrtc was given.
if test "${enable_webrtc+set}" = set; then
  enableval="$enable_webrtc"
  if test "$enableval" = "yes"; then
    MOZ_WEBRTC=1
  elif test "$enableval" = "no"; then
    MOZ_WEBRTC=
  else
    { echo "configure: error: Option, webrtc, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, webrtc, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_WEBRTC"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBRTC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBRTC 1
EOF

            cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBRTC_ASSERT_ALWAYS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBRTC_ASSERT_ALWAYS 1
EOF

    MOZ_RAW=1
    MOZ_VPX_ERROR_CONCEALMENT=1

    MOZ_WEBRTC_SIGNALING=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBRTC_SIGNALING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBRTC_SIGNALING 1
EOF

    MOZ_PEERCONNECTION=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PEERCONNECTION ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PEERCONNECTION 1
EOF

    MOZ_SCTP=1
    MOZ_SRTP=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SCTP ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SCTP 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SRTP ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SRTP 1
EOF

    if test -n "$MOZ_X11"; then
      MOZ_WEBRTC_X11_LIBS="-lXext -lXdamage -lXfixes -lXcomposite"
    fi
else
    MOZ_SYNTH_PICO=
fi

# Check whether --enable-hardware-aec-ns or --disable-hardware-aec-ns was given.
if test "${enable_hardware_aec_ns+set}" = set; then
  enableval="$enable_hardware_aec_ns"
  if test "$enableval" = "yes"; then
    MOZ_WEBRTC_HARDWARE_AEC_NS=1
  elif test "$enableval" = "no"; then
    MOZ_WEBRTC_HARDWARE_AEC_NS=
  else
    { echo "configure: error: Option, hardware-aec-ns, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, hardware-aec-ns, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_WEBRTC_HARDWARE_AEC_NS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBRTC_HARDWARE_AEC_NS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBRTC_HARDWARE_AEC_NS 1
EOF

fi










if test "$OS_TARGET" = "Android" -o "$CPU_ARCH" = "arm"; then
    MOZ_SAMPLE_TYPE_S16=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SAMPLE_TYPE_S16 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SAMPLE_TYPE_S16 1
EOF

    
else
    MOZ_SAMPLE_TYPE_FLOAT32=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SAMPLE_TYPE_FLOAT32 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SAMPLE_TYPE_FLOAT32 1
EOF

    
fi

# Check whether --enable-raw or --disable-raw was given.
if test "${enable_raw+set}" = set; then
  enableval="$enable_raw"
  if test "$enableval" = "yes"; then
    MOZ_RAW=1
  elif test "$enableval" = "no"; then
    MOZ_RAW=
  else
    { echo "configure: error: Option, raw, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, raw, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_RAW"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_RAW ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_RAW 1
EOF

fi



# Check whether --enable-av1 or --disable-av1 was given.
if test "${enable_av1+set}" = set; then
  enableval="$enable_av1"
  if test "$enableval" = "yes"; then
    MOZ_AV1=1
  elif test "$enableval" = "no"; then
    MOZ_AV1=
  else
    { echo "configure: error: Option, av1, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, av1, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_AV1"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_AV1 ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_AV1 1
EOF

fi



if test "$COMPILE_ENVIRONMENT"; then
if test -n "$MOZ_APPLEMEDIA"; then
  # hack in frameworks for fmp4 - see bug 1029974
  # We load VideoToolbox and CoreMedia dynamically, so they don't appear here.
  LDFLAGS="$LDFLAGS -framework AudioToolbox"
    
ac_safe=`echo "CoreMedia/CoreMedia.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for CoreMedia/CoreMedia.h""... $ac_c" 1>&6
echo "configure:11310: checking for CoreMedia/CoreMedia.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11315 "configure"
#include "confdefs.h"
#include <CoreMedia/CoreMedia.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11320: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: MacOS X 10.7 SDK or later is required" 1>&2; echo "configure: error: MacOS X 10.7 SDK or later is required" 1>&5; exit 1; }
fi

fi
fi # COMPILE_ENVIRONMENT


# Check whether --enable-eme or --disable-eme was given.
if test "${enable_eme+set}" = set; then
  enableval="$enable_eme"
  if test "$enableval" = "yes"; then
    MOZ_EME=1
  elif test "$enableval" = "no"; then
    MOZ_EME=
  else
    { echo "configure: error: Option, eme, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, eme, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi



if test -n "$MOZ_EME"; then
    if test -z "$MOZ_FMP4"; then
        { echo "configure: error: Encrypted Media Extension support requires Fragmented MP4 support" 1>&2; echo "configure: error: Encrypted Media Extension support requires Fragmented MP4 support" 1>&5; exit 1; }
    fi
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_EME ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_EME 1
EOF

fi



MOZ_LIBVPX_CFLAGS=
MOZ_LIBVPX_LIBS=

if test -n "$MOZ_VPX_ERROR_CONCEALMENT" ; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VPX_ERROR_CONCEALMENT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VPX_ERROR_CONCEALMENT 1
EOF

fi




if test "$MOZ_SAMPLE_TYPE_FLOAT32"; then
    MOZ_VORBIS=1
else
    MOZ_TREMOR=1
fi

if test -z "$MOZ_SYSTEM_LIBVPX"; then

            
        case "$OS_ARCH:$CPU_ARCH" in
    WINNT:x86_64)
      VPX_USE_YASM=1
      VPX_X86_ASM=1
    ;;
    WINNT:x86)
            if test -n "$COMPILE_ENVIRONMENT" -a -z "$YASM"; then
        { echo "configure: error: yasm 1.1 or greater is required to build libvpx on Win32, but it appears not to be installed.  Install it (included in MozillaBuild 1.5.1 and newer) or configure with --disable-webm (which disables the WebM video format). See https://developer.mozilla.org/en/YASM for more details." 1>&2; echo "configure: error: yasm 1.1 or greater is required to build libvpx on Win32, but it appears not to be installed.  Install it (included in MozillaBuild 1.5.1 and newer) or configure with --disable-webm (which disables the WebM video format). See https://developer.mozilla.org/en/YASM for more details." 1>&5; exit 1; }
      elif test -n "$COMPILE_ENVIRONMENT" -a "$_YASM_MAJOR_VERSION" -lt "1" -o \( "$_YASM_MAJOR_VERSION" -eq "1" -a "$_YASM_MINOR_VERSION" -lt "1" \) ; then
        { echo "configure: error: yasm 1.1 or greater is required to build libvpx on Win32, but you appear to have version $_YASM_MAJOR_VERSION.$_YASM_MINOR_VERSION.  Upgrade to the newest version (included in MozillaBuild 1.5.1 and newer) or configure with --disable-webm (which disables the WebM video format). See https://developer.mozilla.org/en/YASM for more details." 1>&2; echo "configure: error: yasm 1.1 or greater is required to build libvpx on Win32, but you appear to have version $_YASM_MAJOR_VERSION.$_YASM_MINOR_VERSION.  Upgrade to the newest version (included in MozillaBuild 1.5.1 and newer) or configure with --disable-webm (which disables the WebM video format). See https://developer.mozilla.org/en/YASM for more details." 1>&5; exit 1; }
      else
        VPX_USE_YASM=1
        VPX_X86_ASM=1
              fi # COMPILE_ENVIRONMENT and others
    ;;
    *:arm*)
      if test -n "$GNU_AS" ; then
                        VPX_ASFLAGS="-march=armv7-a -mfpu=neon"
        VPX_AS_CONVERSION='$(PERL) $(topsrcdir)/media/libvpx/build/make/ads2gas.pl'
        VPX_ARM_ASM=1
                                                                                                cat > conftest.$ac_ext <<EOF
#line 11421 "configure"
#include "confdefs.h"

int main() {
#ifndef __SOFTFP__
           #error "compiler target supports -mfpu=neon, so we don't have to add extra flags"
           #endif
; return 0; }
EOF
if { (eval echo configure:11430: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  VPX_ASFLAGS="$VPX_ASFLAGS -mfloat-abi=softfp"
           
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
      fi
    ;;
    *:x86)
      if $CC -E -dM -</dev/null | grep -q __ELF__; then
        VPX_USE_YASM=1
        VPX_X86_ASM=1
      fi
    ;;
    *:x86_64)
      if $CC -E -dM -</dev/null | grep -q __ELF__; then
        VPX_USE_YASM=1
        VPX_X86_ASM=1
      fi
    ;;
    esac

    if test -n "$COMPILE_ENVIRONMENT" -a -n "$VPX_USE_YASM" -a -z "$YASM"; then
      { echo "configure: error: yasm is a required build tool for this architecture when webm is enabled. You may either install yasm or --disable-webm (which disables the WebM video format). See https://developer.mozilla.org/en/YASM for more details." 1>&2; echo "configure: error: yasm is a required build tool for this architecture when webm is enabled. You may either install yasm or --disable-webm (which disables the WebM video format). See https://developer.mozilla.org/en/YASM for more details." 1>&5; exit 1; }
    fi # COMPILE_ENVIRONMENT and others

    if test -n "$VPX_USE_YASM" && test "$OS_ARCH:$CPU_ARCH" != "WINNT:x86_64"; then
      VPX_ASFLAGS="-DPIC"
    fi

    if test -n "$VPX_X86_ASM"; then
      cat >> confdefs.pytmp <<\EOF
    (''' VPX_X86_ASM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define VPX_X86_ASM 1
EOF

    elif test -n "$VPX_ARM_ASM"; then
      cat >> confdefs.pytmp <<\EOF
    (''' VPX_ARM_ASM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define VPX_ARM_ASM 1
EOF

    else
      echo "configure: warning: No assembler or assembly support for libvpx. Using unoptimized C routines." 1>&2
    fi

        cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VPX_NO_MEM_REPORTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VPX_NO_MEM_REPORTING 1
EOF

fi


if test -n "$MOZ_VORBIS" -a -n "$MOZ_TREMOR"; then
    { echo "configure: error: MOZ_VORBIS and MOZ_TREMOR are mutually exclusive!  The build system should not allow them both to be set, but they are.  Please file a bug at https://bugzilla.mozilla.org/" 1>&2; echo "configure: error: MOZ_VORBIS and MOZ_TREMOR are mutually exclusive!  The build system should not allow them both to be set, but they are.  Please file a bug at https://bugzilla.mozilla.org/" 1>&5; exit 1; }
fi

if test -n "$MOZ_VORBIS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VORBIS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VORBIS 1
EOF

fi

if test -n "$MOZ_TREMOR"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TREMOR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TREMOR 1
EOF

fi

MOZ_WEBM_ENCODER=1
cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBM_ENCODER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBM_ENCODER 1
EOF




if test "$OS_TARGET" = "Linux"; then
    MOZ_ALSA=1
fi

# Check whether --enable-alsa or --disable-alsa was given.
if test "${enable_alsa+set}" = set; then
  enableval="$enable_alsa"
  if test "$enableval" = "yes"; then
    MOZ_ALSA=1
  elif test "$enableval" = "no"; then
    MOZ_ALSA=
  else
    { echo "configure: error: Option, alsa, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, alsa, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_ALSA"; then
    succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for alsa""... $ac_c" 1>&6
echo "configure:11557: checking for alsa" >&5

        if $PKG_CONFIG --exists "alsa" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_ALSA_CFLAGS""... $ac_c" 1>&6
echo "configure:11564: checking MOZ_ALSA_CFLAGS" >&5
            MOZ_ALSA_CFLAGS=`$PKG_CONFIG --cflags "alsa"`
            echo "$ac_t""$MOZ_ALSA_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_ALSA_LIBS""... $ac_c" 1>&6
echo "configure:11569: checking MOZ_ALSA_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_ALSA_LIBS="`$PKG_CONFIG --libs \"alsa\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_ALSA_LIBS" 1>&6
        else
            MOZ_ALSA_CFLAGS=""
            MOZ_ALSA_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_ALSA_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "alsa"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       echo "$MOZ_ALSA_PKG_ERRORS"
          { echo "configure: error: You need ALSA for audio output on Linux." 1>&2; echo "configure: error: You need ALSA for audio output on Linux." 1>&5; exit 1; }
     fi
  fi

fi




case "$OS_TARGET" in
WINNT)
    ;;
*)
    MOZ_PULSEAUDIO=1
    ;;
esac

# Check whether --enable-pulseaudio or --disable-pulseaudio was given.
if test "${enable_pulseaudio+set}" = set; then
  enableval="$enable_pulseaudio"
  if test "$enableval" = "no"; then
    MOZ_PULSEAUDIO=
  elif test "$enableval" = "yes"; then
    MOZ_PULSEAUDIO=1
  else
    { echo "configure: error: Option, pulseaudio, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, pulseaudio, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_PULSEAUDIO"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PULSEAUDIO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PULSEAUDIO 1
EOF

    succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for libpulse""... $ac_c" 1>&6
echo "configure:11644: checking for libpulse" >&5

        if $PKG_CONFIG --exists "libpulse" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_PULSEAUDIO_CFLAGS""... $ac_c" 1>&6
echo "configure:11651: checking MOZ_PULSEAUDIO_CFLAGS" >&5
            MOZ_PULSEAUDIO_CFLAGS=`$PKG_CONFIG --cflags "libpulse"`
            echo "$ac_t""$MOZ_PULSEAUDIO_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_PULSEAUDIO_LIBS""... $ac_c" 1>&6
echo "configure:11656: checking MOZ_PULSEAUDIO_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_PULSEAUDIO_LIBS="`$PKG_CONFIG --libs \"libpulse\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_PULSEAUDIO_LIBS" 1>&6
        else
            MOZ_PULSEAUDIO_CFLAGS=""
            MOZ_PULSEAUDIO_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_PULSEAUDIO_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libpulse"`
            
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       echo "$MOZ_PULSEAUDIO_PKG_ERRORS"
          { echo "configure: error: Building pulseaudio audio backend requires libpulse development package" 1>&2; echo "configure: error: Building pulseaudio audio backend requires libpulse development package" 1>&5; exit 1; }
     fi
  fi

fi



# Check whether --enable-sndio or --disable-sndio was given.
if test "${enable_sndio+set}" = set; then
  enableval="$enable_sndio"
  if test "$enableval" = "yes"; then
    MOZ_SNDIO=1
  elif test "$enableval" = "no"; then
    MOZ_SNDIO= 
  else
    { echo "configure: error: Option, sndio, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, sndio, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_SNDIO"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SNDIO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SNDIO 1
EOF

       ac_safe=`echo "sndio.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for sndio.h""... $ac_c" 1>&6
echo "configure:11713: checking for sndio.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11718 "configure"
#include "confdefs.h"

#include <sndio.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:11726: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    :
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: --enable-sndio specified but it requires sndio development headers" 1>&2; echo "configure: error: --enable-sndio specified but it requires sndio development headers" 1>&5; exit 1; }
  fi

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SNDIO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SNDIO 1
EOF

fi



# Check whether --enable-negotiateauth or --disable-negotiateauth was given.
if test "${enable_negotiateauth+set}" = set; then
  enableval="$enable_negotiateauth"
  if test "$enableval" = "no"; then
    MOZ_AUTH_EXTENSION=
  elif test "$enableval" = "yes"; then
    MOZ_AUTH_EXTENSION=1 
  else
    { echo "configure: error: Option, negotiateauth, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, negotiateauth, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_IOS" -a -n "$MOZ_AUTH_EXTENSION"; then
   { echo "configure: error: negotiateauth is not supported on iOS." 1>&2; echo "configure: error: negotiateauth is not supported on iOS." 1>&5; exit 1; }
fi

# Check whether --enable-pref-extensions or --disable-pref-extensions was given.
if test "${enable_pref_extensions+set}" = set; then
  enableval="$enable_pref_extensions"
  if test "$enableval" = "no"; then
    MOZ_PREF_EXTENSIONS=
  elif test "$enableval" = "yes"; then
    MOZ_PREF_EXTENSIONS=1 
  else
    { echo "configure: error: Option, pref-extensions, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, pref-extensions, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


# Check whether --enable-system-extension-dirs or --disable-system-extension-dirs was given.
if test "${enable_system_extension_dirs+set}" = set; then
  enableval="$enable_system_extension_dirs"
  if test "$enableval" = "no"; then
    ENABLE_SYSTEM_EXTENSION_DIRS=
  elif test "$enableval" = "yes"; then
    ENABLE_SYSTEM_EXTENSION_DIRS=1 
  else
    { echo "configure: error: Option, system-extension-dirs, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, system-extension-dirs, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test "$ENABLE_SYSTEM_EXTENSION_DIRS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' ENABLE_SYSTEM_EXTENSION_DIRS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ENABLE_SYSTEM_EXTENSION_DIRS 1
EOF

fi

# Check whether --enable-universalchardet or --disable-universalchardet was given.
if test "${enable_universalchardet+set}" = set; then
  enableval="$enable_universalchardet"
  if test "$enableval" = "no"; then
    MOZ_UNIVERSALCHARDET=
  elif test "$enableval" = "yes"; then
    MOZ_UNIVERSALCHARDET=1 
  else
    { echo "configure: error: Option, universalchardet, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, universalchardet, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi



MOZ_ANGLE_RENDERER=
MOZ_D3D_CPU_SUFFIX=
MOZ_HAS_WINSDK_WITH_D3D=
MOZ_D3DCOMPILER_VISTA_DLL=
MOZ_D3DCOMPILER_VISTA_DLL_PATH=

if test "$COMPILE_ENVIRONMENT" ; then
case "$target_os" in
*mingw*)
    MOZ_ANGLE_RENDERER=1
    ;;
esac

# The DirectX SDK libraries are split into x86 and x64 sub-directories
case "${target_cpu}" in
i*86)
  MOZ_D3D_CPU_SUFFIX=x86
  ;;
x86_64)
  MOZ_D3D_CPU_SUFFIX=x64
  ;;
esac

# This is potentially set in external mozconfig files; if it's set,
# then the build exposes the "webgl" context name, which is reserved
# for conformant implementations.
if test -n "$MOZ_WEBGL_CONFORMANT"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_WEBGL_CONFORMANT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_WEBGL_CONFORMANT 1
EOF

fi

MOZ_FOUND_D3D_COMPILERS=

if test -n "$MOZ_ANGLE_RENDERER"; then
  if test -z "$MOZ_D3D_CPU_SUFFIX"; then
    { echo "configure: error: Couldn't determine MOZ_D3D_CPU_SUFFIX." 1>&2; echo "configure: error: Couldn't determine MOZ_D3D_CPU_SUFFIX." 1>&5; exit 1; }
  fi

  ######################################
  # Find _46+ for use by Vista+.

  # Find a D3D compiler DLL in a Windows SDK.
  MOZ_D3DCOMPILER_VISTA_DLL=
  case "$MOZ_WINSDK_MAXVER" in
  0x0603*|0x0A00*)
    MOZ_D3DCOMPILER_VISTA_DLL=d3dcompiler_47.dll
    echo "$ac_t""Found D3D compiler in Windows SDK." 1>&6
  ;;
  esac

  if test -n "$MOZ_D3DCOMPILER_VISTA_DLL"; then
    # We have a name, now track down the path.
    if test -n "$WINDOWSSDKDIR"; then
      MOZ_D3DCOMPILER_VISTA_DLL_PATH="$WINDOWSSDKDIR/Redist/D3D/$MOZ_D3D_CPU_SUFFIX/$MOZ_D3DCOMPILER_VISTA_DLL"
      if test -f "$MOZ_D3DCOMPILER_VISTA_DLL_PATH"; then
        echo "$ac_t""Found MOZ_D3DCOMPILER_VISTA_DLL_PATH: $MOZ_D3DCOMPILER_VISTA_DLL_PATH" 1>&6
        MOZ_HAS_WINSDK_WITH_D3D=1
      else
        echo "$ac_t""MOZ_D3DCOMPILER_VISTA_DLL_PATH doesn't exist: $MOZ_D3DCOMPILER_VISTA_DLL_PATH" 1>&6
        { echo "configure: error: Windows SDK at "$WINDOWSSDKDIR" appears broken. Try updating to MozillaBuild 1.9 final or higher." 1>&2; echo "configure: error: Windows SDK at "$WINDOWSSDKDIR" appears broken. Try updating to MozillaBuild 1.9 final or higher." 1>&5; exit 1; }
        MOZ_D3DCOMPILER_VISTA_DLL_PATH=
      fi
    else
      echo "$ac_t""Windows SDK not found." 1>&6
    fi
  else
    { echo "configure: error: Couldn't find Windows SDK 8.1 or higher needed for ANGLE." 1>&2; echo "configure: error: Couldn't find Windows SDK 8.1 or higher needed for ANGLE." 1>&5; exit 1; }
  fi

  if test -z "$MOZ_D3DCOMPILER_VISTA_DLL_PATH"; then
    MOZ_D3DCOMPILER_VISTA_DLL=
  fi

  # On mingw, check if headers are provided by toolchain.
  if test -n "$GNU_CC"; then
       ac_safe=`echo "d3d10.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for d3d10.h""... $ac_c" 1>&6
echo "configure:11905: checking for d3d10.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11910 "configure"
#include "confdefs.h"

#include <d3d10.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:11918: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    MOZ_HAS_WINSDK_WITH_D3D=1
  else
    echo "$ac_t""no" 1>&6
    
  fi

  fi

  ######################################
  # Check that we found what we needed.
  MOZ_FOUND_A_D3D_COMPILER=

  if test -n "$MOZ_D3DCOMPILER_VISTA_DLL"; then
    MOZ_FOUND_A_D3D_COMPILER=1
    echo "$ac_t""Found d3dcompiler DLL for Vista+: $MOZ_D3DCOMPILER_VISTA_DLL" 1>&6
  fi

  if test -z "$CROSS_COMPILE"; then
    if test -z "MOZ_FOUND_A_D3D_COMPILER"; then
      { echo "configure: error: Couldn't find an acceptable D3D compiler DLL." 1>&2; echo "configure: error: Couldn't find an acceptable D3D compiler DLL." 1>&5; exit 1; }
    fi
  fi
fi # MOZ_ANGLE_RENDERER

fi # COMPILE_ENVIRONMENT


MOZ_GAMEPAD_BACKEND=stub

# Check whether --enable-gamepad or --disable-gamepad was given.
if test "${enable_gamepad+set}" = set; then
  enableval="$enable_gamepad"
  if test "$enableval" = "yes"; then
    MOZ_GAMEPAD=1
  elif test "$enableval" = "no"; then
    MOZ_GAMEPAD=
  else
    { echo "configure: error: Option, gamepad, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, gamepad, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test "$MOZ_GAMEPAD"; then
    case "$OS_TARGET" in
    WINNT)
        MOZ_GAMEPAD_BACKEND=windows
        ;;
    Linux)
           ac_safe=`echo "linux/joystick.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for linux/joystick.h""... $ac_c" 1>&6
echo "configure:11982: checking for linux/joystick.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 11987 "configure"
#include "confdefs.h"

#include <linux/joystick.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:11995: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    :
  else
    echo "$ac_t""no" 1>&6
    
  fi

        if test "$ac_cv_header_linux_joystick_h" != "yes"; then
          { echo "configure: error: Can't find header linux/joystick.h, needed for gamepad support. Please install Linux kernel headers or reconfigure with --disable-gamepad to disable gamepad support." 1>&2; echo "configure: error: Can't find header linux/joystick.h, needed for gamepad support. Please install Linux kernel headers or reconfigure with --disable-gamepad to disable gamepad support." 1>&5; exit 1; }
        fi
        MOZ_GAMEPAD_BACKEND=linux
        ;;
    Android)
        MOZ_GAMEPAD_BACKEND=android
        ;;
    *)
        ;;
   esac

  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_GAMEPAD ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_GAMEPAD 1
EOF

fi



MOZ_LIBJPEG_TURBO=
LIBJPEG_TURBO_USE_YASM=
if test -z "$MOZ_SYSTEM_JPEG"; then
    MOZ_LIBJPEG_TURBO=1
fi

# Check whether --enable-libjpeg_turbo or --disable-libjpeg_turbo was given.
if test "${enable_libjpeg_turbo+set}" = set; then
  enableval="$enable_libjpeg_turbo"
  if test "$enableval" = "no"; then
    MOZ_LIBJPEG_TURBO=
  elif test "$enableval" = "yes"; then
    MOZ_LIBJPEG_TURBO=1
  else
    { echo "configure: error: Option, libjpeg_turbo, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, libjpeg_turbo, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test "$MOZ_SYSTEM_JPEG" = 1 -a "$MOZ_LIBJPEG_TURBO" = 1; then
    { echo "configure: error: cannot use --with-system-jpeg with --enable-libjpeg-turbo." 1>&2; echo "configure: error: cannot use --with-system-jpeg with --enable-libjpeg-turbo." 1>&5; exit 1; }
fi


if test -n "$MOZ_LIBJPEG_TURBO" -a -n "$COMPILE_ENVIRONMENT"; then

    case "$OS_ARCH:$CPU_ARCH" in
  WINNT:x86)
    LIBJPEG_TURBO_ASFLAGS="-DPIC -DWIN32"
  ;;
  WINNT:x86_64)
    LIBJPEG_TURBO_ASFLAGS="-D__x86_64__ -DPIC -DWIN64 -DMSVC"
  ;;
  *:arm)
    LIBJPEG_TURBO_ASFLAGS="-march=armv7-a -mfpu=neon"
  ;;
  *:aarch64)
    LIBJPEG_TURBO_ASFLAGS="-march=armv8-a"
  ;;
  *:mips32)
    LIBJPEG_TURBO_ASFLAGS="-mdspr2"
  ;;
  *:x86)
    if $CC -E -dM -</dev/null | grep -q __ELF__; then
      LIBJPEG_TURBO_ASFLAGS="-DPIC -DELF"
    fi
  ;;
  *:x86_64)
    if $CC -E -dM -</dev/null | grep -q __ELF__; then
      LIBJPEG_TURBO_ASFLAGS="-D__x86_64__ -DPIC -DELF"
    fi
  ;;
  esac
fi

if test -n "$LIBJPEG_TURBO_ASFLAGS"; then
  case "$CPU_ARCH" in
  x86_64|x86)
    LIBJPEG_TURBO_USE_YASM=1

    if test -z "$YASM" ; then
        { echo "configure: error: Yasm is required to build with libjpeg-turbo's optimized JPEG decoding routines, but you do not appear to have Yasm installed.  Either install it or configure with --disable-libjpeg-turbo to use the pure C JPEG decoder.  See https://developer.mozilla.org/en/YASM for more details." 1>&2; echo "configure: error: Yasm is required to build with libjpeg-turbo's optimized JPEG decoding routines, but you do not appear to have Yasm installed.  Either install it or configure with --disable-libjpeg-turbo to use the pure C JPEG decoder.  See https://developer.mozilla.org/en/YASM for more details." 1>&5; exit 1; }
    fi

            if test "$OS_ARCH" = "Linux" ; then
        if test "$_YASM_MAJOR_VERSION" -lt "1" -o \( "$_YASM_MAJOR_VERSION" -eq "1" -a "$_YASM_MINOR_VERSION" -eq "0" -a "$_YASM_RELEASE" -lt "1" \) ; then
            { echo "configure: error: Yasm 1.0.1 or greater is required to build with libjpeg-turbo's optimized JPEG decoding routines, but you appear to have version $_YASM_MAJOR_VERSION.$_YASM_MINOR_VERSION.$_YASM_RELEASE.  Upgrade to the newest version or configure with --disable-libjpeg-turbo to use the pure C JPEG decoder.  See https://developer.mozilla.org/en/YASM for more details." 1>&2; echo "configure: error: Yasm 1.0.1 or greater is required to build with libjpeg-turbo's optimized JPEG decoding routines, but you appear to have version $_YASM_MAJOR_VERSION.$_YASM_MINOR_VERSION.$_YASM_RELEASE.  Upgrade to the newest version or configure with --disable-libjpeg-turbo to use the pure C JPEG decoder.  See https://developer.mozilla.org/en/YASM for more details." 1>&5; exit 1; }
        fi
    else
        if test "$_YASM_MAJOR_VERSION" -lt "1" -o \( "$_YASM_MAJOR_VERSION" -eq "1" -a "$_YASM_MINOR_VERSION" -lt "1" \) ; then
            { echo "configure: error: Yasm 1.1 or greater is required to build with libjpeg-turbo's optimized JPEG decoding routines, but you appear to have version $_YASM_MAJOR_VERSION.$_YASM_MINOR_VERSION.  Upgrade to the newest version or configure with --disable-libjpeg-turbo to use the pure C JPEG decoder.  See https://developer.mozilla.org/en/YASM for more details." 1>&2; echo "configure: error: Yasm 1.1 or greater is required to build with libjpeg-turbo's optimized JPEG decoding routines, but you appear to have version $_YASM_MAJOR_VERSION.$_YASM_MINOR_VERSION.  Upgrade to the newest version or configure with --disable-libjpeg-turbo to use the pure C JPEG decoder.  See https://developer.mozilla.org/en/YASM for more details." 1>&5; exit 1; }
        fi
    fi
  ;;
  esac
fi


MOZ_LIBAV_FFT=


case "$OS_ARCH:$CPU_ARCH" in
  WINNT:x86)
      MOZ_LIBAV_FFT=1
  ;;
  *:x86_64)
      MOZ_LIBAV_FFT=1
  ;;
esac


if test -n "$MOZ_LIBAV_FFT" -a -n "$COMPILE_ENVIRONMENT"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_LIBAV_FFT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_LIBAV_FFT 1
EOF

    case "$OS_ARCH:$CPU_ARCH" in
  WINNT:x86)
    LIBAV_FFT_ASFLAGS="-DPIC -DWIN32"
  ;;
  WINNT:x86_64)
    LIBAV_FFT_ASFLAGS="-D__x86_64__ -DPIC -DWIN64 -DMSVC"
  ;;
  *:x86_64)
    if $CC -E -dM -</dev/null | grep -q __ELF__; then
      LIBAV_FFT_ASFLAGS="-D__x86_64__ -DPIC -DELF"
    fi
  ;;
  *)
    { echo "configure: error: libav's FFT routines are only available for 32-bit windows or 64-bit x86 based platforms." 1>&2; echo "configure: error: libav's FFT routines are only available for 32-bit windows or 64-bit x86 based platforms." 1>&5; exit 1; }
  ;;
  esac
fi

if test -n "$LIBAV_FFT_ASFLAGS"; then
        if test -z "$YASM" ; then
    { echo "configure: error: Yasm is required to build with libav's optimized FFT routines, but you do not appear to have Yasm installed. See https://developer.mozilla.org/en/YASM for more details." 1>&2; echo "configure: error: Yasm is required to build with libav's optimized FFT routines, but you do not appear to have Yasm installed. See https://developer.mozilla.org/en/YASM for more details." 1>&5; exit 1; }
  fi
      if test "$OS_ARCH" = "Linux" ; then
    if test "$_YASM_MAJOR_VERSION" -lt "1" -o \( "$_YASM_MAJOR_VERSION" -eq "1" -a "$_YASM_MINOR_VERSION" -eq "0" -a "$_YASM_RELEASE" -lt "1" \) ; then
      { echo "configure: error: Yasm 1.0.1 or greater is required to build with libav's optimized FFT routines, but you do not appear to have Yasm installed.  See https://developer.mozilla.org/en/YASM for more details." 1>&2; echo "configure: error: Yasm 1.0.1 or greater is required to build with libav's optimized FFT routines, but you do not appear to have Yasm installed.  See https://developer.mozilla.org/en/YASM for more details." 1>&5; exit 1; }
    fi
  else
    if test "$_YASM_MAJOR_VERSION" -lt "1" -o \( "$_YASM_MAJOR_VERSION" -eq "1" -a "$_YASM_MINOR_VERSION" -lt "1" \) ; then
      { echo "configure: error: Yasm 1.1 or greater is required to build with libav's optimized FFT routines, but you do not appear to have Yasm installed.  See https://developer.mozilla.org/en/YASM for more details." 1>&2; echo "configure: error: Yasm 1.1 or greater is required to build with libav's optimized FFT routines, but you do not appear to have Yasm installed.  See https://developer.mozilla.org/en/YASM for more details." 1>&5; exit 1; }
    fi
  fi
elif test -n "$MOZ_LIBAV_FFT" -a "${CPU_ARCH}" != "arm"; then
    echo "configure: warning: No assembler or assembly support for libav-fft.  Using unoptimized C routines." 1>&2
fi


MOZ_FFVPX=


case "$OS_ARCH:$CPU_ARCH" in
  WINNT:x86)
      MOZ_FFVPX=1
  ;;
  *:x86_64)
      MOZ_FFVPX=1
  ;;
esac

if test -n "$MOZ_LIBAV_FFT"; then
  FFVPX_ASFLAGS=$LIBAV_FFT_ASFLAGS
fi
if test -n "$MOZ_FFVPX"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_FFVPX ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_FFVPX 1
EOF

fi


# Check whether --enable-extensions or --disable-extensions was given.
if test "${enable_extensions+set}" = set; then
  enableval="$enable_extensions"
   for option in `echo $enableval | sed 's/,/ /g'`; do
    if test "$option" = "yes" -o "$option" = "all"; then
        { echo "configure: error: --enable-extensions=$option is no longer supported." 1>&2; echo "configure: error: --enable-extensions=$option is no longer supported." 1>&5; exit 1; }
    elif test "$option" = "no" -o "$option" = "none"; then
        MOZ_EXTENSIONS=""
    elif test "$option" = "default"; then
        MOZ_EXTENSIONS="$MOZ_EXTENSIONS $MOZ_EXTENSIONS_DEFAULT"
    elif test `echo "$option" | grep -c \^-` != 0; then
        option=`echo $option | sed 's/^-//'`
        MOZ_EXTENSIONS=`echo "$MOZ_EXTENSIONS" | sed "s/ ${option}//"`
    else
        MOZ_EXTENSIONS="$MOZ_EXTENSIONS $option"
    fi
done
else
  MOZ_EXTENSIONS="$MOZ_EXTENSIONS_DEFAULT"
fi


if test -z "$MOZ_ENABLE_GIO" -a `echo "$MOZ_EXTENSIONS" | grep -c gio` -ne 0; then
    # Suppress warning on non-X11 platforms
    if test -n "$MOZ_X11"; then
        echo "configure: warning: Removing gio from MOZ_EXTENSIONS due to --disable-gio." 1>&2
    fi
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's|gio||'`
fi

if test `echo "$MOZ_EXTENSIONS" | grep -c gio` -ne 0; then
    MOZ_GIO_COMPONENT=1
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's|gio||'`
fi


for extension in $MOZ_EXTENSIONS; do
    if test ! -d "${srcdir}/extensions/${extension}"; then
        { echo "configure: error: Unrecognized extension provided to --enable-extensions: ${extension}." 1>&2; echo "configure: error: Unrecognized extension provided to --enable-extensions: ${extension}." 1>&5; exit 1; }
    fi
done

if test -n "$MOZ_USE_NATIVE_POPUP_WINDOWS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_USE_NATIVE_POPUP_WINDOWS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_USE_NATIVE_POPUP_WINDOWS 1
EOF

fi

if test -n "$MOZ_TREE_FREETYPE"; then
   MOZ_ENABLE_CAIRO_FT=1
   FT_FONT_FEATURE="#define CAIRO_HAS_FT_FONT 1"
   CAIRO_FT_CFLAGS="-I$_topsrcdir/modules/freetype2/include"
   
fi

for ac_prog in wget
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:12263: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_WGET'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$WGET"; then
  ac_cv_prog_WGET="$WGET" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_WGET="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
WGET="$ac_cv_prog_WGET"
if test -n "$WGET"; then
  echo "$ac_t""$WGET" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$WGET" && break
done
test -n "$WGET" || WGET=""""




# Check whether --enable-bundled-fonts or --disable-bundled-fonts was given.
if test "${enable_bundled_fonts+set}" = set; then
  enableval="$enable_bundled_fonts"
  if test "$enableval" = "yes"; then
    MOZ_BUNDLED_FONTS=1
  elif test "$enableval" = "no"; then
    MOZ_BUNDLED_FONTS=
  else
    { echo "configure: error: Option, bundled-fonts, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, bundled-fonts, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_BUNDLED_FONTS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_BUNDLED_FONTS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_BUNDLED_FONTS 1
EOF

fi




# Check whether --enable-verify-mar or --disable-verify-mar was given.
if test "${enable_verify_mar+set}" = set; then
  enableval="$enable_verify_mar"
  if test "$enableval" = "yes"; then
    MOZ_VERIFY_MAR_SIGNATURE=1
  elif test "$enableval" = "no"; then
    MOZ_VERIFY_MAR_SIGNATURE= 
  else
    { echo "configure: error: Option, verify-mar, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, verify-mar, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_VERIFY_MAR_SIGNATURE"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_VERIFY_MAR_SIGNATURE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_VERIFY_MAR_SIGNATURE 1
EOF

fi


# Check whether --enable-signmar or --disable-signmar was given.
if test "${enable_signmar+set}" = set; then
  enableval="$enable_signmar"
  if test "$enableval" = "yes"; then
    MOZ_ENABLE_SIGNMAR=1
  elif test "$enableval" = "no"; then
    MOZ_ENABLE_SIGNMAR= 
  else
    { echo "configure: error: Option, signmar, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, signmar, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_ENABLE_SIGNMAR"; then
  if test -z "$COMPILE_ENVIRONMENT" ; then
    echo "configure: warning: Cannot --enable-signmar with --disable-compile-environment" 1>&2
    MOZ_ENABLE_SIGNMAR=
  else
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ENABLE_SIGNMAR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ENABLE_SIGNMAR 1
EOF

  fi
fi


if test "$MOZ_IOS"; then
  MOZ_UPDATER=
fi

# Check whether --enable-updater or --disable-updater was given.
if test "${enable_updater+set}" = set; then
  enableval="$enable_updater"
  if test "$enableval" = "yes"; then
    MOZ_UPDATER=1
  elif test "$enableval" = "no"; then
    MOZ_UPDATER= 
  else
    { echo "configure: error: Option, updater, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, updater, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_UPDATER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_UPDATER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_UPDATER 1
EOF

fi

# Check whether --enable-tests or --disable-tests was given.
if test "${enable_tests+set}" = set; then
  enableval="$enable_tests"
  if test "$enableval" = "yes"; then
    ENABLE_TESTS=1
  elif test "$enableval" = "no"; then
    ENABLE_TESTS= 
  else
    { echo "configure: error: Option, tests, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, tests, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$ENABLE_TESTS"; then
    GTEST_HAS_RTTI=0
    cat >> confdefs.pytmp <<\EOF
    (''' ENABLE_TESTS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ENABLE_TESTS 1
EOF

    cat >> confdefs.pytmp <<EOF
    (''' GTEST_HAS_RTTI ''', r''' 0 ''')
EOF
cat >> confdefs.h <<EOF
#define GTEST_HAS_RTTI 0
EOF

    
    if test -n "$_WIN32_MSVC"; then
          cat >> confdefs.pytmp <<EOF
    (''' _VARIADIC_MAX ''', r''' 10 ''')
EOF
cat >> confdefs.h <<EOF
#define _VARIADIC_MAX 10
EOF

    fi
    if test "${OS_TARGET}" = "Android"; then
        cat >> confdefs.pytmp <<\EOF
    (''' GTEST_OS_LINUX_ANDROID ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define GTEST_OS_LINUX_ANDROID 1
EOF

        cat >> confdefs.pytmp <<\EOF
    (''' GTEST_USE_OWN_TR1_TUPLE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define GTEST_USE_OWN_TR1_TUPLE 1
EOF

        cat >> confdefs.pytmp <<EOF
    (''' GTEST_HAS_CLONE ''', r''' 0 ''')
EOF
cat >> confdefs.h <<EOF
#define GTEST_HAS_CLONE 0
EOF

        
        
        
    fi
fi

# Check whether --enable-parental-controls or --disable-parental-controls was given.
if test "${enable_parental_controls+set}" = set; then
  enableval="$enable_parental_controls"
  if test "$enableval" = "no"; then
    MOZ_DISABLE_PARENTAL_CONTROLS=1
  elif test "$enableval" = "yes"; then
    MOZ_DISABLE_PARENTAL_CONTROLS=
  else
    { echo "configure: error: Option, parental-controls, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, parental-controls, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_DISABLE_PARENTAL_CONTROLS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DISABLE_PARENTAL_CONTROLS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DISABLE_PARENTAL_CONTROLS 1
EOF

fi



if test -n "$MOZ_NO_SMART_CARDS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_NO_SMART_CARDS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_NO_SMART_CARDS 1
EOF

fi


# Individual module options

# Check whether --enable-feeds or --disable-feeds was given.
if test "${enable_feeds+set}" = set; then
  enableval="$enable_feeds"
  if test "$enableval" = "no"; then
    MOZ_FEEDS=
  elif test "$enableval" = "yes"; then
    MOZ_FEEDS=1 
  else
    { echo "configure: error: Option, feeds, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, feeds, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_FEEDS"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_FEEDS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_FEEDS 1
EOF

else
    if test "$MOZ_BUILD_APP" = "browser"; then
        { echo "configure: error: Cannot build Firefox with --disable-feeds." 1>&2; echo "configure: error: Cannot build Firefox with --disable-feeds." 1>&5; exit 1; }
    fi
fi

# Check whether --enable-safe-browsing or --disable-safe-browsing was given.
if test "${enable_safe_browsing+set}" = set; then
  enableval="$enable_safe_browsing"
  if test "$enableval" = "yes"; then
    MOZ_SAFE_BROWSING=1
  elif test "$enableval" = "no"; then
    MOZ_SAFE_BROWSING= 
  else
    { echo "configure: error: Option, safe-browsing, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, safe-browsing, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_SAFE_BROWSING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SAFE_BROWSING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SAFE_BROWSING 1
EOF

fi


if test -n "$MOZ_SAFE_BROWSING"; then
    MOZ_URL_CLASSIFIER=1
fi
# Check whether --enable-url-classifier or --disable-url-classifier was given.
if test "${enable_url_classifier+set}" = set; then
  enableval="$enable_url_classifier"
  if test "$enableval" = "yes"; then
    MOZ_URL_CLASSIFIER=1
  elif test "$enableval" = "no"; then
    MOZ_URL_CLASSIFIER= 
  else
    { echo "configure: error: Option, url-classifier, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, url-classifier, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_URL_CLASSIFIER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_URL_CLASSIFIER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_URL_CLASSIFIER 1
EOF

fi


# Check whether --enable-zipwriter or --disable-zipwriter was given.
if test "${enable_zipwriter+set}" = set; then
  enableval="$enable_zipwriter"
  if test "$enableval" = "no"; then
    MOZ_ZIPWRITER=
  elif test "$enableval" = "yes"; then
    MOZ_ZIPWRITER=1 
  else
    { echo "configure: error: Option, zipwriter, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, zipwriter, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi



# Check whether --enable-faststripe or --disable-faststripe was given.
if test "${enable_faststripe+set}" = set; then
  enableval="$enable_faststripe"
  if test "$enableval" = "yes"; then
    MOZ_THEME_FASTSTRIPE=1
  elif test "$enableval" = "no"; then
    MOZ_THEME_FASTSTRIPE= 
  else
    { echo "configure: error: Option, faststripe, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, faststripe, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi




# Runtime debugging and Optimizations

if test -z "$MOZ_OPTIMIZE_FLAGS"; then
    MOZ_OPTIMIZE_FLAGS="-O"
fi

# Check whether --enable-optimize or --disable-optimize was given.
if test "${enable_optimize+set}" = set; then
  enableval="$enable_optimize"
   if test "$enableval" != "no"; then
    MOZ_OPTIMIZE=1
    if test -n "$enableval" -a "$enableval" != "yes"; then
        MOZ_OPTIMIZE_FLAGS=`echo "$enableval" | sed -e 's|\\\ | |g'`
        MOZ_OPTIMIZE=2
    fi
else
    MOZ_OPTIMIZE=
fi 
else
  MOZ_OPTIMIZE=1
fi



  case "$target" in
  *android*)
    unwind_tables="-funwind-tables"
    ;;
  esac
  if test "$GNU_CC"; then
    MOZ_ENABLE_FRAME_PTR="-fno-omit-frame-pointer $unwind_tables"
    MOZ_DISABLE_FRAME_PTR="-fomit-frame-pointer"
    if test "$CPU_ARCH" = arm; then
      # http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54398
      MOZ_ENABLE_FRAME_PTR="$unwind_tables"
    fi
  else
    case "$target" in
        *-mingw32*)
      MOZ_ENABLE_FRAME_PTR="-Oy-"
      MOZ_DISABLE_FRAME_PTR="-Oy"
    ;;
    esac
  fi

  # If we are debugging, profiling, using sanitizers, or on win32 we want a
  # frame pointer.
  if test -z "$MOZ_OPTIMIZE" -o \
          -n "$MOZ_PROFILING" -o \
          -n "$MOZ_DEBUG" -o \
          -n "$MOZ_MSAN" -o \
          -n "$MOZ_ASAN" -o \
          "$OS_ARCH:$CPU_ARCH" = "WINNT:x86"; then
    MOZ_FRAMEPTR_FLAGS="$MOZ_ENABLE_FRAME_PTR"
  else
    MOZ_FRAMEPTR_FLAGS="$MOZ_DISABLE_FRAME_PTR"
  fi


if test "$COMPILE_ENVIRONMENT"; then
if test -n "$MOZ_OPTIMIZE"; then
    echo $ac_n "checking for valid C compiler optimization flags""... $ac_c" 1>&6
echo "configure:12672: checking for valid C compiler optimization flags" >&5
    _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS $MOZ_OPTIMIZE_FLAGS"
    cat > conftest.$ac_ext <<EOF
#line 12676 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
printf("Hello World\n");
; return 0; }
EOF
if { (eval echo configure:12683: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  _results=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  _results=no
fi
rm -f conftest*
    echo "$ac_t""$_results" 1>&6
    if test "$_results" = "no"; then
        { echo "configure: error: These compiler flags for C are invalid: $MOZ_OPTIMIZE_FLAGS" 1>&2; echo "configure: error: These compiler flags for C are invalid: $MOZ_OPTIMIZE_FLAGS" 1>&5; exit 1; }
    fi
    CFLAGS=$_SAVE_CFLAGS
fi
fi # COMPILE_ENVIRONMENT








if test -z "$MOZ_ENABLE_WARNINGS_AS_ERRORS"; then
   WARNINGS_AS_ERRORS=''
fi

cat >> confdefs.pytmp <<\EOF
    (''' MOZ_LOGGING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_LOGGING 1
EOF

cat >> confdefs.pytmp <<\EOF
    (''' FORCE_PR_LOG ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define FORCE_PR_LOG 1
EOF


_ENABLE_LOGREFCNT=42
# Check whether --enable-logrefcnt or --disable-logrefcnt was given.
if test "${enable_logrefcnt+set}" = set; then
  enableval="$enable_logrefcnt"
  if test "$enableval" = "yes"; then
    _ENABLE_LOGREFCNT=1
  elif test "$enableval" = "no"; then
    _ENABLE_LOGREFCNT= 
  else
    { echo "configure: error: Option, logrefcnt, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, logrefcnt, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test "$_ENABLE_LOGREFCNT" = "1"; then
    cat >> confdefs.pytmp <<\EOF
    (''' FORCE_BUILD_REFCNT_LOGGING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define FORCE_BUILD_REFCNT_LOGGING 1
EOF

elif test -z "$_ENABLE_LOGREFCNT"; then
    cat >> confdefs.pytmp <<\EOF
    (''' NO_BUILD_REFCNT_LOGGING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NO_BUILD_REFCNT_LOGGING 1
EOF

fi

# Check whether --enable-dump-painting or --disable-dump-painting was given.
if test "${enable_dump_painting+set}" = set; then
  enableval="$enable_dump_painting"
  if test "$enableval" = "yes"; then
    MOZ_DUMP_PAINTING=1
  elif test "$enableval" = "no"; then
    MOZ_DUMP_PAINTING= 
  else
    { echo "configure: error: Option, dump-painting, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, dump-painting, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_DUMP_PAINTING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DUMP_PAINTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DUMP_PAINTING 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_LAYERS_HAVE_LOG ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_LAYERS_HAVE_LOG 1
EOF

fi
if test -n "$MOZ_DEBUG"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DUMP_PAINTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DUMP_PAINTING 1
EOF

fi

case "${OS_TARGET}" in
WINNT)
  MOZ_GLUE_IN_PROGRAM=
  ;;
*)
    MOZ_GLUE_IN_PROGRAM=1
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_GLUE_IN_PROGRAM ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_GLUE_IN_PROGRAM 1
EOF

  ;;
esac

if test -n "$MOZ_REPLACE_MALLOC"; then
        if test -n "$MACOSX_DEPLOYMENT_TARGET"; then
        echo $ac_n "checking how to do weak dynamic linking""... $ac_c" 1>&6
echo "configure:12815: checking how to do weak dynamic linking" >&5
if eval "test \"`echo '$''{'ac_cv_weak_dynamic_linking'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'extern void foo() __attribute__((weak_import));int bar() { if (foo) foo(); return 0; }' > conftest.c
             if { ac_try='${CC-cc} -o conftest${DLL_SUFFIX} $CFLAGS -dynamiclib $LDFLAGS -Wl,-U,_foo conftest.c $LIBS 1>&5'; { (eval echo configure:12820: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
                test -s conftest${DLL_SUFFIX}; then
                                                                                     if "$OTOOL" -l conftest${DLL_SUFFIX} 2> /dev/null | grep "LC_DYLD_INFO_ONLY" > /dev/null; then
                     _CLASSIC_INFO=
                 else
                     _CLASSIC_INFO=1
                 fi
                 if "$OTOOL" -l conftest${DLL_SUFFIX} 2> /dev/null | grep "LC_DYLD_INFO" > /dev/null; then
                     _DYLD_INFO=1
                 else
                     _DYLD_INFO=
                 fi
                                                                                                                                                                                                            if test -n "$_DYLD_INFO" && dyldinfo -bind conftest${DLL_SUFFIX} 2> /dev/null | grep "_foo (weak import)" > /dev/null; then
                     if test -n "$_CLASSIC_INFO"; then
                         ac_cv_weak_dynamic_linking="flat namespace"
                     else
                         ac_cv_weak_dynamic_linking="compiler support"
                     fi
                 else
                     if test -n "$_DYLD_INFO"; then
                         ac_cv_weak_dynamic_linking="dummy library"
                     else
                         ac_cv_weak_dynamic_linking="flat namespace"
                     fi
                 fi
             else
                 { echo "configure: error: couldn't compile a simple C file" 1>&2; echo "configure: error: couldn't compile a simple C file" 1>&5; exit 1; }
             fi
             rm -rf conftest*
fi

echo "$ac_t""$ac_cv_weak_dynamic_linking" 1>&6
        MOZ_REPLACE_MALLOC_LINKAGE="$ac_cv_weak_dynamic_linking"
    fi
fi


if test -z "$MOZ_MEMORY"; then
  case "${target}" in
    *-mingw*)
      if test -z "$WIN32_REDIST_DIR" -a -z "$MOZ_DEBUG"; then
        echo "configure: warning: When not building jemalloc, you need to set WIN32_REDIST_DIR to the path to the Visual C++ Redist (usually VCINSTALLDIR\redist\x86\Microsoft.VC80.CRT, for VC++ v8) if you intend to distribute your build." 1>&2
      fi
      ;;
  esac
else
  if test "x$MOZ_DEBUG" = "x1"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_MEMORY_DEBUG ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_MEMORY_DEBUG 1
EOF

  fi
        case "${target}" in
  *-mingw*)
    export MOZ_NO_DEBUG_RTL=1
    ;;
  esac
fi # MOZ_MEMORY


# Allow the application to provide a subconfigure script.
# This should be after 'export MOZ_NO_DEBUG_RTL=1' since
# ldap/c-sdk/configure refers to the enviroment value.
if test -f "${srcdir}/${MOZ_BUILD_APP}/configure.in" ; then
  do_output_subdirs() {
    if test -n "$_subconfigure_subdirs"; then
      { echo "configure: error: Cannot specify more than one sub-sub-configure" 1>&2; echo "configure: error: Cannot specify more than one sub-sub-configure" 1>&5; exit 1; }
     fi
    _subconfigure_subdir="$1"
    _subconfigure_config_args="$ac_configure_args"
  }
  tmpscript=`$PYTHON -c 'import os, tempfile; print tempfile.mktemp(prefix="subscript.").replace(os.sep, "/")'` || exit 1
  ${TOOLCHAIN_PREFIX}m4 "${srcdir}/build/autoconf/subconfigure.m4" \
     "${srcdir}/build/autoconf/altoptions.m4" \
     "${srcdir}/${MOZ_BUILD_APP}/configure.in" > $tmpscript
  . $tmpscript
  rm -f $tmpscript
fi


export MOZ_GLUE_WRAP_LDFLAGS




# Check whether --enable-clang-plugin or --disable-clang-plugin was given.
if test "${enable_clang_plugin+set}" = set; then
  enableval="$enable_clang_plugin"
  if test "$enableval" = "yes"; then
    ENABLE_CLANG_PLUGIN=1
  elif test "$enableval" = "no"; then
    ENABLE_CLANG_PLUGIN= 
  else
    { echo "configure: error: Option, clang-plugin, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, clang-plugin, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$ENABLE_CLANG_PLUGIN"; then
    if test -z "${CLANG_CC}${CLANG_CL}"; then
        { echo "configure: error: Can't use clang plugin without clang." 1>&2; echo "configure: error: Can't use clang plugin without clang." 1>&5; exit 1; }
    fi

    echo $ac_n "checking for llvm-config""... $ac_c" 1>&6
echo "configure:12926: checking for llvm-config" >&5
    if test -z "$LLVMCONFIG"; then
      if test -n "$CLANG_CL"; then
          CXX_COMPILER="$(dirname "$CXX")/clang"
      else
          CXX_COMPILER="${CXX}"
      fi
      LLVMCONFIG=`$CXX_COMPILER -print-prog-name=llvm-config`
    fi

    if test -z "$LLVMCONFIG"; then
      LLVMCONFIG=`which llvm-config`
    fi

    if test ! -x "$LLVMCONFIG"; then
      echo "$ac_t""not found" 1>&6
      { echo "configure: error: Cannot find an llvm-config binary for building a clang plugin" 1>&2; echo "configure: error: Cannot find an llvm-config binary for building a clang plugin" 1>&5; exit 1; }
    fi

    echo "$ac_t""$LLVMCONFIG" 1>&6

    if test -z "$LLVMCONFIG"; then
        { echo "configure: error: Cannot find an llvm-config binary for building a clang plugin" 1>&2; echo "configure: error: Cannot find an llvm-config binary for building a clang plugin" 1>&5; exit 1; }
    fi
                LLVM_CXXFLAGS=`$LLVMCONFIG --cxxflags | sed -e 's/-isysroot [^ ]*//'`

            LLVM_LDFLAGS=`$LLVMCONFIG --ldflags | tr '\n' ' '`

    if test "${HOST_OS_ARCH}" = "Darwin"; then
                                                                CLANG_LDFLAGS="-Wl,-flat_namespace -Wl,-undefined,suppress -lclangASTMatchers"
    elif test "${HOST_OS_ARCH}" = "WINNT"; then
        CLANG_LDFLAGS="clangASTMatchers.lib"
    else
        CLANG_LDFLAGS="-lclangASTMatchers"
    fi

    if test -n "$CLANG_CL"; then
                                        LLVM_REPLACE_CXXFLAGS=''
        for arg in $LLVM_CXXFLAGS; do
                                    arg=`echo "$arg"|sed -e 's/^\//-/' -e 's/\\\\/\//g'`
            LLVM_REPLACE_CXXFLAGS="$LLVM_REPLACE_CXXFLAGS $arg"
        done
        LLVM_CXXFLAGS="$LLVM_REPLACE_CXXFLAGS"

        LLVM_REPLACE_LDFLAGS=''
        for arg in $LLVM_LDFLAGS; do
                                    arg=`echo "$arg"|sed -e 's/^\//-/' -e 's/\\\\/\//g'`
            LLVM_REPLACE_LDFLAGS="$LLVM_REPLACE_LDFLAGS $arg"
        done
        LLVM_LDFLAGS="$LLVM_REPLACE_LDFLAGS"

        CLANG_REPLACE_LDFLAGS=''
        for arg in $CLANG_LDFLAGS; do
                                    arg=`echo "$arg"|sed -e 's/^\//-/' -e 's/\\\\/\//g'`
            CLANG_REPLACE_LDFLAGS="$CLANG_REPLACE_LDFLAGS $arg"
        done
        CLANG_LDFLAGS="$CLANG_REPLACE_LDFLAGS"
    fi

                echo $ac_n "checking for new ASTMatcher API""... $ac_c" 1>&6
echo "configure:12986: checking for new ASTMatcher API" >&5
if eval "test \"`echo '$''{'ac_cv_have_new_ASTMatcher_api'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            _SAVE_CXX="$CXX"
            _SAVE_MACOSX_DEPLOYMENT_TARGET="$MACOSX_DEPLOYMENT_TARGET"
            unset MACOSX_DEPLOYMENT_TARGET
            CXXFLAGS="${LLVM_CXXFLAGS}"
            CXX="${HOST_CXX}"
            cat > conftest.$ac_ext <<EOF
#line 13006 "configure"
#include "confdefs.h"
#include "clang/ASTMatchers/ASTMatchers.h"
int main() {
clang::ast_matchers::cxxConstructExpr();
; return 0; }
EOF
if { (eval echo configure:13013: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_have_new_ASTMatcher_names="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_have_new_ASTMatcher_names="no"
fi
rm -f conftest*
            CXX="$_SAVE_CXX"
            CXXFLAGS="$_SAVE_CXXFLAGS"
            export MACOSX_DEPLOYMENT_TARGET="$_SAVE_MACOSX_DEPLOYMENT_TARGET"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cv_have_new_ASTMatcher_api" 1>&6
    if test "$ac_cv_have_new_ASTMatcher_names" = "yes"; then
      LLVM_CXXFLAGS="$LLVM_CXXFLAGS -DHAVE_NEW_ASTMATCHER_NAMES"
    fi

                echo $ac_n "checking for has with ignoringParenImpCasts""... $ac_c" 1>&6
echo "configure:13042: checking for has with ignoringParenImpCasts" >&5
if eval "test \"`echo '$''{'ac_cv_has_accepts_ignoringParenImpCasts'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
            
            ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

            _SAVE_CXXFLAGS="$CXXFLAGS"
            _SAVE_CXX="$CXX"
            _SAVE_MACOSX_DEPLOYMENT_TARGET="$MACOSX_DEPLOYMENT_TARGET"
            unset MACOSX_DEPLOYMENT_TARGET
            CXXFLAGS="${LLVM_CXXFLAGS}"
            CXX="${HOST_CXX}"
            cat > conftest.$ac_ext <<EOF
#line 13062 "configure"
#include "confdefs.h"
#include "clang/ASTMatchers/ASTMatchers.h"
int main() {
using namespace clang::ast_matchers;
                            expr(has(ignoringParenImpCasts(declRefExpr())));
                           
; return 0; }
EOF
if { (eval echo configure:13071: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_has_accepts_ignoringParenImpCasts="yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_has_accepts_ignoringParenImpCasts="no"
fi
rm -f conftest*
            CXX="$_SAVE_CXX"
            CXXFLAGS="$_SAVE_CXXFLAGS"
            export MACOSX_DEPLOYMENT_TARGET="$_SAVE_MACOSX_DEPLOYMENT_TARGET"
            ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

        
fi

echo "$ac_t""$ac_cv_has_accepts_ignoringParenImpCasts" 1>&6
    if test "$ac_cv_has_accepts_ignoringParenImpCasts" = "yes"; then
      LLVM_CXXFLAGS="$LLVM_CXXFLAGS -DHAS_ACCEPTS_IGNORINGPARENIMPCASTS"
    fi

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_CLANG_PLUGIN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_CLANG_PLUGIN 1
EOF

fi









# Check whether --enable-strip or --disable-strip was given.
if test "${enable_strip+set}" = set; then
  enableval="$enable_strip"
  if test "$enableval" = "yes"; then
    ENABLE_STRIP=1
  elif test "$enableval" = "no"; then
    ENABLE_STRIP= 
  else
    { echo "configure: error: Option, strip, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, strip, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


# Check whether --enable-install-strip or --disable-install-strip was given.
if test "${enable_install_strip+set}" = set; then
  enableval="$enable_install_strip"
  if test "$enableval" = "yes"; then
    PKG_SKIP_STRIP= 
  elif test "$enableval" = "no"; then
    PKG_SKIP_STRIP=1
  else
    { echo "configure: error: Option, install-strip, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, install-strip, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi



USE_ELF_HACK=1
# Check whether --enable-elf-hack or --disable-elf-hack was given.
if test "${enable_elf_hack+set}" = set; then
  enableval="$enable_elf_hack"
  if test "$enableval" = "no"; then
    USE_ELF_HACK=
  elif test "$enableval" = "yes"; then
    USE_ELF_HACK=1
  else
    { echo "configure: error: Option, elf-hack, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, elf-hack, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


# Only enable elfhack where supported
if test "$USE_ELF_HACK" = 1; then
    case "${HOST_OS_ARCH},${OS_ARCH}" in
    Linux,Linux)
        case "${CPU_ARCH}" in
        arm | x86 | x86_64)
            USE_ELF_HACK=1
            ;;
        *)
            USE_ELF_HACK=
            ;;
        esac
        ;;
    *)
        USE_ELF_HACK=
        ;;
    esac
fi

if test -n "$COMPILE_ENVIRONMENT" -a -n "$USE_ELF_HACK"; then
                                        echo $ac_n "checking whether linker creates PT_GNU_RELRO segments""... $ac_c" 1>&6
echo "configure:13178: checking whether linker creates PT_GNU_RELRO segments" >&5
if eval "test \"`echo '$''{'LINK_WITH_PT_GNU_RELRO'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo "int main() {return 0;}" > conftest.${ac_ext}
         if { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS conftest.${ac_ext} $LIBS 1>&2'; { (eval echo configure:13183: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } &&
            test -s conftest${ac_exeext}; then
            if ${TOOLCHAIN_PREFIX}readelf -l conftest${ac_exeext} | grep GNU_RELRO > /dev/null; then
                LINK_WITH_PT_GNU_RELRO=yes
            else
                LINK_WITH_PT_GNU_RELRO=no
            fi
         else
                          { echo "configure: error: couldn't compile a simple C file" 1>&2; echo "configure: error: couldn't compile a simple C file" 1>&5; exit 1; }
         fi
         rm -rf conftest*
fi

echo "$ac_t""$LINK_WITH_PT_GNU_RELRO" 1>&6
    if test "$LINK_WITH_PT_GNU_RELRO" = yes; then
        if test "$USE_ELF_HACK" = F; then
            echo $ac_n "checking for -z norelro option to ld""... $ac_c" 1>&6
echo "configure:13200: checking for -z norelro option to ld" >&5
            _SAVE_LDFLAGS=$LDFLAGS
            LDFLAGS="$LDFLAGS -Wl,-z,norelro"
            cat > conftest.$ac_ext <<EOF
#line 13204 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:13211: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                        NSPR_LDFLAGS="$NSPR_LDFLAGS -Wl,-z,norelro"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  { echo "configure: error: --enable-elf-hack is not compatible with a linker creating a PT_GNU_RELRO segment and that doesn't support the "-z norelro" option." 1>&2; echo "configure: error: --enable-elf-hack is not compatible with a linker creating a PT_GNU_RELRO segment and that doesn't support the "-z norelro" option." 1>&5; exit 1; }
fi
rm -f conftest*
            USE_ELF_HACK=1
        else
            echo "configure: warning: Disabling elfhack" 1>&2
            USE_ELF_HACK=
        fi
    fi
fi # COMPILE_ENVIRONMENT and others.


STDCXX_COMPAT=
# Check whether --enable-stdcxx-compat or --disable-stdcxx-compat was given.
if test "${enable_stdcxx_compat+set}" = set; then
  enableval="$enable_stdcxx_compat"
  if test "$enableval" = "yes"; then
    STDCXX_COMPAT=1
  elif test "$enableval" = "no"; then
    :
  else
    { echo "configure: error: Option, stdcxx-compat, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, stdcxx-compat, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$STDCXX_COMPAT"; then
   eval $(CXX="$CXX" HOST_CXX="$HOST_CXX" $PYTHON -m mozbuild.configure.libstdcxx)
   
   
   CXXFLAGS="$CXXFLAGS -D_GLIBCXX_USE_CXX11_ABI=0"
   HOST_CXXFLAGS="$HOST_CXXFLAGS -D_GLIBCXX_USE_CXX11_ABI=0"
fi


# Check whether --enable-debug-js-modules or --disable-debug-js-modules was given.
if test "${enable_debug_js_modules+set}" = set; then
  enableval="$enable_debug_js_modules"
  if test "$enableval" = "yes"; then
    DEBUG_JS_MODULES=1
  elif test "$enableval" = "no"; then
    DEBUG_JS_MODULES=
  else
    { echo "configure: error: Option, debug-js-modules, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, debug-js-modules, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi




MOZ_DISABLE_PRECOMPILED_STARTUPCACHE=

# Check whether --enable-precompiled-startupcache or --disable-precompiled-startupcache was given.
if test "${enable_precompiled_startupcache+set}" = set; then
  enableval="$enable_precompiled_startupcache"
  if test "$enableval" = "no"; then
    MOZ_DISABLE_PRECOMPILED_STARTUPCACHE=1
  elif test "$enableval" = "yes"; then
    MOZ_DISABLE_PRECOMPILED_STARTUPCACHE= 
  else
    { echo "configure: error: Option, precompiled-startupcache, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, precompiled-startupcache, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_DISABLE_PRECOMPILED_STARTUPCACHE"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DISABLE_PRECOMPILED_STARTUPCACHE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DISABLE_PRECOMPILED_STARTUPCACHE 1
EOF

fi



# Profiling and Instrumenting

# Check whether --enable-tasktracer or --disable-tasktracer was given.
if test "${enable_tasktracer+set}" = set; then
  enableval="$enable_tasktracer"
  if test "$enableval" = "yes"; then
    MOZ_TASK_TRACER=1
  elif test "$enableval" = "no"; then
    MOZ_TASK_TRACER= 
  else
    { echo "configure: error: Option, tasktracer, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, tasktracer, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_TASK_TRACER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TASK_TRACER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TASK_TRACER 1
EOF

    
fi

# Check whether --enable-reflow-perf or --disable-reflow-perf was given.
if test "${enable_reflow_perf+set}" = set; then
  enableval="$enable_reflow_perf"
  if test "$enableval" = "yes"; then
    MOZ_REFLOW_PERF=1
  elif test "$enableval" = "no"; then
    MOZ_REFLOW_PERF= 
  else
    { echo "configure: error: Option, reflow-perf, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, reflow-perf, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_REFLOW_PERF"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_REFLOW_PERF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_REFLOW_PERF 1
EOF

fi

if test -n "$MOZ_HORIZON"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_HORIZON ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_HORIZON 1
EOF

fi



# Check whether --enable-startupcache or --disable-startupcache was given.
if test "${enable_startupcache+set}" = set; then
  enableval="$enable_startupcache"
  if test "$enableval" = "no"; then
    MOZ_DISABLE_STARTUPCACHE=1
  elif test "$enableval" = "yes"; then
    MOZ_DISABLE_STARTUPCACHE=
  else
    { echo "configure: error: Option, startupcache, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, startupcache, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_DISABLE_STARTUPCACHE"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DISABLE_STARTUPCACHE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DISABLE_STARTUPCACHE 1
EOF

fi


if test -n "$GAIADIR" -a ! -d "$GAIADIR" ; then
    { echo "configure: error: GAIADIR '$GAIADIR' isn't a valid directory" 1>&2; echo "configure: error: GAIADIR '$GAIADIR' isn't a valid directory" 1>&5; exit 1; }
fi


if test -n "$GAIADIR" ; then
    cat >> confdefs.pytmp <<\EOF
    (''' PACKAGE_GAIA ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define PACKAGE_GAIA 1
EOF

fi

if test -n "$FXOS_SIMULATOR" -a -z "$GAIADIR" ; then
    { echo "configure: error: FXOS_SIMULATOR=1 requires GAIADIR to be defined" 1>&2; echo "configure: error: FXOS_SIMULATOR=1 requires GAIADIR to be defined" 1>&5; exit 1; }
fi

if test -n "$FXOS_SIMULATOR" ; then
    cat >> confdefs.pytmp <<\EOF
    (''' FXOS_SIMULATOR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define FXOS_SIMULATOR 1
EOF

    
fi

# Check whether --enable-synth-pico or --disable-synth-pico was given.
if test "${enable_synth_pico+set}" = set; then
  enableval="$enable_synth_pico"
  if test "$enableval" = "yes"; then
    MOZ_SYNTH_PICO=1
  elif test "$enableval" = "no"; then
    MOZ_SYNTH_PICO= 
  else
    { echo "configure: error: Option, synth-pico, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, synth-pico, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$MOZ_SYNTH_PICO"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SYNTH_PICO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SYNTH_PICO 1
EOF

fi


if test -n "$MOZ_TIME_MANAGER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TIME_MANAGER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TIME_MANAGER 1
EOF

fi


if test -n "$MOZ_AUDIO_CHANNEL_MANAGER"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_AUDIO_CHANNEL_MANAGER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_AUDIO_CHANNEL_MANAGER 1
EOF

fi


   MOZ_SECUREELEMENT=1,
if test -n "$MOZ_SECUREELEMENT"; then
   cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SECUREELEMENT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SECUREELEMENT 1
EOF

fi
 

if test -z "$SKIP_LIBRARY_CHECKS"; then
    
    ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

    for ac_func in __cxa_demangle
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:13478: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13483 "configure"
#define $ac_func innocuous_$ac_func
#include "confdefs.h"
#undef $ac_func
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#define $ac_func innocuous_$ac_func
#include <assert.h>
#undef $ac_func
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:13513: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 HAVE_DEMANGLE=1
else
  echo "$ac_t""no" 1>&6
HAVE_DEMANGLE=
fi
done

    ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

fi

# Demangle only for debug or DMD builds
MOZ_DEMANGLE_SYMBOLS=
if test "$HAVE_DEMANGLE" && test "$MOZ_DEBUG"; then
    MOZ_DEMANGLE_SYMBOLS=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DEMANGLE_SYMBOLS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DEMANGLE_SYMBOLS 1
EOF

fi


if test -z "$SKIP_LIBRARY_CHECKS"; then
    
    ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

       ac_safe=`echo "unwind.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for unwind.h""... $ac_c" 1>&6
echo "configure:13575: checking for unwind.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 13580 "configure"
#include "confdefs.h"

#include <unwind.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:13588: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    for ac_func in _Unwind_Backtrace
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:13605: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13610 "configure"
#define $ac_func innocuous_$ac_func
#include "confdefs.h"
#undef $ac_func
/* System header to define __stub macros and hopefully few prototypes
  else
    echo "$ac_t""no" 1>&6
    which can conflict with char $ac_func(); below.  */
#define $ac_func innocuous_$ac_func
#include <assert.h>
#undef $ac_func
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:13642: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  fi

    ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

fi


# Check whether --with-jitreport-granularity or --without-jitreport-granularity was given.
if test "${with_jitreport_granularity+set}" = set; then
  withval="$with_jitreport_granularity"
  JITREPORT_GRANULARITY=$withval
else
  JITREPORT_GRANULARITY=3
fi


cat >> confdefs.pytmp <<EOF
    (''' JS_DEFAULT_JITREPORT_GRANULARITY ''', r''' $JITREPORT_GRANULARITY ''')
EOF
cat >> confdefs.h <<EOF
#define JS_DEFAULT_JITREPORT_GRANULARITY $JITREPORT_GRANULARITY
EOF


# Check whether --enable-mozril-geoloc or --disable-mozril-geoloc was given.
if test "${enable_mozril_geoloc+set}" = set; then
  enableval="$enable_mozril_geoloc"
  if test "$enableval" = "no"; then
    DISABLE_MOZ_RIL_GEOLOC=1
  elif test "$enableval" = "yes"; then
    DISABLE_MOZ_RIL_GEOLOC= 
  else
    { echo "configure: error: Option, mozril-geoloc, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, mozril-geoloc, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test -n "$DISABLE_MOZ_RIL_GEOLOC"; then
   cat >> confdefs.pytmp <<\EOF
    (''' DISABLE_MOZ_RIL_GEOLOC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define DISABLE_MOZ_RIL_GEOLOC 1
EOF

fi


# Misc. Options

# Check whether --enable-chrome-format or --disable-chrome-format was given.
if test "${enable_chrome_format+set}" = set; then
  enableval="$enable_chrome_format"
  MOZ_CHROME_FILE_FORMAT=`echo $enableval | tr A-Z a-z`
fi


if test -z "$MOZ_CHROME_FILE_FORMAT"; then
    MOZ_CHROME_FILE_FORMAT=omni
fi

if test "$MOZ_CHROME_FILE_FORMAT" = "symlink"; then
    { echo "configure: error: --enable-chrome-format=symlink has been deprecated. It is now used by default in $DIST/bin on platforms that support it" 1>&2; echo "configure: error: --enable-chrome-format=symlink has been deprecated. It is now used by default in $DIST/bin on platforms that support it" 1>&5; exit 1; }
fi

if test "$MOZ_CHROME_FILE_FORMAT" != "jar" &&
    test "$MOZ_CHROME_FILE_FORMAT" != "flat" &&
    test "$MOZ_CHROME_FILE_FORMAT" != "omni"; then
    { echo "configure: error: --enable-chrome-format must be set to either jar, flat, or omni" 1>&2; echo "configure: error: --enable-chrome-format must be set to either jar, flat, or omni" 1>&5; exit 1; }
fi

# Check whether --enable-chrome-compression or --disable-chrome-compression was given.
if test "${enable_chrome_compression+set}" = set; then
  enableval="$enable_chrome_compression"
  JAR_COMPRESSION=`echo $enableval | tr A-Z a-z`
fi


if test -z "$JAR_COMPRESSION"; then
    JAR_COMPRESSION=deflate
fi

if test "$JAR_COMPRESSION" != "none" &&
    test "$JAR_COMPRESSION" != "deflate" &&
    test "$JAR_COMPRESSION" != "brotli"; then
    { echo "configure: error: --enable-chrome-compression must be set to either none, deflate, or brotli" 1>&2; echo "configure: error: --enable-chrome-compression must be set to either none, deflate, or brotli" 1>&5; exit 1; }
fi

if test "$MOZ_CHROME_FILE_FORMAT" = "omni"; then
    MOZ_OMNIJAR=1
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_OMNIJAR ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_OMNIJAR 1
EOF

fi

# Allow someone to change OMNIJAR_NAME in mozconfig
# Check whether --with-chrome-name or --without-chrome-name was given.
if test "${with_chrome_name+set}" = set; then
  withval="$with_chrome_name"
   val=`echo $withval`
    OMNIJAR_NAME="$val"
fi


# Default Omni Jar Name
if test -z "$OMNIJAR_NAME" ; then
    OMNIJAR_NAME=omni.ja
fi

MOZ_PACKAGER_FORMAT="$MOZ_CHROME_FILE_FORMAT"
if test "$OS_ARCH" = "WINNT"; then
    MOZ_CHROME_FILE_FORMAT=flat
else
    MOZ_CHROME_FILE_FORMAT=symlink
fi







# Check whether --enable-jetpack or --disable-jetpack was given.
if test "${enable_jetpack+set}" = set; then
  enableval="$enable_jetpack"
  if test "$enableval" = "no"; then
    MOZ_JETPACK=
  elif test "$enableval" = "yes"; then
    MOZ_JETPACK=1
  else
    { echo "configure: error: Option, jetpack, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, jetpack, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_JETPACK"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_JETPACK ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_JETPACK 1
EOF

fi



# Check whether --enable-devtools-server or --disable-devtools-server was given.
if test "${enable_devtools_server+set}" = set; then
  enableval="$enable_devtools_server"
  if test "$enableval" = "no"; then
    MOZ_DEVTOOLS_SERVER=
  elif test "$enableval" = "yes"; then
    MOZ_DEVTOOLS_SERVER=1
  else
    { echo "configure: error: Option, devtools-server, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, devtools-server, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi




if test -n "$MOZ_DEVTOOLS_SERVER"; then
    if test ! -n "$MOZ_JETPACK"; then
        { echo "configure: error: "Jetpack is required to include the Developer Tools Server"" 1>&2; echo "configure: error: "Jetpack is required to include the Developer Tools Server"" 1>&5; exit 1; }
    fi

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DEVTOOLS_SERVER ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DEVTOOLS_SERVER 1
EOF

fi



# Check whether --enable-devtools or --disable-devtools was given.
if test "${enable_devtools+set}" = set; then
  enableval="$enable_devtools"
  if test "$enableval" = "yes"; then
    MOZ_DEVTOOLS=1
  elif test "$enableval" = "no"; then
    MOZ_DEVTOOLS=
  else
    { echo "configure: error: Option, devtools, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, devtools, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_DEVTOOLS"; then
    if test ! -n "$MOZ_DEVTOOLS_SERVER"; then
        { echo "configure: error: "The Developer Tools Server is required to include the client"" 1>&2; echo "configure: error: "The Developer Tools Server is required to include the client"" 1>&5; exit 1; }
    fi

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DEVTOOLS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DEVTOOLS 1
EOF

fi



# Check whether --enable-userinfo or --disable-userinfo was given.
if test "${enable_userinfo+set}" = set; then
  enableval="$enable_userinfo"
  if test "$enableval" = "no"; then
    MOZ_USERINFO=
  elif test "$enableval" = "yes"; then
    MOZ_USERINFO=1
  else
    { echo "configure: error: Option, userinfo, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, userinfo, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test -n "$MOZ_USERINFO"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_USERINFO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_USERINFO 1
EOF

fi



# Check whether --with-default-mozilla-five-home or --without-default-mozilla-five-home was given.
if test "${with_default_mozilla_five_home+set}" = set; then
  withval="$with_default_mozilla_five_home"
   val=`echo $withval`
  cat >> confdefs.pytmp <<EOF
    (''' MOZ_DEFAULT_MOZILLA_FIVE_HOME ''', r''' "$val" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_DEFAULT_MOZILLA_FIVE_HOME "$val"
EOF
 
fi


# Check whether --with-user-appdir or --without-user-appdir was given.
if test "${with_user_appdir+set}" = set; then
  withval="$with_user_appdir"
   val=`echo $withval`
if echo "$val" | grep "\/" >/dev/null; then
    { echo "configure: error: "Homedir must be single relative path."" 1>&2; echo "configure: error: "Homedir must be single relative path."" 1>&5; exit 1; }
else
    MOZ_USER_DIR="$val"
fi
fi


cat >> confdefs.pytmp <<EOF
    (''' MOZ_USER_DIR ''', r''' "$MOZ_USER_DIR" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_USER_DIR "$MOZ_USER_DIR"
EOF


MOZ_DOC_INPUT_DIRS='./dist/include ./dist/idl'
# Check whether --with-doc-input-dirs or --without-doc-input-dirs was given.
if test "${with_doc_input_dirs+set}" = set; then
  withval="$with_doc_input_dirs"
   MOZ_DOC_INPUT_DIRS=`echo "$withval" | sed "s/,/ /g"`  
fi



MOZ_DOC_INCLUDE_DIRS='./dist/include ./dist/include/nspr'
# Check whether --with-doc-include-dirs or --without-doc-include-dirs was given.
if test "${with_doc_include_dirs+set}" = set; then
  withval="$with_doc_include_dirs"
   MOZ_DOC_INCLUDE_DIRS=`echo "$withval" | sed "s/,/ /g"`  
fi



MOZ_DOC_OUTPUT_DIR='./dist/docs'
# Check whether --with-doc-output-dir or --without-doc-output-dir was given.
if test "${with_doc_output_dir+set}" = set; then
  withval="$with_doc_output_dir"
   MOZ_DOC_OUTPUT_DIR=$withval  
fi



if test -z "$SKIP_COMPILER_CHECKS"; then
# Compiler Options

echo $ac_n "checking for -pipe support""... $ac_c" 1>&6
echo "configure:13974: checking for -pipe support" >&5
if test -n "$GNU_CC" -a -n "$GNU_CXX"; then
        CFLAGS="$CFLAGS -pipe"
    CXXFLAGS="$CXXFLAGS -pipe"
    echo "$ac_t""yes" 1>&6
else
    echo "$ac_t""no" 1>&6
fi


_SAVE_CFLAGS="$CFLAGS"
CFLAGS="$CFLAGS -fprofile-generate -fprofile-correction"

echo $ac_n "checking whether C compiler supports -fprofile-generate""... $ac_c" 1>&6
echo "configure:13988: checking whether C compiler supports -fprofile-generate" >&5
cat > conftest.$ac_ext <<EOF
#line 13990 "configure"
#include "confdefs.h"

int main() {
return 0;
; return 0; }
EOF
if { (eval echo configure:13997: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
   PROFILE_GEN_CFLAGS="-fprofile-generate"
                 result="yes" 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  result="no"
fi
rm -f conftest*
echo "$ac_t""$result" 1>&6

if test $result = "yes"; then
  PROFILE_GEN_LDFLAGS="-fprofile-generate"
  PROFILE_USE_CFLAGS="-fprofile-use -fprofile-correction -Wcoverage-mismatch"
  PROFILE_USE_LDFLAGS="-fprofile-use"
fi

CFLAGS="$_SAVE_CFLAGS"






fi # ! SKIP_COMPILER_CHECKS

cat >> confdefs.pytmp <<\EOF
    (''' CPP_THROW_NEW ''', r''' throw() ''')
EOF
cat >> confdefs.h <<\EOF
#define CPP_THROW_NEW throw()
EOF

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross


if test "$COMPILE_ENVIRONMENT"; then


echo $ac_n "checking what kind of list files are supported by the linker""... $ac_c" 1>&6
echo "configure:14044: checking what kind of list files are supported by the linker" >&5
if eval "test \"`echo '$''{'EXPAND_LIBS_LIST_STYLE'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo "int main() {return 0;}" > conftest.${ac_ext}
     if { ac_try='${CC-cc} -o conftest.${OBJ_SUFFIX} -c $CFLAGS $CPPFLAGS conftest.${ac_ext} 1>&5'; { (eval echo configure:14049: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } && test -s conftest.${OBJ_SUFFIX}; then
         echo "INPUT(conftest.${OBJ_SUFFIX})" > conftest.list
         if { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS conftest.list $LIBS 1>&5'; { (eval echo configure:14051: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } && test -s conftest${ac_exeext}; then
             EXPAND_LIBS_LIST_STYLE=linkerscript
         else
             echo "conftest.${OBJ_SUFFIX}" > conftest.list
                                                                 if { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS -Wl,-filelist,conftest.list $LIBS 1>&5'; { (eval echo configure:14055: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } && test -s conftest${ac_exeext}; then
                 EXPAND_LIBS_LIST_STYLE=filelist
             elif { ac_try='${CC-cc} -o conftest${ac_exeext} $LDFLAGS @conftest.list $LIBS 1>&5'; { (eval echo configure:14057: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } && test -s conftest${ac_exeext}; then
                 EXPAND_LIBS_LIST_STYLE=list
             else
                 EXPAND_LIBS_LIST_STYLE=none
             fi
         fi
     else
                  { echo "configure: error: couldn't compile a simple C file" 1>&2; echo "configure: error: couldn't compile a simple C file" 1>&5; exit 1; }
     fi
     rm -rf conftest*
fi

echo "$ac_t""$EXPAND_LIBS_LIST_STYLE" 1>&6

LIBS_DESC_SUFFIX=desc



if test "$GCC_USE_GNU_LD"; then
    echo $ac_n "checking what kind of ordering can be done with the linker""... $ac_c" 1>&6
echo "configure:14077: checking what kind of ordering can be done with the linker" >&5
if eval "test \"`echo '$''{'EXPAND_LIBS_ORDER_STYLE'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  > conftest.order
         _SAVE_LDFLAGS="$LDFLAGS"
         LDFLAGS="${LDFLAGS} -Wl,--section-ordering-file,conftest.order"
         cat > conftest.$ac_ext <<EOF
#line 14085 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:14092: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  EXPAND_LIBS_ORDER_STYLE=section-ordering-file
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  EXPAND_LIBS_ORDER_STYLE=
fi
rm -f conftest*
         LDFLAGS="$_SAVE_LDFLAGS"
         if test -z "$EXPAND_LIBS_ORDER_STYLE"; then
             if { ac_try='${CC-cc} ${DSO_LDOPTS} ${LDFLAGS} -o ${DLL_PREFIX}conftest${DLL_SUFFIX} -Wl'; { (eval echo configure:14104: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
                 EXPAND_LIBS_ORDER_STYLE=linkerscript
             else
                 EXPAND_LIBS_ORDER_STYLE=none
             fi
             rm -f ${DLL_PREFIX}conftest${DLL_SUFFIX}
         fi
fi

echo "$ac_t""$EXPAND_LIBS_ORDER_STYLE" 1>&6
fi



fi # COMPILE_ENVIRONMENT

# Build dependencies

if test "$GNU_CC" -a "$GNU_CXX"; then
  _DEPEND_CFLAGS='-MD -MP -MF $(MDDEPDIR)/$(@F).pp'
else
    if test -z "$_WIN32_MSVC"; then
    _USE_CPP_INCLUDE_FLAG=
    _DEFINES_CFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'
    _DEFINES_CXXFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'
  else
    echo '#include <stdio.h>' > dummy-hello.c
    
        _CL_PREFIX_REGEX="^\([^:]*:.*[ :] \)\(.*\\\stdio.h\)$"
    CL_INCLUDES_PREFIX=`${CC} -showIncludes -c -Fonul dummy-hello.c 2>&1 | sed -ne 's/'"$_CL_PREFIX_REGEX"'/\1/p'`
    _CL_STDIO_PATH=`${CC} -showIncludes -c -Fonul dummy-hello.c 2>&1 | sed -ne 's/'"$_CL_PREFIX_REGEX"'/\2/p'`
    
    if ! test -e "$_CL_STDIO_PATH"; then
        { echo "configure: error: Unable to parse cl -showIncludes prefix. This compiler's locale has an unsupported formatting." 1>&2; echo "configure: error: Unable to parse cl -showIncludes prefix. This compiler's locale has an unsupported formatting." 1>&5; exit 1; }
    fi
    if test -z "$CL_INCLUDES_PREFIX"; then
        { echo "configure: error: Cannot find cl -showIncludes prefix." 1>&2; echo "configure: error: Cannot find cl -showIncludes prefix." 1>&5; exit 1; }
    fi
    
    rm -f dummy-hello.c

                NONASCII=$'\241\241'
    
  fi
fi

# Static build options

# Option to enable shared gkmedias on other target operating systems.
# This is overriden for Windows regardless if it is set or not.
# Check whether --enable-shared-media or --disable-shared-media was given.
if test "${enable_shared_media+set}" = set; then
  enableval="$enable_shared_media"
  if test "$enableval" = "yes"; then
    GKMEDIAS_SHARED_LIBRARY=1
  elif test "$enableval" = "no"; then
    GKMEDIAS_SHARED_LIBRARY=
  else
    { echo "configure: error: Option, shared-media, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, shared-media, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


# We want gkmedias always be enabled on Windows regardless of the enable bool.
if test "$OS_ARCH" = "WINNT"; then
  GKMEDIAS_SHARED_LIBRARY=1
fi

if test -n "$GKMEDIAS_SHARED_LIBRARY"; then
  cat >> confdefs.pytmp <<\EOF
    (''' GKMEDIAS_SHARED_LIBRARY ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define GKMEDIAS_SHARED_LIBRARY 1
EOF

fi



# Shared JS or gkmedias needs zlib in mozglue
if test -z "$MOZ_SYSTEM_ZLIB"; then
  # XXX: Currently JS_SHARED_LIBRARY lives in mozconfigure
  if test -n "$JS_SHARED_LIBRARY" -o "$GKMEDIAS_SHARED_LIBRARY"; then
    ZLIB_IN_MOZGLUE=1
    cat >> confdefs.pytmp <<\EOF
    (''' ZLIB_IN_MOZGLUE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ZLIB_IN_MOZGLUE 1
EOF

  fi
fi



# Standalone module options (Not for building Mozilla)


if test -z "$SKIP_PATH_CHECKS"; then
if test -z "${GLIB_CFLAGS}" -o -z "${GLIB_LIBS}" ; then
    if test "$MOZ_ENABLE_GTK" ; then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for glib-2.0 >= 1.3.7 gobject-2.0""... $ac_c" 1>&6
echo "configure:14218: checking for glib-2.0 >= 1.3.7 gobject-2.0" >&5

        if $PKG_CONFIG --exists "glib-2.0 >= 1.3.7 gobject-2.0" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking GLIB_CFLAGS""... $ac_c" 1>&6
echo "configure:14225: checking GLIB_CFLAGS" >&5
            GLIB_CFLAGS=`$PKG_CONFIG --cflags "glib-2.0 >= 1.3.7 gobject-2.0"`
            echo "$ac_t""$GLIB_CFLAGS" 1>&6

            echo $ac_n "checking GLIB_LIBS""... $ac_c" 1>&6
echo "configure:14230: checking GLIB_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            GLIB_LIBS="`$PKG_CONFIG --libs \"glib-2.0 >= 1.3.7 gobject-2.0\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$GLIB_LIBS" 1>&6
        else
            GLIB_CFLAGS=""
            GLIB_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            GLIB_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "glib-2.0 >= 1.3.7 gobject-2.0"`
            echo $GLIB_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (glib-2.0 >= 1.3.7 gobject-2.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (glib-2.0 >= 1.3.7 gobject-2.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

    fi
fi
fi

if test -z "${GLIB_GMODULE_LIBS}" \
   -a -n "${GLIB_CONFIG}"\
    -a "${GLIB_CONFIG}" != no\
; then
    GLIB_GMODULE_LIBS=`$GLIB_CONFIG gmodule --libs`
fi



if test "$USE_FC_FREETYPE"; then
    if test "$COMPILE_ENVIRONMENT"; then
                                if test "$_HAVE_FREETYPE2" -a -z "$MOZ_TREE_FREETYPE"; then
            _SAVE_LIBS="$LIBS"
            _SAVE_CFLAGS="$CFLAGS"
            LIBS="$LIBS $FT2_LIBS"
            CFLAGS="$CFLAGS $FT2_CFLAGS"

            echo $ac_n "checking for FT_Bitmap_Size.y_ppem""... $ac_c" 1>&6
echo "configure:14281: checking for FT_Bitmap_Size.y_ppem" >&5
if eval "test \"`echo '$''{'ac_cv_member_FT_Bitmap_Size_y_ppem'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14286 "configure"
#include "confdefs.h"
#include <ft2build.h>
                                 #include FT_FREETYPE_H
int main() {
FT_Bitmap_Size s;
                                 if (sizeof s.y_ppem) return 0;
                                 return 1
; return 0; }
EOF
if { (eval echo configure:14296: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_member_FT_Bitmap_Size_y_ppem=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_member_FT_Bitmap_Size_y_ppem=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_member_FT_Bitmap_Size_y_ppem" 1>&6
            if test "$ac_cv_member_FT_Bitmap_Size_y_ppem" = yes; then
                HAVE_FT_BITMAP_SIZE_Y_PPEM=1
            else
                HAVE_FT_BITMAP_SIZE_Y_PPEM=0
            fi
            cat >> confdefs.pytmp <<EOF
    (''' HAVE_FT_BITMAP_SIZE_Y_PPEM ''', r''' $HAVE_FT_BITMAP_SIZE_Y_PPEM ''')
EOF
cat >> confdefs.h <<EOF
#define HAVE_FT_BITMAP_SIZE_Y_PPEM $HAVE_FT_BITMAP_SIZE_Y_PPEM
EOF


            for ac_func in FT_GlyphSlot_Embolden FT_Load_Sfnt_Table
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:14325: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14330 "configure"
#define $ac_func innocuous_$ac_func
#include "confdefs.h"
#undef $ac_func
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#define $ac_func innocuous_$ac_func
#include <assert.h>
#undef $ac_func
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:14357: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


            LIBS="$_SAVE_LIBS"
            CFLAGS="$_SAVE_CFLAGS"
        fi

        _SAVE_CPPFLAGS="$CPPFLAGS"
        CPPFLAGS="$CPPFLAGS $FT2_CFLAGS $XCFLAGS"
         for ac_hdr in fontconfig/fcfreetype.h
  do
       ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:14395: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 14400 "configure"
#include "confdefs.h"
#include <fontconfig/fontconfig.h>
#include <$ac_hdr>
int main() {

; return 0; }
EOF
if { (eval echo configure:14408: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
                       cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_hdr ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
  else
    echo "$ac_t""no" 1>&6
    { echo "configure: error: Can't find header fontconfig/fcfreetype.h." 1>&2; echo "configure: error: Can't find header fontconfig/fcfreetype.h." 1>&5; exit 1; }
  fi

  done

        CPPFLAGS="$_SAVE_CPPFLAGS"
    fi
fi


MOZ_TREE_CAIRO=1
# Check whether --enable-system-cairo or --disable-system-cairo was given.
if test "${enable_system_cairo+set}" = set; then
  enableval="$enable_system_cairo"
  if test "$enableval" = "yes"; then
    MOZ_TREE_CAIRO=
  elif test "$enableval" = "no"; then
    MOZ_TREE_CAIRO=1 
  else
    { echo "configure: error: Option, system-cairo, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, system-cairo, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


MOZ_TREE_PIXMAN=1
# Check whether --enable-system-pixman or --disable-system-pixman was given.
if test "${enable_system_pixman+set}" = set; then
  enableval="$enable_system_pixman"
  if test "$enableval" = "yes"; then
    MOZ_TREE_PIXMAN=
  elif test "$enableval" = "no"; then
    MOZ_TREE_PIXMAN=force
  else
    { echo "configure: error: Option, system-pixman, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, system-pixman, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
else
  MOZ_TREE_PIXMAN=1 
fi


# System cairo depends on system pixman
if test "$MOZ_TREE_PIXMAN" = "force"; then
    if test -z "$MOZ_TREE_CAIRO"; then
        { echo "configure: error: --disable-system-pixman is incompatible with --enable-system-cairo." 1>&2; echo "configure: error: --disable-system-pixman is incompatible with --enable-system-cairo." 1>&5; exit 1; }
    else
        MOZ_TREE_PIXMAN=1
    fi
elif test -z "$MOZ_TREE_CAIRO"; then
    MOZ_TREE_PIXMAN=
fi

if test "$MOZ_TREE_PIXMAN"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TREE_PIXMAN ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TREE_PIXMAN 1
EOF

else
    succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for pixman-1 >= 0.19.2""... $ac_c" 1>&6
echo "configure:14503: checking for pixman-1 >= 0.19.2" >&5

        if $PKG_CONFIG --exists "pixman-1 >= 0.19.2" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking MOZ_PIXMAN_CFLAGS""... $ac_c" 1>&6
echo "configure:14510: checking MOZ_PIXMAN_CFLAGS" >&5
            MOZ_PIXMAN_CFLAGS=`$PKG_CONFIG --cflags "pixman-1 >= 0.19.2"`
            echo "$ac_t""$MOZ_PIXMAN_CFLAGS" 1>&6

            echo $ac_n "checking MOZ_PIXMAN_LIBS""... $ac_c" 1>&6
echo "configure:14515: checking MOZ_PIXMAN_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            MOZ_PIXMAN_LIBS="`$PKG_CONFIG --libs \"pixman-1 >= 0.19.2\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$MOZ_PIXMAN_LIBS" 1>&6
        else
            MOZ_PIXMAN_CFLAGS=""
            MOZ_PIXMAN_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            MOZ_PIXMAN_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "pixman-1 >= 0.19.2"`
            echo $MOZ_PIXMAN_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (pixman-1 >= 0.19.2) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (pixman-1 >= 0.19.2) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

fi

if test "$MOZ_TREE_CAIRO"; then
    MOZ_CAIRO_CFLAGS="-I${DIST}/include/cairo"
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TREE_CAIRO ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TREE_CAIRO 1
EOF


    if test "$OS_ARCH" = "WINNT"; then
        # For now we assume that we will have a uint64_t available through
        # one of the above headers or mozstdint.h.
        cat >> confdefs.pytmp <<\EOF
    (''' HAVE_UINT64_T ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UINT64_T 1
EOF

    fi

    # Define macros for cairo-features.h
    TEE_SURFACE_FEATURE="#define CAIRO_HAS_TEE_SURFACE 1"
    if test "$MOZ_X11"; then
        XLIB_SURFACE_FEATURE="#define CAIRO_HAS_XLIB_SURFACE 1"
        XLIB_XRENDER_SURFACE_FEATURE="#define CAIRO_HAS_XLIB_XRENDER_SURFACE 1"
        PS_SURFACE_FEATURE="#define CAIRO_HAS_PS_SURFACE 1"
    fi
    if test "$_HAVE_FREETYPE2"; then
        FT_FONT_FEATURE="#define CAIRO_HAS_FT_FONT 1"
        MOZ_ENABLE_CAIRO_FT=1
        CAIRO_FT_CFLAGS="$FT2_CFLAGS"
    fi

    case "$MOZ_WIDGET_TOOLKIT" in
      cocoa | uikit)
        QUARTZ_SURFACE_FEATURE="#define CAIRO_HAS_QUARTZ_SURFACE 1"
        QUARTZ_IMAGE_SURFACE_FEATURE="#define CAIRO_HAS_QUARTZ_IMAGE_SURFACE 1"
        QUARTZ_FONT_FEATURE="#define CAIRO_HAS_QUARTZ_FONT 1"
        ;;
      windows)
        WIN32_D2D_SURFACE_FEATURE="#define CAIRO_HAS_D2D_SURFACE 1"
        WIN32_DWRITE_FONT_FEATURE="#define CAIRO_HAS_DWRITE_FONT 1"
        WIN32_FONT_FEATURE="#define CAIRO_HAS_WIN32_FONT 1"
        WIN32_SURFACE_FEATURE="#define CAIRO_HAS_WIN32_SURFACE 1"
        MOZ_ENABLE_D2D_SURFACE=1
        MOZ_ENABLE_DWRITE_FONT=1

        if test "$COMPILE_ENVIRONMENT"; then

             ac_safe=`echo "d3d9.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for d3d9.h""... $ac_c" 1>&6
echo "configure:14599: checking for d3d9.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 14604 "configure"
#include "confdefs.h"

#include <d3d9.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:14612: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    MOZ_ENABLE_D3D9_LAYER=1
  else
    echo "$ac_t""no" 1>&6
    
  fi


                    if test -n "$WIN32_D2D_SURFACE_FEATURE"; then
               ac_safe=`echo "d3d10.h" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for d3d10.h""... $ac_c" 1>&6
echo "configure:14636: checking for d3d10.h" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   cat > conftest.$ac_ext <<EOF
#line 14641 "configure"
#include "confdefs.h"

#include <d3d10.h>
int main() {

; return 0; }
EOF
if { (eval echo configure:14649: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest* 
fi

  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
    MOZ_ENABLE_D3D10_LAYER=1
  else
    echo "$ac_t""no" 1>&6
    
  fi

          fi
        fi
        ;;
    esac
    if test "$USE_FC_FREETYPE"; then
        FC_FONT_FEATURE="#define CAIRO_HAS_FC_FONT 1"
    fi
    
    
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    if test "$MOZ_X11"; then
        MOZ_CAIRO_OSLIBS="$MOZ_CAIRO_OSLIBS $XLDFLAGS -lXrender"
    fi

    CAIRO_FEATURES_H=gfx/cairo/cairo/src/cairo-features.h
else
    succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for cairo >= $CAIRO_VERSION""... $ac_c" 1>&6
echo "configure:14718: checking for cairo >= $CAIRO_VERSION" >&5

        if $PKG_CONFIG --exists "cairo >= $CAIRO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking CAIRO_CFLAGS""... $ac_c" 1>&6
echo "configure:14725: checking CAIRO_CFLAGS" >&5
            CAIRO_CFLAGS=`$PKG_CONFIG --cflags "cairo >= $CAIRO_VERSION"`
            echo "$ac_t""$CAIRO_CFLAGS" 1>&6

            echo $ac_n "checking CAIRO_LIBS""... $ac_c" 1>&6
echo "configure:14730: checking CAIRO_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            CAIRO_LIBS="`$PKG_CONFIG --libs \"cairo >= $CAIRO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$CAIRO_LIBS" 1>&6
        else
            CAIRO_CFLAGS=""
            CAIRO_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            CAIRO_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "cairo >= $CAIRO_VERSION"`
            echo $CAIRO_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (cairo >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (cairo >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

    MOZ_CAIRO_CFLAGS="$CAIRO_CFLAGS"
    MOZ_CAIRO_LIBS="$CAIRO_LIBS"
    succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for cairo-tee >= $CAIRO_VERSION""... $ac_c" 1>&6
echo "configure:14772: checking for cairo-tee >= $CAIRO_VERSION" >&5

        if $PKG_CONFIG --exists "cairo-tee >= $CAIRO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking CAIRO_TEE_CFLAGS""... $ac_c" 1>&6
echo "configure:14779: checking CAIRO_TEE_CFLAGS" >&5
            CAIRO_TEE_CFLAGS=`$PKG_CONFIG --cflags "cairo-tee >= $CAIRO_VERSION"`
            echo "$ac_t""$CAIRO_TEE_CFLAGS" 1>&6

            echo $ac_n "checking CAIRO_TEE_LIBS""... $ac_c" 1>&6
echo "configure:14784: checking CAIRO_TEE_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            CAIRO_TEE_LIBS="`$PKG_CONFIG --libs \"cairo-tee >= $CAIRO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$CAIRO_TEE_LIBS" 1>&6
        else
            CAIRO_TEE_CFLAGS=""
            CAIRO_TEE_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            CAIRO_TEE_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "cairo-tee >= $CAIRO_VERSION"`
            echo $CAIRO_TEE_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (cairo-tee >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (cairo-tee >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

    if test "$MOZ_X11"; then
        succeeded=no

  if test -z "$PKG_CONFIG"; then
     echo "*** The pkg-config script could not be found. Make sure it is"
     echo "*** in your path, or set the PKG_CONFIG environment variable"
     echo "*** to the full path to pkg-config."
     echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
  else
     PKG_CONFIG_MIN_VERSION=0.9.0
     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
        echo $ac_n "checking for cairo-xlib-xrender >= $CAIRO_VERSION""... $ac_c" 1>&6
echo "configure:14825: checking for cairo-xlib-xrender >= $CAIRO_VERSION" >&5

        if $PKG_CONFIG --exists "cairo-xlib-xrender >= $CAIRO_VERSION" ; then
            echo "$ac_t""yes" 1>&6
            succeeded=yes

            echo $ac_n "checking CAIRO_XRENDER_CFLAGS""... $ac_c" 1>&6
echo "configure:14832: checking CAIRO_XRENDER_CFLAGS" >&5
            CAIRO_XRENDER_CFLAGS=`$PKG_CONFIG --cflags "cairo-xlib-xrender >= $CAIRO_VERSION"`
            echo "$ac_t""$CAIRO_XRENDER_CFLAGS" 1>&6

            echo $ac_n "checking CAIRO_XRENDER_LIBS""... $ac_c" 1>&6
echo "configure:14837: checking CAIRO_XRENDER_LIBS" >&5
            ## Remove evil flags like -Wl,--export-dynamic
            CAIRO_XRENDER_LIBS="`$PKG_CONFIG --libs \"cairo-xlib-xrender >= $CAIRO_VERSION\" |sed s/-Wl,--export-dynamic//g`"
            echo "$ac_t""$CAIRO_XRENDER_LIBS" 1>&6
        else
            CAIRO_XRENDER_CFLAGS=""
            CAIRO_XRENDER_LIBS=""
            ## If we have a custom action on failure, don't print errors, but 
            ## do set a variable so people can do so.
            CAIRO_XRENDER_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "cairo-xlib-xrender >= $CAIRO_VERSION"`
            echo $CAIRO_XRENDER_PKG_ERRORS
        fi

        
        
     else
        echo "*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer."
        echo "*** See http://www.freedesktop.org/software/pkgconfig"
     fi
  fi

  if test $succeeded = yes; then
     :
  else
     if test "$COMPILE_ENVIRONMENT"; then 
       { echo "configure: error: Library requirements (cairo-xlib-xrender >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&2; echo "configure: error: Library requirements (cairo-xlib-xrender >= $CAIRO_VERSION) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." 1>&5; exit 1; }
     fi
  fi

        MOZ_CAIRO_LIBS="$MOZ_CAIRO_LIBS $XLDFLAGS $CAIRO_XRENDER_LIBS"
        MOZ_CAIRO_OSLIBS="$MOZ_CAIRO_LIBS"
        MOZ_CAIRO_CFLAGS="$MOZ_CAIRO_CFLAGS $CAIRO_XRENDER_CFLAGS"
    fi
fi

case "$MOZ_WIDGET_TOOLKIT" in
android)
    TK_CFLAGS="$MOZ_CAIRO_CFLAGS $MOZ_PIXMAN_CFLAGS"
    TK_LIBS="$MOZ_CAIRO_LIBS $MOZ_PIXMAN_LIBS"
    ;;
esac







# Check whether --enable-xul or --disable-xul was given.
if test "${enable_xul+set}" = set; then
  enableval="$enable_xul"
  if test "$enableval" = "no"; then
    MOZ_XUL= 
  elif test "$enableval" = "yes"; then
    :
  else
    { echo "configure: error: Option, xul, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, xul, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi

if test "$MOZ_XUL"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_XUL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_XUL 1
EOF

else
    MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's/inspector//' -e 's/irc//' -e 's/tasks//'`
fi





# Check whether --enable-necko-wifi or --disable-necko-wifi was given.
if test "${enable_necko_wifi+set}" = set; then
  enableval="$enable_necko_wifi"
  if test "$enableval" = "no"; then
    MOZ_NECKO_WIFI=
  elif test "$enableval" = "yes"; then
    MOZ_NECKO_WIFI=1
  else
    { echo "configure: error: Option, necko-wifi, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, necko-wifi, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test "$MOZ_NECKO_WIFI"; then
  case "$OS_TARGET" in
    DragonFly|FreeBSD|WINNT)
      NECKO_WIFI=1
      ;;
    Linux)
      NECKO_WIFI=1
      NECKO_WIFI_DBUS=1
      ;;
  esac
fi

if test "$NECKO_WIFI"; then
  if test -z "$MOZ_ENABLE_DBUS" -a -n "$NECKO_WIFI_DBUS"; then
    { echo "configure: error: Necko WiFi scanning needs DBus on your platform, remove --disable-dbus or use --disable-necko-wifi" 1>&2; echo "configure: error: Necko WiFi scanning needs DBus on your platform, remove --disable-dbus or use --disable-necko-wifi" 1>&5; exit 1; }
  fi
  cat >> confdefs.pytmp <<\EOF
    (''' NECKO_WIFI ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NECKO_WIFI 1
EOF

  _NON_GLOBAL_ACDEFINES="$_NON_GLOBAL_ACDEFINES NECKO_WIFI"
fi



# Check whether --enable-cookies or --disable-cookies was given.
if test "${enable_cookies+set}" = set; then
  enableval="$enable_cookies"
  if test "$enableval" = "no"; then
    NECKO_COOKIES=
  elif test "$enableval" = "yes"; then
    NECKO_COOKIES=1
  else
    { echo "configure: error: Option, cookies, does not take an argument ($enableval)." 1>&2; echo "configure: error: Option, cookies, does not take an argument ($enableval)." 1>&5; exit 1; }
  fi
fi


if test "$NECKO_COOKIES"; then
    cat >> confdefs.pytmp <<\EOF
    (''' NECKO_COOKIES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NECKO_COOKIES 1
EOF

    _NON_GLOBAL_ACDEFINES="$_NON_GLOBAL_ACDEFINES NECKO_COOKIES"
fi

if test "$OS_TARGET" != "Android"; then
    cat >> confdefs.pytmp <<\EOF
    (''' ENABLE_MARIONETTE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ENABLE_MARIONETTE 1
EOF

fi

if test "$ENABLE_MARIONETTE"; then
    cat >> confdefs.pytmp <<\EOF
    (''' ENABLE_MARIONETTE ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define ENABLE_MARIONETTE 1
EOF

fi



if test "$MOZ_PLACES"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_PLACES ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_PLACES 1
EOF

fi


if test -n "$MOZ_SERVICES_HEALTHREPORT"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SERVICES_HEALTHREPORT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SERVICES_HEALTHREPORT 1
EOF

fi


if test -n "$MOZ_SERVICES_SYNC"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_SERVICES_SYNC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_SERVICES_SYNC 1
EOF

fi


if test "$MOZ_DEBUG"; then
    MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS=
fi






















































if test -n "$MOZ_JSDOWNLOADS"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_JSDOWNLOADS ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_JSDOWNLOADS 1
EOF

fi

# Check whether --with-macbundlename-prefix or --without-macbundlename-prefix was given.
if test "${with_macbundlename_prefix+set}" = set; then
  withval="$with_macbundlename_prefix"
   MOZ_MACBUNDLE_NAME_PREFIX="$withval"
fi


MOZ_MACBUNDLE_NAME=$MOZ_APP_DISPLAYNAME
if test "$MOZ_MACBUNDLE_NAME_PREFIX"; then
  MOZ_MACBUNDLE_NAME="${MOZ_MACBUNDLE_NAME_PREFIX} ${MOZ_MACBUNDLE_NAME}"
fi

if test "$MOZ_DEBUG"; then
  MOZ_MACBUNDLE_NAME="${MOZ_MACBUNDLE_NAME}Debug.app"
else
  MOZ_MACBUNDLE_NAME=${MOZ_MACBUNDLE_NAME}.app
fi


MOZ_MACBUNDLE_ID=`echo $MOZ_APP_DISPLAYNAME | tr 'A-Z' 'a-z'`
MOZ_MACBUNDLE_ID=${MOZ_DISTRIBUTION_ID}.${MOZ_MACBUNDLE_ID}
if test "$MOZ_DEBUG"; then
  MOZ_MACBUNDLE_ID=${MOZ_MACBUNDLE_ID}debug
fi

cat >> confdefs.pytmp <<EOF
    (''' MOZ_MACBUNDLE_ID ''', r''' $MOZ_MACBUNDLE_ID ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_MACBUNDLE_ID $MOZ_MACBUNDLE_ID
EOF



if test "$MOZ_WIDGET_TOOLKIT" != "android"; then
  MOZ_CHILD_PROCESS_NAME="plugin-container${BIN_SUFFIX}"
else
  # We want to let Android unpack the file at install time, but it only does
  # so if the file is named libsomething.so. The lib/ path is also required
  # because the unpacked file will be under the lib/ subdirectory and will
  # need to be executed from that path.
  MOZ_CHILD_PROCESS_NAME="libplugin-container.so"
  MOZ_CHILD_PROCESS_NAME_PIE="libplugin-container-pie.so"
  
fi
MOZ_CHILD_PROCESS_BUNDLE="plugin-container.app/Contents/MacOS/"




# The following variables are available to branding and application
# configuration ($BRANDING/configure.sh and $APPLICATION/confvars.sh):
# - MOZ_APP_VENDOR: Used for application.ini's "Vendor" field, which also
# impacts profile location and user-visible fields.
# - MOZ_APP_BASENAME: Typically stays consistent for multiple branded
# versions of a given application (e.g. Aurora and Firefox both use
# "Firefox"), but may vary for full rebrandings (e.g. Iceweasel). Used
# for application.ini's "Name" field, which controls profile location in
# the absence of a "Profile" field (see below), and various system
# integration hooks (Unix remoting, Windows MessageWindow name, etc.)
# - MOZ_APP_DISPLAYNAME: Used in user-visible fields (DLL properties,
# Mac Bundle name, Updater, Installer), it is typically used for nightly
# builds (e.g. Aurora for Firefox).
# - MOZ_APP_VERSION: Defines the application version number.
# - MOZ_APP_VERSION_DISPLAY: Defines the application version number. Used
# in the "About" window. If not set, defaults to MOZ_APP_VERSION.
# - MOZ_APP_NAME: Used for e.g. the binary program file name. If not set,
# defaults to a lowercase form of MOZ_APP_BASENAME.
# - MOZ_APP_REMOTINGNAME: Used for the internal program name, which affects
# profile name and remoting. If not set, defaults to MOZ_APP_NAME.
# - MOZ_APP_PROFILE: When set, used for application.ini's
# "Profile" field, which controls profile location.
# - MOZ_APP_ID: When set, used for application.ini's "ID" field, and
# crash reporter server url.
# - MOZ_APP_ANDROID_VERSION_CODE: On Android, "android:versionCode" for
# the main application is set to the value of this variable.  If not
# set, it falls back to a Mozilla-specific value derived from the
# build ID.
# - MOZ_PROFILE_MIGRATOR: When set, enables profile migrator.

if test -z "$MOZ_APP_NAME"; then
   MOZ_APP_NAME=`echo $MOZ_APP_BASENAME | tr A-Z a-z`
fi

if test -z "$MOZ_APP_REMOTINGNAME"; then
   MOZ_APP_REMOTINGNAME=$MOZ_APP_NAME
fi

if test -z "$MOZ_APP_VERSION_DISPLAY"; then
   MOZ_APP_VERSION_DISPLAY=$MOZ_APP_VERSION
fi

if test -z "$ANDROID_PACKAGE_NAME" ; then
   ANDROID_PACKAGE_NAME="org.mozilla.$MOZ_APP_NAME"
fi

# For extensions and langpacks, we require a max version that is compatible
# across security releases. MOZ_APP_MAXVERSION is our method for doing that.
# 24.0a1 and 24.0a2 aren't affected
# 24.0 becomes 24.*
# 24.1.1 becomes 24.*
IS_ALPHA=`echo $MOZ_APP_VERSION | grep a`
if test -z "$IS_ALPHA"; then
  
  if test "$(basename $MOZ_BUILD_APP)" = "suite"; then
    MOZ_APP_MAXVERSION=`echo $MOZ_APP_VERSION | sed "s|\(^[0-9]*\.[0-9]*\).*|\1|"`.*
  else
    MOZ_APP_MAXVERSION=`echo $MOZ_APP_VERSION | sed "s|\(^[0-9]*\).*|\1|"`.*
  fi
  
else
  MOZ_APP_MAXVERSION=$MOZ_APP_VERSION
fi












cat >> confdefs.pytmp <<EOF
    (''' MOZ_APP_UA_NAME ''', r''' "$MOZ_APP_UA_NAME" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_APP_UA_NAME "$MOZ_APP_UA_NAME"
EOF


cat >> confdefs.pytmp <<EOF
    (''' MOZ_APP_UA_VERSION ''', r''' "$MOZ_APP_VERSION" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_APP_UA_VERSION "$MOZ_APP_VERSION"
EOF





if test -n "$MOZ_UA_OS_AGNOSTIC"; then
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_UA_OS_AGNOSTIC ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_UA_OS_AGNOSTIC 1
EOF

fi



cat >> confdefs.pytmp <<EOF
    (''' MOZ_UA_BUILDID ''', r''' "$MOZ_UA_BUILDID" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_UA_BUILDID "$MOZ_UA_BUILDID"
EOF







if test "$MOZILLA_OFFICIAL"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZILLA_OFFICIAL ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZILLA_OFFICIAL 1
EOF

    # Build revisions should always be present in official Mozilla builds
    MOZ_INCLUDE_SOURCE_INFO=1
fi

# External builds (specifically Ubuntu) may drop the hg repo information, so we allow to
# explicitly set the repository and changeset information in.




if test "$MOZ_TELEMETRY_REPORTING"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TELEMETRY_REPORTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TELEMETRY_REPORTING 1
EOF


    # Enable Telemetry by default for nightly and aurora channels
    if test -z "$RELEASE_OR_BETA"; then
      cat >> confdefs.pytmp <<\EOF
    (''' MOZ_TELEMETRY_ON_BY_DEFAULT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_TELEMETRY_ON_BY_DEFAULT 1
EOF

    fi
fi

if test -n "$MOZ_TELEMETRY_REPORTING" || test -n "$MOZ_SERVICES_HEALTHREPORT"; then
  MOZ_DATA_REPORTING=1
  cat >> confdefs.pytmp <<\EOF
    (''' MOZ_DATA_REPORTING ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_DATA_REPORTING 1
EOF

  
fi





if test "$MOZ_WIDGET_TOOLKIT" = "cocoa"; then
    USE_ICU=1
fi



ICU_LIB_NAMES=

USE_ICU=1

if test -n "$USE_ICU"; then
    icudir="$_topsrcdir/intl/icu/source"
    if test ! -d "$icudir"; then
        icudir="$_topsrcdir/../../intl/icu/source"
        if test ! -d "$icudir"; then
            { echo "configure: error: Cannot find the ICU directory" 1>&2; echo "configure: error: Cannot find the ICU directory" 1>&5; exit 1; }
        fi
    fi

    version=`${TOOLCHAIN_PREFIX}sed -n 's/^[[:space:]]*#[[:space:]]*define[[:space:]][[:space:]]*U_ICU_VERSION_MAJOR_NUM[[:space:]][[:space:]]*\([0-9][0-9]*\)[[:space:]]*$/\1/p' "$icudir/common/unicode/uvernum.h"`
    if test x"$version" = x; then
       { echo "configure: error: cannot determine icu version number from uvernum.h header file $lineno" 1>&2; echo "configure: error: cannot determine icu version number from uvernum.h header file $lineno" 1>&5; exit 1; }
    fi
    MOZ_ICU_VERSION="$version"

    # TODO: the l is actually endian-dependent
    # We could make this set as 'l' or 'b' for little or big, respectively,
    # but we'd need to check in a big-endian version of the file.
    ICU_DATA_FILE="icudt${version}l.dat"

                        if test -z "$JS_STANDALONE"; then
        MOZ_ICU_DATA_ARCHIVE=1
    else
        MOZ_ICU_DATA_ARCHIVE=
    fi
fi







if test -n "$USE_ICU"; then
    if test -z "$YASM" -a -z "$GNU_AS" -a "$COMPILE_ENVIRONMENT"; then
      { echo "configure: error: Building ICU requires either yasm or a GNU assembler. If you do not have either of those available for this platform you must use --without-intl-api" 1>&2; echo "configure: error: Building ICU requires either yasm or a GNU assembler. If you do not have either of those available for this platform you must use --without-intl-api" 1>&5; exit 1; }
    fi
        cat >> confdefs.pytmp <<\EOF
    (''' U_STATIC_IMPLEMENTATION ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define U_STATIC_IMPLEMENTATION 1
EOF

            cat >> confdefs.pytmp <<\EOF
    (''' U_USING_ICU_NAMESPACE ''', r''' 0 ''')
EOF
cat >> confdefs.h <<\EOF
#define U_USING_ICU_NAMESPACE 0
EOF

fi


CFLAGS=`echo \
    $_WARNINGS_CFLAGS \
    $CFLAGS`

CXXFLAGS=`echo \
    $_WARNINGS_CXXFLAGS \
    $CXXFLAGS`

COMPILE_CFLAGS=`echo \
    $_DEFINES_CFLAGS \
    $COMPILE_CFLAGS`

COMPILE_CXXFLAGS=`echo \
    $_DEFINES_CXXFLAGS \
    $COMPILE_CXXFLAGS`

HOST_CFLAGS=`echo \
    $HOST_CFLAGS`

HOST_CXXFLAGS=`echo \
    $HOST_CXXFLAGS`













HOST_CMFLAGS=-fobjc-exceptions
HOST_CMMFLAGS=-fobjc-exceptions
OS_COMPILE_CMFLAGS=-fobjc-exceptions
OS_COMPILE_CMMFLAGS=-fobjc-exceptions
if test "$MOZ_WIDGET_TOOLKIT" = uikit; then
  OS_COMPILE_CMFLAGS="$OS_COMPILE_CMFLAGS -fobjc-abi-version=2 -fobjc-legacy-dispatch"
  OS_COMPILE_CMMFLAGS="$OS_COMPILE_CMMFLAGS -fobjc-abi-version=2 -fobjc-legacy-dispatch"
fi





OS_CFLAGS="$CFLAGS"
OS_CXXFLAGS="$CXXFLAGS"
OS_CPPFLAGS="$CPPFLAGS"
OS_COMPILE_CFLAGS="$COMPILE_CFLAGS"
OS_COMPILE_CXXFLAGS="$COMPILE_CXXFLAGS"
OS_LDFLAGS="$LDFLAGS"
OS_LIBS="$LIBS"





































cat >> confdefs.pytmp <<EOF
    (''' MOZ_DLL_SUFFIX ''', r''' "$DLL_SUFFIX" ''')
EOF
cat >> confdefs.h <<EOF
#define MOZ_DLL_SUFFIX "$DLL_SUFFIX"
EOF






































if test -n "$COMPILE_ENVIRONMENT"; then
for ac_func in posix_fadvise posix_fallocate
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:15527: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15532 "configure"
#define $ac_func innocuous_$ac_func
#include "confdefs.h"
#undef $ac_func
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#define $ac_func innocuous_$ac_func
#include <assert.h>
#undef $ac_func
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:15559: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.pytmp <<EOF
    (''' $ac_tr_func ''', ' 1 ')
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


if test "$MOZ_X11"; then
                _SAVE_CFLAGS=$CFLAGS
    CFLAGS="$CFLAGS $XCFLAGS"
    cat > conftest.$ac_ext <<EOF
#line 15591 "configure"
#include "confdefs.h"

        #include <stdio.h>
        #include <stdlib.h>
        #include <X11/Xlib.h>
        #include <X11/Intrinsic.h>
        #include <X11/extensions/XShm.h>
    
int main() {

        Display *dpy = 0;
        if ((dpy = XOpenDisplay(NULL)) == NULL) {
            fprintf(stderr, ": can't open %s\n", XDisplayName(NULL));
            exit(1);
        }
    
; return 0; }
EOF
if { (eval echo configure:15610: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
   { echo "configure: error: Can't find X headers (install libxt-dev (Debian/Ubuntu), libXt-devel (Fedora), or xorg-x11-libXt-devel (SuSE))." 1>&2; echo "configure: error: Can't find X headers (install libxt-dev (Debian/Ubuntu), libXt-devel (Fedora), or xorg-x11-libXt-devel (SuSE))." 1>&5; exit 1; } 
fi
rm -f conftest*
    CFLAGS="$_SAVE_CFLAGS"

    if test -n "$MISSING_X"; then
        { echo "configure: error:  Could not find the following X libraries: $MISSING_X " 1>&2; echo "configure: error:  Could not find the following X libraries: $MISSING_X " 1>&5; exit 1; };
    fi

fi # MOZ_X11

fi # COMPILE_ENVIRONMENT


if test "$MOZ_DEBUG"; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_REFLOW_PERF ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_REFLOW_PERF 1
EOF

    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_REFLOW_PERF_DSP ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_REFLOW_PERF_DSP 1
EOF

fi

if test "$ACCESSIBILITY" -a "$MOZ_ENABLE_GTK" ; then
    cat >> confdefs.pytmp <<\EOF
    (''' MOZ_ACCESSIBILITY_ATK ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define MOZ_ACCESSIBILITY_ATK 1
EOF

    ATK_FULL_VERSION=`$PKG_CONFIG --modversion atk`
    ATK_MAJOR_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $1 }'`
    ATK_MINOR_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $2 }'`
    ATK_REV_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $3 }'`
    cat >> confdefs.pytmp <<EOF
    (''' ATK_MAJOR_VERSION ''', r''' $ATK_MAJOR_VERSION ''')
EOF
cat >> confdefs.h <<EOF
#define ATK_MAJOR_VERSION $ATK_MAJOR_VERSION
EOF

    cat >> confdefs.pytmp <<EOF
    (''' ATK_MINOR_VERSION ''', r''' $ATK_MINOR_VERSION ''')
EOF
cat >> confdefs.h <<EOF
#define ATK_MINOR_VERSION $ATK_MINOR_VERSION
EOF

    cat >> confdefs.pytmp <<EOF
    (''' ATK_REV_VERSION ''', r''' $ATK_REV_VERSION ''')
EOF
cat >> confdefs.h <<EOF
#define ATK_REV_VERSION $ATK_REV_VERSION
EOF

fi

if test "$MOZ_DEBUG"; then
    A11Y_LOG=1
fi
case "$MOZ_UPDATE_CHANNEL" in
aurora|beta|release|esr)
    ;;
*)
    A11Y_LOG=1
    ;;
esac

if test -n "$A11Y_LOG"; then
    cat >> confdefs.pytmp <<\EOF
    (''' A11Y_LOG ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define A11Y_LOG 1
EOF

fi




DIRECTIVE4_LIST="
MOZ_OFFICIAL_BRANDING=$MOZ_OFFICIAL_BRANDING
MOZ_BRANDING_DIRECTORY=$MOZ_BRANDING_DIRECTORY
MC_BASILISK=$MC_BASILISK
MC_PALEMOON=$MC_PALEMOON
MOZ_EME=$MOZ_EME
MOZ_WEBRTC=$MOZ_WEBRTC
MOZ_SYSTEM_JPEG=$MOZ_SYSTEM_JPEG
MOZ_SYSTEM_ZLIB=$MOZ_SYSTEM_ZLIB
MOZ_SYSTEM_BZ2=$MOZ_SYSTEM_BZ2
MOZ_SYSTEM_PNG=$MOZ_SYSTEM_PNG
MOZ_SYSTEM_LIBVPX=$MOZ_SYSTEM_LIBVPX
MOZ_SYSTEM_SQLITE=$MOZ_SYSTEM_SQLITE
MOZ_SYSTEM_JEMALLOC=$MOZ_SYSTEM_JEMALLOC"

DIRECTIVE4=`$PYTHON $_topsrcdir/build/directive4.py $DIRECTIVE4_LIST`

if test -n "$DIRECTIVE4"; then
    if test -n "$MC_PRIVATE_BUILD"; then
        echo "configure: warning: Private Build - The configuration you have chosen to use with official branding deviates from official build configuration. Your build is thus for personal and private use only and must not be (re)distributed - Please see: http://www.palemoon.org/redist.shtml" 1>&2
    else
        { echo "configure: error: Branding Violation - Please see: http://www.palemoon.org/redist.shtml" 1>&2; echo "configure: error: Branding Violation - Please see: http://www.palemoon.org/redist.shtml" 1>&5; exit 1; }
    fi
fi




_NON_GLOBAL_ACDEFINES="$_NON_GLOBAL_ACDEFINES
CPP_THROW_NEW
HAVE_CPP_AMBIGUITY_RESOLVING_USING
HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR
HAVE_CPP_PARTIAL_SPECIALIZATION
HAVE_GETPAGESIZE
HAVE_ICONV
HAVE_ICONV_WITH_CONST_INPUT
HAVE_MBRTOWC
HAVE_WCRTOMB
HAVE_STATVFS64
HAVE_STATVFS
HAVE_STATFS64
HAVE_STATFS
HAVE_SYS_STATVFS_H
HAVE_SYS_STATFS_H
HAVE_SYS_VFS_H
HAVE_SYS_MOUNT_H
"


if test -z "$GNU_CC" -a "$OS_ARCH" = "WINNT"; then
    PREPROCESS_OPTION="-P -Fi"
else
    PREPROCESS_OPTION="-E -o "
fi



# Avoid using obsolete NSPR features
cat >> confdefs.pytmp <<\EOF
    (''' NO_NSPR_10_SUPPORT ''', ' 1 ')
EOF
cat >> confdefs.h <<\EOF
#define NO_NSPR_10_SUPPORT 1
EOF


# Don't build NSS libpkix
NSS_DISABLE_LIBPKIX=1


WIN_TOP_SRC=
case "$host_os" in
mingw*)
    WIN_TOP_SRC=`cd $srcdir; pwd -W`
    ;;
esac


top_srcdir=$srcdir


trap '' 1 2 15
cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache


trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15
: ${CONFIG_STATUS=./config.data}

echo creating $CONFIG_STATUS

cat > $CONFIG_STATUS <<EOF
def unique_list(l):
    result = []
    for i in l:
        if l not in result:
            result.append(i)
    return result

defines = [
EOF

sed 's/$/,/' confdefs.pytmp >> $CONFIG_STATUS
rm confdefs.pytmp confdefs.h

cat >> $CONFIG_STATUS <<\EOF
]

substs = [
EOF

sed 's/$/,/' >> $CONFIG_STATUS <<EOF
    (''' SHELL ''', r''' $SHELL ''')
    (''' exec_prefix ''', r''' $exec_prefix ''')
    (''' prefix ''', r''' $prefix ''')
    (''' program_transform_name ''', r''' $program_transform_name ''')
    (''' bindir ''', r''' $bindir ''')
    (''' sbindir ''', r''' $sbindir ''')
    (''' libexecdir ''', r''' $libexecdir ''')
    (''' datadir ''', r''' $datadir ''')
    (''' sysconfdir ''', r''' $sysconfdir ''')
    (''' sharedstatedir ''', r''' $sharedstatedir ''')
    (''' localstatedir ''', r''' $localstatedir ''')
    (''' libdir ''', r''' $libdir ''')
    (''' includedir ''', r''' $includedir ''')
    (''' oldincludedir ''', r''' $oldincludedir ''')
    (''' infodir ''', r''' $infodir ''')
    (''' mandir ''', r''' $mandir ''')
    (''' host ''', r''' $host ''')
    (''' host_alias ''', r''' $host_alias ''')
    (''' host_cpu ''', r''' $host_cpu ''')
    (''' host_vendor ''', r''' $host_vendor ''')
    (''' host_os ''', r''' $host_os ''')
    (''' target ''', r''' $target ''')
    (''' target_alias ''', r''' $target_alias ''')
    (''' target_cpu ''', r''' $target_cpu ''')
    (''' target_vendor ''', r''' $target_vendor ''')
    (''' target_os ''', r''' $target_os ''')
    (''' build ''', r''' $build ''')
    (''' build_alias ''', r''' $build_alias ''')
    (''' build_cpu ''', r''' $build_cpu ''')
    (''' build_vendor ''', r''' $build_vendor ''')
    (''' build_os ''', r''' $build_os ''')
    (''' OBJCOPY ''', r''' $OBJCOPY ''')
    (''' ANDROID_SOURCE ''', r''' $ANDROID_SOURCE ''')
    (''' ANDROID_PACKAGE_NAME ''', r''' $ANDROID_PACKAGE_NAME ''')
    (''' HOST_RANLIB ''', r''' $HOST_RANLIB ''')
    (''' HOST_AR ''', r''' $HOST_AR ''')
    (''' CC ''', r''' $CC ''')
    (''' CXX ''', r''' $CXX ''')
    (''' RANLIB ''', r''' $RANLIB ''')
    (''' AR ''', r''' $AR ''')
    (''' AS ''', r''' $AS ''')
    (''' LD ''', r''' $LD ''')
    (''' LIPO ''', r''' $LIPO ''')
    (''' STRIP ''', r''' $STRIP ''')
    (''' WINDRES ''', r''' $WINDRES ''')
    (''' OTOOL ''', r''' $OTOOL ''')
    (''' CLANG_CXX ''', r''' $CLANG_CXX ''')
    (''' CLANG_CL ''', r''' $CLANG_CL ''')
    (''' MIDL ''', r''' $MIDL ''')
    (''' MSVS_VERSION ''', r''' $MSVS_VERSION ''')
    (''' MSVC_HAS_DIA_SDK ''', r''' $MSVC_HAS_DIA_SDK ''')
    (''' MSVC_C_RUNTIME_DLL ''', r''' $MSVC_C_RUNTIME_DLL ''')
    (''' MSVC_CXX_RUNTIME_DLL ''', r''' $MSVC_CXX_RUNTIME_DLL ''')
    (''' MIDL_FLAGS ''', r''' $MIDL_FLAGS ''')
    (''' _MSC_VER ''', r''' $_MSC_VER ''')
    (''' GNU_AS ''', r''' $GNU_AS ''')
    (''' GNU_LD ''', r''' $GNU_LD ''')
    (''' GNU_CC ''', r''' $GNU_CC ''')
    (''' GNU_CXX ''', r''' $GNU_CXX ''')
    (''' STL_FLAGS ''', r''' $STL_FLAGS ''')
    (''' WRAP_STL_INCLUDES ''', r''' $WRAP_STL_INCLUDES ''')
    (''' MOZ_MSVC_STL_WRAP_RAISE ''', r''' $MOZ_MSVC_STL_WRAP_RAISE ''')
    (''' UNIVERSAL_BINARY ''', r''' $UNIVERSAL_BINARY ''')
    (''' UNIFY_DIST ''', r''' $UNIFY_DIST ''')
    (''' MACOS_SDK_DIR ''', r''' $MACOS_SDK_DIR ''')
    (''' MACOS_PRIVATE_FRAMEWORKS_DIR ''', r''' $MACOS_PRIVATE_FRAMEWORKS_DIR ''')
    (''' X_CFLAGS ''', r''' $X_CFLAGS ''')
    (''' X_PRE_LIBS ''', r''' $X_PRE_LIBS ''')
    (''' X_LIBS ''', r''' $X_LIBS ''')
    (''' X_EXTRA_LIBS ''', r''' $X_EXTRA_LIBS ''')
    (''' MOZ_THUMB2 ''', r''' $MOZ_THUMB2 ''')
    (''' HAVE_ARM_SIMD ''', r''' $HAVE_ARM_SIMD ''')
    (''' HAVE_ARM_NEON ''', r''' $HAVE_ARM_NEON ''')
    (''' BUILD_ARM_NEON ''', r''' $BUILD_ARM_NEON ''')
    (''' ARM_ARCH ''', r''' $ARM_ARCH ''')
    (''' NEON_FLAGS ''', list(r''' $NEON_FLAGS '''.split()))
    (''' MOZ_CLANG_RT_ASAN_LIB_PATH ''', r''' $MOZ_CLANG_RT_ASAN_LIB_PATH ''')
    (''' LLVM_SYMBOLIZER ''', r''' $LLVM_SYMBOLIZER ''')
    (''' MOZ_ASAN ''', r''' $MOZ_ASAN ''')
    (''' MOZ_MSAN ''', r''' $MOZ_MSAN ''')
    (''' MOZ_TSAN ''', r''' $MOZ_TSAN ''')
    (''' MOZ_NO_WLZDEFS ''', r''' $MOZ_NO_WLZDEFS ''')
    (''' MOZ_CFLAGS_NSS ''', r''' $MOZ_CFLAGS_NSS ''')
    (''' MOZ_VALGRIND ''', r''' $MOZ_VALGRIND ''')
    (''' MOZILLA_SYMBOLVERSION ''', r''' $MOZILLA_SYMBOLVERSION ''')
    (''' MOZILLA_UAVERSION ''', r''' $MOZILLA_UAVERSION ''')
    (''' MOZILLA_UAVERSION_U ''', r''' $MOZILLA_UAVERSION_U ''')
    (''' MMX_FLAGS ''', list(r''' $MMX_FLAGS '''.split()))
    (''' SSE_FLAGS ''', list(r''' $SSE_FLAGS '''.split()))
    (''' SSE2_FLAGS ''', list(r''' $SSE2_FLAGS '''.split()))
    (''' SSSE3_FLAGS ''', list(r''' $SSSE3_FLAGS '''.split()))
    (''' MOZ_LINKER ''', r''' $MOZ_LINKER ''')
    (''' XZ ''', r''' $XZ ''')
    (''' MOZ_NO_DEBUG_RTL ''', r''' $MOZ_NO_DEBUG_RTL ''')
    (''' MOZ_DEBUG_DEFINES ''', list(r''' $MOZ_DEBUG_DEFINES '''.split()))
    (''' LD_IS_BFD ''', r''' $LD_IS_BFD ''')
    (''' LD_PRINT_ICF_SECTIONS ''', r''' $LD_PRINT_ICF_SECTIONS ''')
    (''' MOZ_PROGRAM_LDFLAGS ''', r''' $MOZ_PROGRAM_LDFLAGS ''')
    (''' MOZ_NEEDS_LIBATOMIC ''', r''' $MOZ_NEEDS_LIBATOMIC ''')
    (''' HAVE_DTRACE ''', r''' $HAVE_DTRACE ''')
    (''' XCFLAGS ''', list(r''' $XCFLAGS '''.split()))
    (''' XLDFLAGS ''', list(r''' $XLDFLAGS '''.split()))
    (''' XLIBS ''', list(r''' $XLIBS '''.split()))
    (''' XEXT_LIBS ''', list(r''' $XEXT_LIBS '''.split()))
    (''' XT_LIBS ''', list(r''' $XT_LIBS '''.split()))
    (''' XSS_LIBS ''', list(r''' $XSS_LIBS '''.split()))
    (''' MOZ_USE_PTHREADS ''', r''' $MOZ_USE_PTHREADS ''')
    (''' LIBOBJS ''', r''' $LIBOBJS ''')
    (''' HAVE_CLOCK_MONOTONIC ''', r''' $HAVE_CLOCK_MONOTONIC ''')
    (''' REALTIME_LIBS ''', list(r''' $REALTIME_LIBS '''.split()))
    (''' ICONV_LIBS ''', list(r''' $ICONV_LIBS '''.split()))
    (''' HAVE_LANGINFO_CODESET ''', r''' $HAVE_LANGINFO_CODESET ''')
    (''' MOZ_BUILD_NSPR ''', r''' $MOZ_BUILD_NSPR ''')
    (''' JS_POSIX_NSPR ''', r''' $JS_POSIX_NSPR ''')
    (''' NSPR_CFLAGS ''', list(r''' $NSPR_CFLAGS '''.split()))
    (''' NSPR_INCLUDE_DIR ''', r''' $NSPR_INCLUDE_DIR ''')
    (''' NSPR_LIB_DIR ''', r''' $NSPR_LIB_DIR ''')
    (''' PKGCONF_REQUIRES_PRIVATE ''', r''' $PKGCONF_REQUIRES_PRIVATE ''')
    (''' NSS_CFLAGS ''', r''' $NSS_CFLAGS ''')
    (''' MOZ_ZLIB_CFLAGS ''', list(r''' $MOZ_ZLIB_CFLAGS '''.split()))
    (''' MOZ_ZLIB_LIBS ''', list(r''' $MOZ_ZLIB_LIBS '''.split()))
    (''' MOZ_SYSTEM_ZLIB ''', r''' $MOZ_SYSTEM_ZLIB ''')
    (''' MOZ_GTK3_CFLAGS ''', list(r''' $MOZ_GTK3_CFLAGS '''.split()))
    (''' MOZ_GTK3_LIBS ''', list(r''' $MOZ_GTK3_LIBS '''.split()))
    (''' MOZ_GTK2_CFLAGS ''', list(r''' $MOZ_GTK2_CFLAGS '''.split()))
    (''' MOZ_GTK2_LIBS ''', list(r''' $MOZ_GTK2_LIBS '''.split()))
    (''' MOZ_FS_LAYOUT ''', r''' $MOZ_FS_LAYOUT ''')
    (''' MOZ_STARTUP_NOTIFICATION_CFLAGS ''', list(r''' $MOZ_STARTUP_NOTIFICATION_CFLAGS '''.split()))
    (''' MOZ_STARTUP_NOTIFICATION_LIBS ''', list(r''' $MOZ_STARTUP_NOTIFICATION_LIBS '''.split()))
    (''' MOZ_ENABLE_STARTUP_NOTIFICATION ''', r''' $MOZ_ENABLE_STARTUP_NOTIFICATION ''')
    (''' TK_CFLAGS ''', list(r''' $TK_CFLAGS '''.split()))
    (''' TK_LIBS ''', list(r''' $TK_LIBS '''.split()))
    (''' MOC ''', r''' $MOC ''')
    (''' RCC ''', r''' $RCC ''')
    (''' MOZ_UI_LOCALE ''', r''' $MOZ_UI_LOCALE ''')
    (''' MOZ_OFFICIAL_BRANDING ''', r''' $MOZ_OFFICIAL_BRANDING ''')
    (''' MC_OFFICIAL ''', r''' $MC_OFFICIAL ''')
    (''' MOZ_BRANDING_DIRECTORY ''', r''' $MOZ_BRANDING_DIRECTORY ''')
    (''' MC_PRIVATE_BUILD ''', r''' $MC_PRIVATE_BUILD ''')
    (''' MOZ_DISTRIBUTION_ID ''', r''' $MOZ_DISTRIBUTION_ID ''')
    (''' _GTKCHECK_CFLAGS ''', list(r''' $_GTKCHECK_CFLAGS '''.split()))
    (''' _GTKCHECK_LIBS ''', list(r''' $_GTKCHECK_LIBS '''.split()))
    (''' MOZ_GIO_CFLAGS ''', list(r''' $MOZ_GIO_CFLAGS '''.split()))
    (''' MOZ_GIO_LIBS ''', list(r''' $MOZ_GIO_LIBS '''.split()))
    (''' MOZ_ENABLE_GIO ''', r''' $MOZ_ENABLE_GIO ''')
    (''' MOZ_GCONF_CFLAGS ''', list(r''' $MOZ_GCONF_CFLAGS '''.split()))
    (''' MOZ_GCONF_LIBS ''', list(r''' $MOZ_GCONF_LIBS '''.split()))
    (''' MOZ_ENABLE_GCONF ''', r''' $MOZ_ENABLE_GCONF ''')
    (''' MOZ_LIBPROXY_CFLAGS ''', list(r''' $MOZ_LIBPROXY_CFLAGS '''.split()))
    (''' MOZ_LIBPROXY_LIBS ''', list(r''' $MOZ_LIBPROXY_LIBS '''.split()))
    (''' MOZ_ENABLE_LIBPROXY ''', r''' $MOZ_ENABLE_LIBPROXY ''')
    (''' MOZ_GNOMEUI_CFLAGS ''', list(r''' $MOZ_GNOMEUI_CFLAGS '''.split()))
    (''' MOZ_GNOMEUI_LIBS ''', list(r''' $MOZ_GNOMEUI_LIBS '''.split()))
    (''' MOZ_ENABLE_GNOMEUI ''', r''' $MOZ_ENABLE_GNOMEUI ''')
    (''' MOZ_DBUS_CFLAGS ''', list(r''' $MOZ_DBUS_CFLAGS '''.split()))
    (''' MOZ_DBUS_LIBS ''', list(r''' $MOZ_DBUS_LIBS '''.split()))
    (''' MOZ_DBUS_GLIB_CFLAGS ''', list(r''' $MOZ_DBUS_GLIB_CFLAGS '''.split()))
    (''' MOZ_DBUS_GLIB_LIBS ''', list(r''' $MOZ_DBUS_GLIB_LIBS '''.split()))
    (''' MOZ_ENABLE_DBUS ''', r''' $MOZ_ENABLE_DBUS ''')
    (''' MOZ_WEBRTC_HAVE_ETHTOOL_SPEED_HI ''', r''' $MOZ_WEBRTC_HAVE_ETHTOOL_SPEED_HI ''')
    (''' NSS_DISABLE_DBM ''', r''' $NSS_DISABLE_DBM ''')
    (''' MOZ_SECURITY_SQLSTORE ''', r''' $MOZ_SECURITY_SQLSTORE ''')
    (''' MOZ_INCOMPLETE_EXTERNAL_LINKAGE ''', r''' $MOZ_INCOMPLETE_EXTERNAL_LINKAGE ''')
    (''' MOZ_MAILNEWS ''', r''' $MOZ_MAILNEWS ''')
    (''' MOZ_MORK ''', r''' $MOZ_MORK ''')
    (''' MOZ_MOVEMAIL ''', r''' $MOZ_MOVEMAIL ''')
    (''' MOZ_MAILNEWS_OAUTH2 ''', r''' $MOZ_MAILNEWS_OAUTH2 ''')
    (''' MOZ_LDAP_XPCOM ''', r''' $MOZ_LDAP_XPCOM ''')
    (''' MOZ_MAPI_SUPPORT ''', r''' $MOZ_MAPI_SUPPORT ''')
    (''' MOZ_CAN_DRAW_IN_TITLEBAR ''', r''' $MOZ_CAN_DRAW_IN_TITLEBAR ''')
    (''' MOZ_WEBRTC ''', r''' $MOZ_WEBRTC ''')
    (''' MOZ_WEBRTC_SIGNALING ''', r''' $MOZ_WEBRTC_SIGNALING ''')
    (''' MOZ_PEERCONNECTION ''', r''' $MOZ_PEERCONNECTION ''')
    (''' MOZ_WEBRTC_ASSERT_ALWAYS ''', r''' $MOZ_WEBRTC_ASSERT_ALWAYS ''')
    (''' MOZ_WEBRTC_HARDWARE_AEC_NS ''', r''' $MOZ_WEBRTC_HARDWARE_AEC_NS ''')
    (''' MOZ_SCTP ''', r''' $MOZ_SCTP ''')
    (''' MOZ_SRTP ''', r''' $MOZ_SRTP ''')
    (''' MOZ_WEBRTC_X11_LIBS ''', list(r''' $MOZ_WEBRTC_X11_LIBS '''.split()))
    (''' MOZ_SAMPLE_TYPE_S16 ''', r''' $MOZ_SAMPLE_TYPE_S16 ''')
    (''' MOZ_SAMPLE_TYPE_FLOAT32 ''', r''' $MOZ_SAMPLE_TYPE_FLOAT32 ''')
    (''' MOZ_RAW ''', r''' $MOZ_RAW ''')
    (''' MOZ_AV1 ''', r''' $MOZ_AV1 ''')
    (''' MOZ_EME ''', r''' $MOZ_EME ''')
    (''' MOZ_LIBVPX_CFLAGS ''', list(r''' $MOZ_LIBVPX_CFLAGS '''.split()))
    (''' MOZ_LIBVPX_LIBS ''', list(r''' $MOZ_LIBVPX_LIBS '''.split()))
    (''' MOZ_WEBM_ENCODER ''', r''' $MOZ_WEBM_ENCODER ''')
    (''' MOZ_ALSA_CFLAGS ''', list(r''' $MOZ_ALSA_CFLAGS '''.split()))
    (''' MOZ_ALSA_LIBS ''', list(r''' $MOZ_ALSA_LIBS '''.split()))
    (''' MOZ_ALSA ''', r''' $MOZ_ALSA ''')
    (''' MOZ_PULSEAUDIO_CFLAGS ''', list(r''' $MOZ_PULSEAUDIO_CFLAGS '''.split()))
    (''' MOZ_PULSEAUDIO_LIBS ''', list(r''' $MOZ_PULSEAUDIO_LIBS '''.split()))
    (''' MOZ_PULSEAUDIO ''', r''' $MOZ_PULSEAUDIO ''')
    (''' MOZ_SNDIO ''', r''' $MOZ_SNDIO ''')
    (''' MOZ_GAMEPAD ''', r''' $MOZ_GAMEPAD ''')
    (''' MOZ_GAMEPAD_BACKEND ''', r''' $MOZ_GAMEPAD_BACKEND ''')
    (''' MOZ_GIO_COMPONENT ''', r''' $MOZ_GIO_COMPONENT ''')
    (''' CAIRO_FT_CFLAGS ''', list(r''' $CAIRO_FT_CFLAGS '''.split()))
    (''' WGET ''', r''' $WGET ''')
    (''' MOZ_BUNDLED_FONTS ''', r''' $MOZ_BUNDLED_FONTS ''')
    (''' GTEST_HAS_RTTI ''', r''' $GTEST_HAS_RTTI ''')
    (''' GTEST_OS_LINUX_ANDROID ''', r''' $GTEST_OS_LINUX_ANDROID ''')
    (''' GTEST_USE_OWN_TR1_TUPLE ''', r''' $GTEST_USE_OWN_TR1_TUPLE ''')
    (''' GTEST_HAS_CLONE ''', r''' $GTEST_HAS_CLONE ''')
    (''' MOZ_DISABLE_PARENTAL_CONTROLS ''', r''' $MOZ_DISABLE_PARENTAL_CONTROLS ''')
    (''' MOZ_NO_SMART_CARDS ''', r''' $MOZ_NO_SMART_CARDS ''')
    (''' MOZ_SAFE_BROWSING ''', r''' $MOZ_SAFE_BROWSING ''')
    (''' MOZ_URL_CLASSIFIER ''', r''' $MOZ_URL_CLASSIFIER ''')
    (''' MOZ_ZIPWRITER ''', r''' $MOZ_ZIPWRITER ''')
    (''' MOZ_THEME_FASTSTRIPE ''', r''' $MOZ_THEME_FASTSTRIPE ''')
    (''' MOZ_OPTIMIZE ''', r''' $MOZ_OPTIMIZE ''')
    (''' MOZ_FRAMEPTR_FLAGS ''', r''' $MOZ_FRAMEPTR_FLAGS ''')
    (''' MOZ_OPTIMIZE_FLAGS ''', r''' $MOZ_OPTIMIZE_FLAGS ''')
    (''' MOZ_OPTIMIZE_LDFLAGS ''', r''' $MOZ_OPTIMIZE_LDFLAGS ''')
    (''' MOZ_ALLOW_HEAP_EXECUTE_FLAGS ''', list(r''' $MOZ_ALLOW_HEAP_EXECUTE_FLAGS '''.split()))
    (''' MOZ_PGO_OPTIMIZE_FLAGS ''', r''' $MOZ_PGO_OPTIMIZE_FLAGS ''')
    (''' MOZ_REPLACE_MALLOC_LINKAGE ''', r''' $MOZ_REPLACE_MALLOC_LINKAGE ''')
    (''' MOZ_GLUE_IN_PROGRAM ''', r''' $MOZ_GLUE_IN_PROGRAM ''')
    (''' MOZ_GLUE_WRAP_LDFLAGS ''', list(r''' $MOZ_GLUE_WRAP_LDFLAGS '''.split()))
    (''' LLVM_CXXFLAGS ''', r''' $LLVM_CXXFLAGS ''')
    (''' LLVM_LDFLAGS ''', r''' $LLVM_LDFLAGS ''')
    (''' CLANG_LDFLAGS ''', r''' $CLANG_LDFLAGS ''')
    (''' ENABLE_CLANG_PLUGIN ''', r''' $ENABLE_CLANG_PLUGIN ''')
    (''' MOZ_LIBSTDCXX_TARGET_VERSION ''', r''' $MOZ_LIBSTDCXX_TARGET_VERSION ''')
    (''' MOZ_LIBSTDCXX_HOST_VERSION ''', r''' $MOZ_LIBSTDCXX_HOST_VERSION ''')
    (''' DEBUG_JS_MODULES ''', r''' $DEBUG_JS_MODULES ''')
    (''' MOZ_DISABLE_PRECOMPILED_STARTUPCACHE ''', r''' $MOZ_DISABLE_PRECOMPILED_STARTUPCACHE ''')
    (''' MOZ_TASK_TRACER ''', r''' $MOZ_TASK_TRACER ''')
    (''' MOZ_HORIZON ''', r''' $MOZ_HORIZON ''')
    (''' MOZ_DISABLE_STARTUPCACHE ''', r''' $MOZ_DISABLE_STARTUPCACHE ''')
    (''' GAIADIR ''', r''' $GAIADIR ''')
    (''' FXOS_SIMULATOR ''', r''' $FXOS_SIMULATOR ''')
    (''' MOZ_SYNTH_PICO ''', r''' $MOZ_SYNTH_PICO ''')
    (''' MOZ_TIME_MANAGER ''', r''' $MOZ_TIME_MANAGER ''')
    (''' MOZ_AUDIO_CHANNEL_MANAGER ''', r''' $MOZ_AUDIO_CHANNEL_MANAGER ''')
    (''' MOZ_SECUREELEMENT ''', r''' $MOZ_SECUREELEMENT ''')
    (''' MOZ_DEMANGLE_SYMBOLS ''', r''' $MOZ_DEMANGLE_SYMBOLS ''')
    (''' DISABLE_MOZ_RIL_GEOLOC ''', r''' $DISABLE_MOZ_RIL_GEOLOC ''')
    (''' JAR_COMPRESSION ''', r''' $JAR_COMPRESSION ''')
    (''' OMNIJAR_NAME ''', r''' $OMNIJAR_NAME ''')
    (''' MOZ_OMNIJAR ''', r''' $MOZ_OMNIJAR ''')
    (''' MOZ_PACKAGER_FORMAT ''', r''' $MOZ_PACKAGER_FORMAT ''')
    (''' MOZ_CHROME_FILE_FORMAT ''', r''' $MOZ_CHROME_FILE_FORMAT ''')
    (''' MOZ_JETPACK ''', r''' $MOZ_JETPACK ''')
    (''' MOZ_DEVTOOLS_SERVER ''', r''' $MOZ_DEVTOOLS_SERVER ''')
    (''' MOZ_DEVTOOLS ''', r''' $MOZ_DEVTOOLS ''')
    (''' MOZ_USERINFO ''', r''' $MOZ_USERINFO ''')
    (''' MOZ_DOC_INPUT_DIRS ''', r''' $MOZ_DOC_INPUT_DIRS ''')
    (''' MOZ_DOC_INCLUDE_DIRS ''', r''' $MOZ_DOC_INCLUDE_DIRS ''')
    (''' MOZ_DOC_OUTPUT_DIR ''', r''' $MOZ_DOC_OUTPUT_DIR ''')
    (''' PROFILE_GEN_CFLAGS ''', r''' $PROFILE_GEN_CFLAGS ''')
    (''' PROFILE_GEN_LDFLAGS ''', r''' $PROFILE_GEN_LDFLAGS ''')
    (''' PROFILE_USE_CFLAGS ''', r''' $PROFILE_USE_CFLAGS ''')
    (''' PROFILE_USE_LDFLAGS ''', r''' $PROFILE_USE_LDFLAGS ''')
    (''' LIBS_DESC_SUFFIX ''', r''' $LIBS_DESC_SUFFIX ''')
    (''' EXPAND_LIBS_LIST_STYLE ''', r''' $EXPAND_LIBS_LIST_STYLE ''')
    (''' EXPAND_LIBS_ORDER_STYLE ''', r''' $EXPAND_LIBS_ORDER_STYLE ''')
    (''' CL_INCLUDES_PREFIX ''', r''' $CL_INCLUDES_PREFIX ''')
    (''' NONASCII ''', r''' $NONASCII ''')
    (''' GKMEDIAS_SHARED_LIBRARY ''', r''' $GKMEDIAS_SHARED_LIBRARY ''')
    (''' ZLIB_IN_MOZGLUE ''', r''' $ZLIB_IN_MOZGLUE ''')
    (''' GLIB_CFLAGS ''', list(r''' $GLIB_CFLAGS '''.split()))
    (''' GLIB_LIBS ''', list(r''' $GLIB_LIBS '''.split()))
    (''' GLIB_GMODULE_LIBS ''', list(r''' $GLIB_GMODULE_LIBS '''.split()))
    (''' MOZ_PIXMAN_CFLAGS ''', list(r''' $MOZ_PIXMAN_CFLAGS '''.split()))
    (''' MOZ_PIXMAN_LIBS ''', list(r''' $MOZ_PIXMAN_LIBS '''.split()))
    (''' MOZ_ENABLE_CAIRO_FT ''', r''' $MOZ_ENABLE_CAIRO_FT ''')
    (''' MOZ_ENABLE_DWRITE_FONT ''', r''' $MOZ_ENABLE_DWRITE_FONT ''')
    (''' MOZ_ENABLE_D2D_SURFACE ''', r''' $MOZ_ENABLE_D2D_SURFACE ''')
    (''' MOZ_ENABLE_D3D9_LAYER ''', r''' $MOZ_ENABLE_D3D9_LAYER ''')
    (''' MOZ_ENABLE_D3D10_LAYER ''', r''' $MOZ_ENABLE_D3D10_LAYER ''')
    (''' PS_SURFACE_FEATURE ''', r''' $PS_SURFACE_FEATURE ''')
    (''' SVG_SURFACE_FEATURE ''', r''' $SVG_SURFACE_FEATURE ''')
    (''' XLIB_SURFACE_FEATURE ''', r''' $XLIB_SURFACE_FEATURE ''')
    (''' XLIB_XRENDER_SURFACE_FEATURE ''', r''' $XLIB_XRENDER_SURFACE_FEATURE ''')
    (''' QUARTZ_SURFACE_FEATURE ''', r''' $QUARTZ_SURFACE_FEATURE ''')
    (''' QUARTZ_IMAGE_SURFACE_FEATURE ''', r''' $QUARTZ_IMAGE_SURFACE_FEATURE ''')
    (''' WIN32_SURFACE_FEATURE ''', r''' $WIN32_SURFACE_FEATURE ''')
    (''' OS2_SURFACE_FEATURE ''', r''' $OS2_SURFACE_FEATURE ''')
    (''' DIRECTFB_SURFACE_FEATURE ''', r''' $DIRECTFB_SURFACE_FEATURE ''')
    (''' FT_FONT_FEATURE ''', r''' $FT_FONT_FEATURE ''')
    (''' FC_FONT_FEATURE ''', r''' $FC_FONT_FEATURE ''')
    (''' WIN32_FONT_FEATURE ''', r''' $WIN32_FONT_FEATURE ''')
    (''' WIN32_DWRITE_FONT_FEATURE ''', r''' $WIN32_DWRITE_FONT_FEATURE ''')
    (''' WIN32_D2D_SURFACE_FEATURE ''', r''' $WIN32_D2D_SURFACE_FEATURE ''')
    (''' QUARTZ_FONT_FEATURE ''', r''' $QUARTZ_FONT_FEATURE ''')
    (''' PNG_FUNCTIONS_FEATURE ''', r''' $PNG_FUNCTIONS_FEATURE ''')
    (''' QT_SURFACE_FEATURE ''', r''' $QT_SURFACE_FEATURE ''')
    (''' TEE_SURFACE_FEATURE ''', r''' $TEE_SURFACE_FEATURE ''')
    (''' CAIRO_CFLAGS ''', list(r''' $CAIRO_CFLAGS '''.split()))
    (''' CAIRO_LIBS ''', list(r''' $CAIRO_LIBS '''.split()))
    (''' CAIRO_TEE_CFLAGS ''', list(r''' $CAIRO_TEE_CFLAGS '''.split()))
    (''' CAIRO_TEE_LIBS ''', list(r''' $CAIRO_TEE_LIBS '''.split()))
    (''' CAIRO_XRENDER_CFLAGS ''', list(r''' $CAIRO_XRENDER_CFLAGS '''.split()))
    (''' CAIRO_XRENDER_LIBS ''', list(r''' $CAIRO_XRENDER_LIBS '''.split()))
    (''' MOZ_TREE_CAIRO ''', r''' $MOZ_TREE_CAIRO ''')
    (''' MOZ_CAIRO_CFLAGS ''', list(r''' $MOZ_CAIRO_CFLAGS '''.split()))
    (''' MOZ_CAIRO_LIBS ''', list(r''' $MOZ_CAIRO_LIBS '''.split()))
    (''' MOZ_CAIRO_OSLIBS ''', list(r''' $MOZ_CAIRO_OSLIBS '''.split()))
    (''' MOZ_TREE_PIXMAN ''', r''' $MOZ_TREE_PIXMAN ''')
    (''' MOZ_XUL ''', r''' $MOZ_XUL ''')
    (''' NECKO_WIFI ''', r''' $NECKO_WIFI ''')
    (''' NECKO_WIFI_DBUS ''', r''' $NECKO_WIFI_DBUS ''')
    (''' NECKO_COOKIES ''', r''' $NECKO_COOKIES ''')
    (''' ENABLE_MARIONETTE ''', r''' $ENABLE_MARIONETTE ''')
    (''' MOZ_PLACES ''', r''' $MOZ_PLACES ''')
    (''' MOZ_SERVICES_HEALTHREPORT ''', r''' $MOZ_SERVICES_HEALTHREPORT ''')
    (''' MOZ_SERVICES_SYNC ''', r''' $MOZ_SERVICES_SYNC ''')
    (''' AR_FLAGS ''', r''' $AR_FLAGS ''')
    (''' AR_EXTRACT ''', r''' $AR_EXTRACT ''')
    (''' ASFLAGS ''', r''' $ASFLAGS ''')
    (''' AS_DASH_C_FLAG ''', r''' $AS_DASH_C_FLAG ''')
    (''' RC ''', r''' $RC ''')
    (''' RCFLAGS ''', r''' $RCFLAGS ''')
    (''' IMPLIB ''', r''' $IMPLIB ''')
    (''' FILTER ''', r''' $FILTER ''')
    (''' BIN_FLAGS ''', r''' $BIN_FLAGS ''')
    (''' MOZ_AUTH_EXTENSION ''', r''' $MOZ_AUTH_EXTENSION ''')
    (''' MOZ_PREF_EXTENSIONS ''', r''' $MOZ_PREF_EXTENSIONS ''')
    (''' MOZ_DEBUG ''', r''' $MOZ_DEBUG ''')
    (''' MOZ_DEBUG_LDFLAGS ''', r''' $MOZ_DEBUG_LDFLAGS ''')
    (''' WARNINGS_AS_ERRORS ''', r''' $WARNINGS_AS_ERRORS ''')
    (''' MOZ_EXTENSIONS ''', unique_list(r''' $MOZ_EXTENSIONS '''.split()))
    (''' LIBICONV ''', r''' $LIBICONV ''')
    (''' MOZ_TOOLKIT_SEARCH ''', r''' $MOZ_TOOLKIT_SEARCH ''')
    (''' MOZ_FEEDS ''', r''' $MOZ_FEEDS ''')
    (''' ENABLE_TESTS ''', r''' $ENABLE_TESTS ''')
    (''' MOZ_UNIVERSALCHARDET ''', r''' $MOZ_UNIVERSALCHARDET ''')
    (''' ACCESSIBILITY ''', r''' $ACCESSIBILITY ''')
    (''' MOZ_SPELLCHECK ''', r''' $MOZ_SPELLCHECK ''')
    (''' MOZ_VERIFY_MAR_SIGNATURE ''', r''' $MOZ_VERIFY_MAR_SIGNATURE ''')
    (''' MOZ_ENABLE_SIGNMAR ''', r''' $MOZ_ENABLE_SIGNMAR ''')
    (''' MOZ_UPDATER ''', r''' $MOZ_UPDATER ''')
    (''' MOZ_ANGLE_RENDERER ''', r''' $MOZ_ANGLE_RENDERER ''')
    (''' MOZ_D3D_CPU_SUFFIX ''', r''' $MOZ_D3D_CPU_SUFFIX ''')
    (''' MOZ_HAS_WINSDK_WITH_D3D ''', r''' $MOZ_HAS_WINSDK_WITH_D3D ''')
    (''' MOZ_D3DCOMPILER_VISTA_DLL ''', r''' $MOZ_D3DCOMPILER_VISTA_DLL ''')
    (''' MOZ_D3DCOMPILER_VISTA_DLL_PATH ''', r''' $MOZ_D3DCOMPILER_VISTA_DLL_PATH ''')
    (''' MOZ_EXCLUDE_HYPHENATION_DICTIONARIES ''', r''' $MOZ_EXCLUDE_HYPHENATION_DICTIONARIES ''')
    (''' ENABLE_STRIP ''', r''' $ENABLE_STRIP ''')
    (''' PKG_SKIP_STRIP ''', r''' $PKG_SKIP_STRIP ''')
    (''' STRIP_FLAGS ''', r''' $STRIP_FLAGS ''')
    (''' USE_ELF_HACK ''', r''' $USE_ELF_HACK ''')
    (''' INCREMENTAL_LINKER ''', r''' $INCREMENTAL_LINKER ''')
    (''' MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS ''', r''' $MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS ''')
    (''' MOZ_FIX_LINK_PATHS ''', r''' $MOZ_FIX_LINK_PATHS ''')
    (''' MOZ_POST_PROGRAM_COMMAND ''', r''' $MOZ_POST_PROGRAM_COMMAND ''')
    (''' MOZ_LINKER_EXTRACT ''', r''' $MOZ_LINKER_EXTRACT ''')
    (''' MOZ_JSDOWNLOADS ''', r''' $MOZ_JSDOWNLOADS ''')
    (''' MOZ_MACBUNDLE_NAME ''', r''' $MOZ_MACBUNDLE_NAME ''')
    (''' MOZ_MACBUNDLE_ID ''', r''' $MOZ_MACBUNDLE_ID ''')
    (''' MOZ_CHILD_PROCESS_NAME_PIE ''', r''' $MOZ_CHILD_PROCESS_NAME_PIE ''')
    (''' MOZ_CHILD_PROCESS_NAME ''', r''' $MOZ_CHILD_PROCESS_NAME ''')
    (''' MOZ_CHILD_PROCESS_BUNDLE ''', r''' $MOZ_CHILD_PROCESS_BUNDLE ''')
    (''' MOZ_APP_NAME ''', r''' $MOZ_APP_NAME ''')
    (''' MOZ_APP_REMOTINGNAME ''', r''' $MOZ_APP_REMOTINGNAME ''')
    (''' MOZ_APP_DISPLAYNAME ''', r''' $MOZ_APP_DISPLAYNAME ''')
    (''' MOZ_APP_BASENAME ''', r''' $MOZ_APP_BASENAME ''')
    (''' MOZ_APP_VENDOR ''', r''' $MOZ_APP_VENDOR ''')
    (''' MOZ_APP_PROFILE ''', r''' $MOZ_APP_PROFILE ''')
    (''' MOZ_APP_ID ''', r''' $MOZ_APP_ID ''')
    (''' MOZ_APP_ANDROID_VERSION_CODE ''', r''' $MOZ_APP_ANDROID_VERSION_CODE ''')
    (''' MAR_CHANNEL_ID ''', r''' $MAR_CHANNEL_ID ''')
    (''' ACCEPTED_MAR_CHANNEL_IDS ''', r''' $ACCEPTED_MAR_CHANNEL_IDS ''')
    (''' MOZ_PROFILE_MIGRATOR ''', r''' $MOZ_PROFILE_MIGRATOR ''')
    (''' MOZ_APP_UA_NAME ''', r''' $MOZ_APP_UA_NAME ''')
    (''' MOZ_APP_VERSION ''', r''' $MOZ_APP_VERSION ''')
    (''' MOZ_APP_VERSION_DISPLAY ''', r''' $MOZ_APP_VERSION_DISPLAY ''')
    (''' MOZ_APP_MAXVERSION ''', r''' $MOZ_APP_MAXVERSION ''')
    (''' MOZ_UA_OS_AGNOSTIC ''', r''' $MOZ_UA_OS_AGNOSTIC ''')
    (''' MOZ_APP_STATIC_INI ''', r''' $MOZ_APP_STATIC_INI ''')
    (''' MOZ_UA_BUILDID ''', r''' $MOZ_UA_BUILDID ''')
    (''' MOZ_PKG_SPECIAL ''', r''' $MOZ_PKG_SPECIAL ''')
    (''' MOZ_SIMPLE_PACKAGE_NAME ''', r''' $MOZ_SIMPLE_PACKAGE_NAME ''')
    (''' MOZILLA_OFFICIAL ''', r''' $MOZILLA_OFFICIAL ''')
    (''' MOZ_SOURCE_REPO ''', r''' $MOZ_SOURCE_REPO ''')
    (''' MOZ_SOURCE_CHANGESET ''', r''' $MOZ_SOURCE_CHANGESET ''')
    (''' MOZ_INCLUDE_SOURCE_INFO ''', r''' $MOZ_INCLUDE_SOURCE_INFO ''')
    (''' MOZ_DATA_REPORTING ''', r''' $MOZ_DATA_REPORTING ''')
    (''' WIN32_REDIST_DIR ''', r''' $WIN32_REDIST_DIR ''')
    (''' WIN_UCRT_REDIST_DIR ''', r''' $WIN_UCRT_REDIST_DIR ''')
    (''' MOZ_ICU_VERSION ''', r''' $MOZ_ICU_VERSION ''')
    (''' ENABLE_INTL_API ''', r''' $ENABLE_INTL_API ''')
    (''' USE_ICU ''', r''' $USE_ICU ''')
    (''' ICU_DATA_FILE ''', r''' $ICU_DATA_FILE ''')
    (''' MOZ_ICU_DATA_ARCHIVE ''', r''' $MOZ_ICU_DATA_ARCHIVE ''')
    (''' _DEPEND_CFLAGS ''', r''' $_DEPEND_CFLAGS ''')
    (''' MOZ_SYSTEM_JPEG ''', r''' $MOZ_SYSTEM_JPEG ''')
    (''' MOZ_SYSTEM_PNG ''', r''' $MOZ_SYSTEM_PNG ''')
    (''' MOZ_SYSTEM_BZ2 ''', r''' $MOZ_SYSTEM_BZ2 ''')
    (''' MOZ_JPEG_CFLAGS ''', list(r''' $MOZ_JPEG_CFLAGS '''.split()))
    (''' MOZ_JPEG_LIBS ''', list(r''' $MOZ_JPEG_LIBS '''.split()))
    (''' MOZ_BZ2_CFLAGS ''', list(r''' $MOZ_BZ2_CFLAGS '''.split()))
    (''' MOZ_BZ2_LIBS ''', list(r''' $MOZ_BZ2_LIBS '''.split()))
    (''' MOZ_PNG_CFLAGS ''', list(r''' $MOZ_PNG_CFLAGS '''.split()))
    (''' MOZ_PNG_LIBS ''', list(r''' $MOZ_PNG_LIBS '''.split()))
    (''' HOST_CMFLAGS ''', r''' $HOST_CMFLAGS ''')
    (''' HOST_CMMFLAGS ''', r''' $HOST_CMMFLAGS ''')
    (''' OS_COMPILE_CMFLAGS ''', r''' $OS_COMPILE_CMFLAGS ''')
    (''' OS_COMPILE_CMMFLAGS ''', r''' $OS_COMPILE_CMMFLAGS ''')
    (''' OS_CFLAGS ''', r''' $OS_CFLAGS ''')
    (''' OS_CXXFLAGS ''', r''' $OS_CXXFLAGS ''')
    (''' OS_CPPFLAGS ''', r''' $OS_CPPFLAGS ''')
    (''' OS_COMPILE_CFLAGS ''', r''' $OS_COMPILE_CFLAGS ''')
    (''' OS_COMPILE_CXXFLAGS ''', r''' $OS_COMPILE_CXXFLAGS ''')
    (''' OS_LDFLAGS ''', r''' $OS_LDFLAGS ''')
    (''' OS_LIBS ''', r''' $OS_LIBS ''')
    (''' HOST_CC ''', r''' $HOST_CC ''')
    (''' HOST_CXX ''', r''' $HOST_CXX ''')
    (''' HOST_CFLAGS ''', r''' $HOST_CFLAGS ''')
    (''' HOST_CPPFLAGS ''', r''' $HOST_CPPFLAGS ''')
    (''' HOST_CXXFLAGS ''', r''' $HOST_CXXFLAGS ''')
    (''' HOST_LDFLAGS ''', r''' $HOST_LDFLAGS ''')
    (''' HOST_OPTIMIZE_FLAGS ''', r''' $HOST_OPTIMIZE_FLAGS ''')
    (''' HOST_AR_FLAGS ''', r''' $HOST_AR_FLAGS ''')
    (''' HOST_LD ''', r''' $HOST_LD ''')
    (''' HOST_BIN_SUFFIX ''', r''' $HOST_BIN_SUFFIX ''')
    (''' TARGET_XPCOM_ABI ''', r''' $TARGET_XPCOM_ABI ''')
    (''' HAVE_TOOLCHAIN_SUPPORT_MSSSE3 ''', r''' $HAVE_TOOLCHAIN_SUPPORT_MSSSE3 ''')
    (''' HAVE_TOOLCHAIN_SUPPORT_MSSE4_1 ''', r''' $HAVE_TOOLCHAIN_SUPPORT_MSSE4_1 ''')
    (''' HAVE_X86_AVX2 ''', r''' $HAVE_X86_AVX2 ''')
    (''' HAVE_ALTIVEC ''', r''' $HAVE_ALTIVEC ''')
    (''' GCC_USE_GNU_LD ''', r''' $GCC_USE_GNU_LD ''')
    (''' WRAP_LDFLAGS ''', r''' $WRAP_LDFLAGS ''')
    (''' MKSHLIB ''', r''' $MKSHLIB ''')
    (''' MKCSHLIB ''', r''' $MKCSHLIB ''')
    (''' DSO_CFLAGS ''', r''' $DSO_CFLAGS ''')
    (''' DSO_PIC_CFLAGS ''', r''' $DSO_PIC_CFLAGS ''')
    (''' DSO_LDOPTS ''', r''' $DSO_LDOPTS ''')
    (''' LIB_PREFIX ''', r''' $LIB_PREFIX ''')
    (''' DLL_PREFIX ''', r''' $DLL_PREFIX ''')
    (''' DLL_SUFFIX ''', r''' $DLL_SUFFIX ''')
    (''' LIB_SUFFIX ''', r''' $LIB_SUFFIX ''')
    (''' OBJ_SUFFIX ''', r''' $OBJ_SUFFIX ''')
    (''' BIN_SUFFIX ''', r''' $BIN_SUFFIX ''')
    (''' IMPORT_LIB_SUFFIX ''', r''' $IMPORT_LIB_SUFFIX ''')
    (''' USE_N32 ''', r''' $USE_N32 ''')
    (''' CC_VERSION ''', r''' $CC_VERSION ''')
    (''' NS_ENABLE_TSF ''', r''' $NS_ENABLE_TSF ''')
    (''' WIN32_CONSOLE_EXE_LDFLAGS ''', r''' $WIN32_CONSOLE_EXE_LDFLAGS ''')
    (''' WIN32_GUI_EXE_LDFLAGS ''', r''' $WIN32_GUI_EXE_LDFLAGS ''')
    (''' MOZ_VORBIS ''', r''' $MOZ_VORBIS ''')
    (''' MOZ_TREMOR ''', r''' $MOZ_TREMOR ''')
    (''' MOZ_FFVPX ''', r''' $MOZ_FFVPX ''')
    (''' FFVPX_ASFLAGS ''', list(r''' $FFVPX_ASFLAGS '''.split()))
    (''' MOZ_VPX_ERROR_CONCEALMENT ''', r''' $MOZ_VPX_ERROR_CONCEALMENT ''')
    (''' VPX_USE_YASM ''', r''' $VPX_USE_YASM ''')
    (''' VPX_ASFLAGS ''', list(r''' $VPX_ASFLAGS '''.split()))
    (''' VPX_AS_CONVERSION ''', r''' $VPX_AS_CONVERSION ''')
    (''' VPX_X86_ASM ''', r''' $VPX_X86_ASM ''')
    (''' VPX_ARM_ASM ''', r''' $VPX_ARM_ASM ''')
    (''' MOZ_CODE_COVERAGE ''', r''' $MOZ_CODE_COVERAGE ''')
    (''' LIBJPEG_TURBO_USE_YASM ''', r''' $LIBJPEG_TURBO_USE_YASM ''')
    (''' LIBJPEG_TURBO_ASFLAGS ''', list(r''' $LIBJPEG_TURBO_ASFLAGS '''.split()))
    (''' MOZ_LIBAV_FFT ''', r''' $MOZ_LIBAV_FFT ''')
    (''' LIBAV_FFT_ASFLAGS ''', list(r''' $LIBAV_FFT_ASFLAGS '''.split()))
    (''' MOZ_PACKAGE_JSSHELL ''', r''' $MOZ_PACKAGE_JSSHELL ''')
    (''' MOZ_FOLD_LIBS ''', r''' $MOZ_FOLD_LIBS ''')
    (''' MOZ_FOLD_LIBS_FLAGS ''', r''' $MOZ_FOLD_LIBS_FLAGS ''')
    (''' SOCORRO_SYMBOL_UPLOAD_TOKEN_FILE ''', r''' $SOCORRO_SYMBOL_UPLOAD_TOKEN_FILE ''')
    (''' DMG_TOOL ''', r''' $DMG_TOOL ''')
    (''' JS_BINARY ''', r''' $JS_BINARY ''')
    (''' NSS_EXTRA_SYMBOLS_FILE ''', r''' $NSS_EXTRA_SYMBOLS_FILE ''')
    (''' A11Y_LOG ''', r''' $A11Y_LOG ''')
    (''' MOZILLA_VERSION ''', r''' $MOZILLA_VERSION ''')
    (''' DIRECTIVE4 ''', r''' $DIRECTIVE4 ''')
    (''' PREPROCESS_OPTION ''', r''' $PREPROCESS_OPTION ''')
    (''' NSS_DISABLE_LIBPKIX ''', r''' $NSS_DISABLE_LIBPKIX ''')
    (''' WIN_TOP_SRC ''', r''' $WIN_TOP_SRC ''')
    (''' top_srcdir ''', r''' $top_srcdir ''')
EOF

for ac_subst_arg in $_subconfigure_ac_subst_args; do
  variable='$'$ac_subst_arg
  echo "    (''' $ac_subst_arg ''', r''' `eval echo $variable` ''')," >> $CONFIG_STATUS
done

cat >> $CONFIG_STATUS <<\EOF
]

non_global_defines = [
EOF

if test -n "$_NON_GLOBAL_ACDEFINES"; then
  for var in $_NON_GLOBAL_ACDEFINES; do
    echo "    '$var'," >> $CONFIG_STATUS
  done
fi

cat >> $CONFIG_STATUS <<EOF
]

flags = [
    '--enable-release',
    '--with-unify-dist',
    '--with-macos-sdk',
    '--with-macos-private-frameworks',
    '--with-arch',
    '--with-thumb',
    '--with-thumb-interwork',
    '--with-fpu',
    '--with-float-abi',
    '--with-soft-float',
    '--enable-address-sanitizer',
    '--enable-memory-sanitizer',
    '--enable-thread-sanitizer',
    '--enable-llvm-hacks',
    '--enable-valgrind',
    '--with-debug-label',
    '--with-debug-label',
    '--enable-cpp-rtti',
    '--enable-gold',
    '--enable-icf',
    '--enable-pie',
    '--enable-dtrace',
    '--with-pthreads',
    '--with-nspr-cflags',
    '--with-nspr-libs',
    '--enable-nspr-build',
    '--enable-posix-nspr-emulation',
    '--with-system-jpeg',
    '--with-system-zlib',
    '--with-system-bz2',
    '--enable-official-vendor',
    '--enable-official-branding',
    '--with-app-name',
    '--with-app-basename',
    '--enable-startup-notification',
    '--enable-ui-locale',
    '--with-branding',
    '--enable-private-build',
    '--with-distribution-id',
    '--enable-gio',
    '--enable-gconf',
    '--enable-libproxy',
    '--enable-gnomeui',
    '--enable-dbus',
    '--enable-accessibility',
    '--enable-dbm',
    '--enable-security-sqlstore',
    '--enable-incomplete-external-linkage',
    '--enable-mailnews',
    '--enable-mailnews-oauth2',
    '--enable-ldap',
    '--enable-mapi',
    '--enable-webrtc',
    '--enable-hardware-aec-ns',
    '--enable-raw',
    '--enable-av1',
    '--enable-eme',
    '--enable-alsa',
    '--enable-pulseaudio',
    '--enable-sndio',
    '--enable-negotiateauth',
    '--enable-pref-extensions',
    '--enable-system-extension-dirs',
    '--enable-universalchardet',
    '--enable-gamepad',
    '--enable-libjpeg-turbo',
    '--enable-extensions',
    '--enable-bundled-fonts',
    '--enable-verify-mar',
    '--enable-signmar',
    '--enable-updater',
    '--enable-tests',
    '--enable-parental-controls',
    '--enable-feeds',
    '--enable-safe-browsing',
    '--enable-url-classifier',
    '--enable-zipwriter',
    '--enable-faststripe',
    '--enable-optimize',
    '--enable-logrefcnt',
    '--enable-dump-painting',
    '--enable-clang-plugin',
    '--enable-strip',
    '--enable-install-strip',
    '--enable-elf-hack',
    '--enable-stdcxx-compat',
    '--enable-debug-js-modules',
    '--enable-precompiled-startupcache',
    '--enable-tasktracer',
    '--enable-reflow-perf',
    '--enable-startupcache',
    '--enable-synth-pico',
    '--with-jitreport-granularity',
    '--enable-mozril-geoloc',
    '--enable-chrome-format',
    '--enable-chrome-compression',
    '--with-chrome-name',
    '--enable-jetpack',
    '--enable-devtools-server',
    '--enable-devtools',
    '--enable-userinfo',
    '--with-default-mozilla-five-home',
    '--with-user-appdir',
    '--with-doc-input-dirs',
    '--with-doc-include-dirs',
    '--with-doc-output-dir',
    '--enable-shared-media',
    '--enable-system-cairo',
    '--enable-system-pixman',
    '--enable-xul',
    '--enable-necko-wifi',
    '--enable-cookies',
    '--with-macbundlename-prefix',
]
EOF




# Run freetype configure script

if test "$MOZ_TREE_FREETYPE"; then
   export CFLAGS="$CFLAGS $MOZ_DEBUG_FLAGS -std=c99"
   export CPPFLAGS="$CPPFLAGS $MOZ_DEBUG_FLAGS"
   export CXXFLAGS="$CXXFLAGS $MOZ_DEBUG_FLAGS"
   export LDFLAGS="$LDFLAGS $MOZ_DEBUG_LDFLAGS"
   # Spaces in the *_CFLAGS and *_LIBS variables are intentionally placed
   # to force freetype to use our settings rather than autodetecting
   if test -n "$MOZ_SYSTEM_PNG"; then
     export LIBPNG_CFLAGS="$MOZ_PNG_CFLAGS "
   else
     export LIBPNG_CFLAGS="-I$_objdir/dist/include"
   fi
   export LIBPNG_LIBS="$MOZ_PNG_LIBS "
   export ZLIB_CFLAGS="$MOZ_ZLIB_CFLAGS "
   export ZLIB_LIBS="$MOZ_ZLIB_LIBS "
   export CONFIG_FILES="unix-cc.mk:unix-cc.in unix-def.mk:unix-def.in freetype-config freetype2.pc:freetype2.in"
   ac_configure_args="$ac_configure_args --host=$target --disable-shared --with-pic=yes --with-zlib=yes --without-bzip2 --with-png=yes --without-harfbuzz"

   if ! test -e modules; then
     mkdir modules
   fi
   # Only export CC, CXX and RANLIB for the subconfigure, and avoid spilling
   # that further down the road.
   (export CC CXX RANLIB;
    for moz_config_dir in modules/freetype2; do
  _CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
  case "$moz_config_dir" in
  *:*)
    objdir=$(echo $moz_config_dir | awk -F: '{print $2}')
    ;;
  *)
    objdir=$moz_config_dir
    ;;
  esac
          echo $objdir >> subconfigures

  dumpenv="true | "
  case "$host" in
  *-mingw*)
    _CONFIG_SHELL=$(cd $(dirname $_CONFIG_SHELL); pwd -W)/$(basename $_CONFIG_SHELL)
    if test ! -e "$_CONFIG_SHELL" -a -e "${_CONFIG_SHELL}.exe"; then
        _CONFIG_SHELL="${_CONFIG_SHELL}.exe"
    fi
                        dumpenv="$PERL $_topsrcdir/build/win32/dumpenv4python.pl $ac_configure_args | "
    ;;
  esac

  eval $dumpenv $PYTHON $_topsrcdir/build/subconfigure.py --prepare "$srcdir" "$moz_config_dir" "$_CONFIG_SHELL" $ac_configure_args 

  done

   ) || exit 1
fi

if test -z "$direct_nspr_config"; then
                    CC="$_SUBDIR_CC"
    CXX="$_SUBDIR_CXX"
    CFLAGS="$_SUBDIR_CFLAGS"
    CPPFLAGS="$_SUBDIR_CPPFLAGS"
    CXXFLAGS="$_SUBDIR_CXXFLAGS"
    LDFLAGS="$_SUBDIR_LDFLAGS"
    HOST_CC="$_SUBDIR_HOST_CC"
    HOST_CFLAGS="$_SUBDIR_HOST_CFLAGS"
    HOST_CXXFLAGS="$_SUBDIR_HOST_CXXFLAGS"
    HOST_LDFLAGS="$_SUBDIR_HOST_LDFLAGS"
    RC=
fi

unset MAKEFILES
unset CONFIG_FILES

# Run all configure scripts specified by a subconfigure
if test -n "$_subconfigure_subdir"; then
  _save_srcdir="$srcdir"
  srcdir="$srcdir/.."
  _save_ac_configure_args="$ac_configure_args"
  ac_configure_args="$_subconfigure_config_args"
  
for moz_config_dir_ in "$_subconfigure_subdir"; do
  for moz_config_dir in $moz_config_dir_; do
  _CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
  case "$moz_config_dir" in
  *:*)
    objdir=$(echo $moz_config_dir | awk -F: '{print $2}')
    ;;
  *)
    objdir=$moz_config_dir
    ;;
  esac
          echo $objdir >> subconfigures

  dumpenv="true | "
  case "$host" in
  *-mingw*)
    _CONFIG_SHELL=$(cd $(dirname $_CONFIG_SHELL); pwd -W)/$(basename $_CONFIG_SHELL)
    if test ! -e "$_CONFIG_SHELL" -a -e "${_CONFIG_SHELL}.exe"; then
        _CONFIG_SHELL="${_CONFIG_SHELL}.exe"
    fi
                        dumpenv="$PERL $_topsrcdir/build/win32/dumpenv4python.pl $ac_configure_args | "
    ;;
  esac

  eval $dumpenv $PYTHON $_topsrcdir/build/subconfigure.py --prepare "$srcdir" "$moz_config_dir" "$_CONFIG_SHELL" $ac_configure_args --cache-file="$cache_file"

  done

  tail -1 subconfigures >> skip_subconfigures
  if test "$no_recursion" != yes; then
  trap '' EXIT
  if ! $PYTHON $_topsrcdir/build/subconfigure.py `tail -1 skip_subconfigures`; then
      exit 1
  fi
fi

done

  ac_configure_args="$_save_ac_configure_args"
  srcdir="$_save_srcdir"
fi

if test "$COMPILE_ENVIRONMENT"; then

export WRAP_LDFLAGS

CC="$_SUBDIR_CC"
CXX="$_SUBDIR_CXX"
CFLAGS="$_SUBDIR_CFLAGS"
CPPFLAGS="$_SUBDIR_CPPFLAGS"
CXXFLAGS="$_SUBDIR_CXXFLAGS"
LDFLAGS="$_SUBDIR_LDFLAGS"
HOST_CC="$_SUBDIR_HOST_CC"
HOST_CFLAGS="$_SUBDIR_HOST_CFLAGS"
HOST_CXXFLAGS="$_SUBDIR_HOST_CXXFLAGS"
HOST_LDFLAGS="$_SUBDIR_HOST_LDFLAGS"
RC=

# Run the SpiderMonkey 'configure' script.
dist=$MOZ_BUILD_ROOT/dist
ac_configure_args="$_SUBDIR_CONFIG_ARGS"

# --with-system-nspr will have been converted into the relevant $NSPR_CFLAGS
# and $NSPR_LIBS.
ac_configure_args="`echo $ac_configure_args | sed -e 's/--with-system-nspr\S* *//'`"

if test "$_INTL_API" = no; then
    ac_configure_args="$ac_configure_args --without-intl-api"
fi

if test -n "$NSPR_CFLAGS" -o -n "$NSPR_LIBS"; then
    ac_configure_args="$ac_configure_args --with-nspr-cflags='$NSPR_CFLAGS'"
    ac_configure_args="$ac_configure_args --with-nspr-libs='$NSPR_LIBS'"
fi
ac_configure_args="$ac_configure_args --prefix=$dist"
if test -n "$ZLIB_IN_MOZGLUE"; then
   MOZ_ZLIB_LIBS=
fi
export MOZ_SYSTEM_ZLIB
export MOZ_ZLIB_CFLAGS
export MOZ_ZLIB_LIBS
export MOZ_APP_NAME
export MOZ_APP_REMOTINGNAME
export MOZILLA_CENTRAL_PATH=$_topsrcdir
export STLPORT_CPPFLAGS
export STLPORT_LIBS
unset MOZ_BUILD_APP
export DIST
export MOZ_LINKER
export ZLIB_IN_MOZGLUE
export AR
export RANLIB
export CPP
export CC
export CXX
export LD
export ARFLAGS
export CPPFLAGS
export CFLAGS
export CXXFLAGS
export LDFLAGS
export HOST_CC
export HOST_CXX
export HOST_CFLAGS
export HOST_CPPFLAGS
export HOST_CXXFLAGS
export HOST_LDFLAGS

if ! test -e js; then
    mkdir js
fi

ac_configure_args="$ac_configure_args JS_STANDALONE="
for moz_config_dir in js/src; do
  _CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
  case "$moz_config_dir" in
  *:*)
    objdir=$(echo $moz_config_dir | awk -F: '{print $2}')
    ;;
  *)
    objdir=$moz_config_dir
    ;;
  esac
          echo $objdir >> subconfigures

  dumpenv="true | "
  case "$host" in
  *-mingw*)
    _CONFIG_SHELL=$(cd $(dirname $_CONFIG_SHELL); pwd -W)/$(basename $_CONFIG_SHELL)
    if test ! -e "$_CONFIG_SHELL" -a -e "${_CONFIG_SHELL}.exe"; then
        _CONFIG_SHELL="${_CONFIG_SHELL}.exe"
    fi
                        dumpenv="$PERL $_topsrcdir/build/win32/dumpenv4python.pl $ac_configure_args | "
    ;;
  esac

  eval $dumpenv $PYTHON $_topsrcdir/build/subconfigure.py --prepare "$srcdir" "$moz_config_dir" "$_CONFIG_SHELL" $ac_configure_args --cache-file="$cache_file"

  done

ac_configure_args="$_SUBDIR_CONFIG_ARGS"

fi # COMPILE_ENVIRONMENT


if test "$no_recursion" != yes; then
  trap '' EXIT
  if ! $PYTHON $_topsrcdir/build/subconfigure.py --list subconfigures --skip skip_subconfigures; then
      exit 1
  fi
fi



rm -fr confdefs* $ac_clean_files
